<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Getting Started with p5js: ES</title>
    
    <link rel="stylesheet" href="assets/pdf.css">

  </head>
  <body data-type="book">
    <html><head></head><body><section data-type="copyright-page" xmlns="http://www.w3.org/1999/xhtml" id="introduccion-a-p5js-JGjkUbM">
<h1>Introducci&#xF3;n a p5.js</h1>

<p class="author">por <span class="firstname">Lauren </span> <span class="surname">McCarthy</span>, <span class="firstname">Casey </span> <span class="surname">Reas</span>, and <span class="firstname">Ben </span> <span class="surname">Fry</span>. Traducido por <span class="firstname">Aar&#xF3;n </span> <span class="surname">Montoya-Moraga</span></p>

<p class="copyright">Copyright &#xA9; 2016 Maker Media. Todos los derechos reservados. Traducci&#xF3;n al espa&#xF1;ol &#xA9; 2017 Processing Foundation</p>

<p class="printlocation">Impreso en Estados Unidos.</p>

<p class="publisher">Publicado por <span class="publishername">Processing Foundation, Inc.</span> https://processingfoundation.org</p>

<!--<p>Maker Media books may be purchased for educational, business, or sales promotional use. Online editions are also available for most titles (<a href="http://safaribooksonline.com">http://safaribooksonline.com</a>). For more information, contact our corporate/institutional sales department: 800-998-9938 or <span data-type="email">corporate@oreilly.com</span>.</p>-->

<ul class="stafflist">
	<li><span class="staffrole">Dise&#xF1;o de portada, versi&#xF3;n en espa&#xF1;ol:</span> Tyler Yin</li>
	<li><span class="staffrole">Dise&#xF1;o interior, versi&#xF3;n en espa&#xF1;ol:</span> Casey Reas</li>
	<li><span class="staffrole">Composici&#xF3;n tipogr&#xE1;fica, versi&#xF3;n en espa&#xF1;ol:</span> Tyler Yin</li>
	<li><span class="staffrole">Ilustraciones:</span> Taeyoon Choi</li>
	<li><span class="staffrole">Edici&#xF3;n, versi&#xF3;n en ingl&#xE9;s:</span> Anna Kaziunas France</li>
	<li><span class="staffrole">Edici&#xF3;n de producci&#xF3;n, versi&#xF3;n en ingl&#xE9;s:</span> Kristen Brown</li>
	<li><span class="staffrole">Correcci&#xF3;n de estilo, versi&#xF3;n en ingl&#xE9;s:</span> Jasmine Kwityn</li>
	<li><span class="staffrole">Correcci&#xF3;n de pruebas, versi&#xF3;n en ingl&#xE9;s:</span> Kim Cofer</li>
	<li><span class="staffrole">Dise&#xF1;o interior, versi&#xF3;n en ingl&#xE9;s:</span> David Futato</li>
</ul>

<ul class="printings">
	<li><span class="printedition">Diciembre 2017:</span> primera edici&#xF3;n</li>
</ul>
<!--Add additional revdate spans below as needed.-->

<div>
<h1 class="revisions">Historial de revisiones de la primera edici&#xF3;n</h1>

<ul class="releases">
	<li><span class="revdate">2017-12-04:</span> Primer lanzamiento</li>
</ul>
</div>

<!--<p class="errata">See <a href="http://oreilly.com/catalog/errata.csp?isbn=9781457186776">http://oreilly.com/catalog/errata.csp?isbn=9781457186776</a> for release details.</p>-->

<div class="legal">
<p>Aunque la editorial y los autores se han esforzado de buena fe en asegurar que la informaci&#xF3;n y las instrucciones contenidas en esta obra sean correctos, la editorial y los autores niegan toda responsabilidad por los posibles errores y omisiones, incluyendo sin limitaciones la responsabilidad por los da&#xF1;os resultantes del uso o de la confianza puesta en esta obra. El uso de la informaci&#xF3;n y las instrucciones contenidas en este trabajo se realiza bajo tu propio riesgo. Si cualquier porci&#xF3;n de c&#xF3;digo u otra tecnolog&#xED;a contenidos o descritos por esta obra est&#xE1; sujeto a licencias de c&#xF3;digo abierto o a los derechos propiedad intelectual de terceros, es tu propia responsabilidad asegurarte que tu uso cumpla con estas licencias y/o derechos.</p>
</div>

<div class="copyright-bottom">
<p class="isbn">TBD</p>

<!--<p class="printer">[LSI]</p>-->
</div>
</section>

<section xmlns="http://www.w3.org/1999/xhtml" data-type="toc" id="toc">
    <h1 class="chapterhead">Contenido</h1>
    
    <p><b><a href="#preface" class="table-of-contents">Prefacio</a>.......................................................................................................................... 3</b></p>
    
    <p><b><a href="#hello" class="table-of-contents">1/Hola</a>............................................................................................................................ 11</b></p>
    
    <p><b><a href="#starting_to_code" class="table-of-contents">2/Empezando a programar</a>..................................................................................... 18</b></p>
    
    <p><b><a href="#draw" class="table-of-contents">3/Dibujar</a>..................................................................................................................... 26</b></p>
    
    <p><b><a href="#variables" class="table-of-contents">4/Variables</a>.................................................................................................................. 51</b></p>
    
    <p><b><a href="#response" class="table-of-contents">5/Respuesta</a>................................................................................................................ 68</b></p>
    
    <p><b><a href="#translate" class="table-of-contents">6/Trasladar, rotar, escalar</a>...................................................................................... 98</b></p>
    
    <p><b><a href="#media" class="table-of-contents">7/Medios</a>..................................................................................................................... 112</b></p>
    
    <p><b><a href="#motion" class="table-of-contents">8/Movimiento</a>.......................................................................................................... 129</b></p>
    
    <p><b><a href="#functions" class="table-of-contents">9/Funciones</a>.............................................................................................................. 147</b></p>
    
    <p><b><a href="#objects" class="table-of-contents">10/Objetos</a>.................................................................................................................. 161</b></p>
    
    <p><b><a href="#arrays" class="table-of-contents">11/Arreglos</a>................................................................................................................. 174</b></p>
    
    <p><b><a href="#data" class="table-of-contents">12/Datos</a>..................................................................................................................... 190</b></p>
    
    <p><b><a href="#extend" class="table-of-contents">13/Extensi&#xF3;n</a>............................................................................................................ 209</b></p>
    
    <p><b><a href="#coding_tips" class="table-of-contents">A/Consejos de programaci&#xF3;n</a>............................................................................... 219</b></p>
    
    <p><b><a href="#order_of_operations" class="table-of-contents">B/Orden de operaciones</a>........................................................................................ 223</b></p>
    
    <p><b><a href="#variable_scope" class="table-of-contents">C/&#xC1;mbito de variable</a>............................................................................................. 224</b></p>
    
    
    
    
</section>

<section data-type="introduction" class="opener notoc" id="5bd3HL0">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-00-preface"><img class="fse fs image" src="assets/images/gspj_00in01.png">
<figcaption>&#xA0;</figcaption>
</figure>
</section>

<section xmlns="http://www.w3.org/1999/xhtml" data-type="preface" id="preface">
<h1 class="chapterhead">Prefacio</h1>

<p class="lede">p5.js est&#xE1; inspirado y guiado por otro proyecto, que empez&#xF3; hace alrededor de 15 a&#xF1;os. En el a&#xF1;o 2001, Casey Reas y Ben Fry empezaron a trabajar en una nueva plataforma para hacer m&#xE1;s f&#xE1;cil la programaci&#xF3;n de gr&#xE1;ficas interactivas; la nombraron Processing. Ellos estaban frustrados con lo dif&#xED;cil que era escribir este tipo de software con los lenguajes que normalmente usaban (C++ y Java) y fueron inspirados por lo simple que era escribir programas interesantes con los lenguajes de su ni&#xF1;ez (Logo y BASIC). Su mayor influencia fue Design by Numbers (DBN), un lenguaje que ellos en ese tiempo estaban manteniendo y ense&#xF1;ando (y que fue creado por su tutor de investigaci&#xF3;n, John Maeda).</p>

<p>Con Processing, Ben y Casey estaban buscando una mejor manera de probar sus ideas f&#xE1;cilmente y en c&#xF3;digo, en vez de solamente conversar sobre ellas o pasar demasiado tiempo program&#xE1;ndolas en C++. Su otro objetivo fue construir un lenguaje para ense&#xF1;ar programaci&#xF3;n a estudiantes de dise&#xF1;o y de arte y ofrecerle a estudiantes m&#xE1;s avanzados una manera m&#xE1;s f&#xE1;cil de trabajar con gr&#xE1;ficas. Esta combinaci&#xF3;n es una desviaci&#xF3;n positiva de la manera en que usualmente se ense&#xF1;a programaci&#xF3;n. Los nuevos usuarios empiezan concentr&#xE1;ndose en gr&#xE1;ficos e interacci&#xF3;n en vez de estructuras de datos y resultados en forma de texto en la consola.</p>

<p>A trav&#xE9;s de los a&#xF1;os, Processing se ha transformado en una gran comunidad. Es usado en salas de clases a lo largo del mundo, en planes de estudios de artes, humanidades y ciencias de la computaci&#xF3;n y de forma profesional.</p>

<p>Hace dos a&#xF1;os, Ben y Casey me hicieron una pregunta: &#xBF;c&#xF3;mo ser&#xED;a Processing si funcionara en la web? p5.js nace con el objetivo original de Processing, hacer que programar sea accesible para artistas, dise&#xF1;adores, educadores y principiantes, y luego lo reinterpreta para la web actual usando JavaScript y HTML.</p>

<p>El desarrollo de p5.js ha sido como reunir mundos distintos. Para facilitar la transici&#xF3;n a la Web de los usuarios de la comunidad existente de Processing, seguimos la sintaxis y las convenciones de Processing tanto como fue posible. Sin embargo, p5.js est&#xE1; construido en JavaScript, mientras que Processing est&#xE1; construido en un lenguaje llamado Java. Estos dos lenguajes tienen distintos patrones y funciones, as&#xED; que en ocasiones nos tuvimos que alejar de la sintaxis ya familiar de Processing. Tambi&#xE9;n fue importante que p5.js pudiera ser integrado sin problemas a las existentes caracter&#xED;sticas, herramientas y estructuras de la web, para as&#xED; atraer a usuarios familiarizados con la Web, pero sin experiencia en programaci&#xF3;n creativa. Sintetizar todos estos factores fue un desaf&#xED;o, pero el objetivo de unir estas estructuras proporcion&#xF3; un camino claro a seguir en el desarrollo de p5.js.</p>

<p>Una primera versi&#xF3;n beta fue lanzada en agosto del 2014. Desde ese entonces, ha sido usado e integrado a programas de estudios en todo el mundo. Existe un editor oficial de p5.js que est&#xE1; actualmente en desarrollo, y se est&#xE1; progresando en muchas nuevas caracter&#xED;sticas y bibliotecas. </p>

<p> p5.js es un esfuerzo comunitario - cientos de personas han contribuido funciones esenciales, soluciones a errores, ejemplos, documentaci&#xF3;n, dise&#xF1;o, reflexiones y discusi&#xF3;n. Pretendemos continuar la visi&#xF3;n y el esp&#xED;ritu de la comunidad de Processing mientras la expandimos a&#xFA;n m&#xE1;s en la Web.</p>

<section data-type="sect1" id="how_this_book_is_organized" class="pagebreak-before">
<h1>C&#xF3;mo est&#xE1; organizado este libro</h1>

<p>Los cap&#xED;tulos de este libro est&#xE1;n organizados de la siguiente manera:</p>

<ul>
	<li>
	<p><a href="#hello">1/Hola</a>: aprende sobre p5.js.</p>
	</li>
	<li>
	<p><a href="#starting_to_code">2/Empezando a programar</a>: crea tu primer programa en p5.js.</p>
	</li>
	<li>
	<p><a href="#draw">3/Dibujar</a>: define y dibuja figuras simples.</p>
	</li>
	<li>
	<p><a href="#variables">4/Variables</a>: almacena, modifica y reusa datos.</p>
	</li>
	<li>
	<p><a href="#response">5/Respuesta</a>: controla e influye en programas con el rat&#xF3;n, el teclado y el tacto.</p>
	</li>
	<li>
	<p><a href="#translate">6/Trasladar, rotar, escalar</a>: transforma las coordenadas.</p>
	</li>
	<li>
	<p><a href="#media">7/Medios</a>: carga y muestra medios, incluyendo im&#xE1;genes y tipos de letras.</p>
	</li>
	<li>
	<p><a href="#motion">8/Movimiento</a>: mueve y coreograf&#xED;a figuras.</p>
	</li>
	<li>
	<p><a href="#functions">9/Funciones</a>: construye nuevos m&#xF3;dulos de c&#xF3;digo.</p>
	</li>
	<li>
	<p><a href="#objects">10/Objetos</a>: crea m&#xF3;dulos de c&#xF3;digo que combinan variables y funciones.</p>
	</li>
	<li>
	<p><a href="#arrays">11/Arreglos</a>: simplifica el trabajo con listas de variables.</p>
	</li>
	<li>
	<p><a href="#data">12/Datos</a>: carga y visualiza datos.</p>
	</li>
	<li>
	<p><a href="#extend">13/Extensi&#xF3;n</a>: aprende sobre sonido y DOM.</p>
	</li>
</ul>
</section>

<section data-type="sect1" id="who_this_book_is_for">
<h1>Para qui&#xE9;n es este libro</h1>

<p>Este libro fue escrito para personas que quieren crear im&#xE1;genes y programas interactivos simples con una introducci&#xF3;n casual y concisa a la programaci&#xF3;n de computadores. Es para personas que quieren una ayuda para entender los miles de ejemplos de c&#xF3;digo en p5.js y los manuales de referencia disponibles en la web de forma gratuita y libre. <em>Introducci&#xF3;n a p5.js</em> no es un libro de referencia sobre programaci&#xF3;n; como el t&#xED;tulo lo sugiere, te ayudar&#xE1; a empezar. Es &#xFA;til para adolescentes, adultos, entusiastas y cualquier persona interesada.</p>

<p>Este libro tambi&#xE9;n es apropiado para personas con experiencia en programaci&#xF3;n que quieran aprender los conceptos b&#xE1;sicos de gr&#xE1;ficos computacionales interactivas. <em>Introducci&#xF3;n a p5.js</em> contiene t&#xE9;cnicas que pueden ser aplicadas en la creaci&#xF3;n de juegos, animaciones e interfaces.</p>
</section>

<section data-type="sect1" id="conventions_used_in_this_book">
<h1>Convenciones usadas en este libro</h1>

<p>En este libro se usan las siguientes convenciones tipogr&#xE1;ficas:</p>

<dl>
	<dt><em>Cursivas</em></dt>
	<dd>
	<p>Indican nuevos t&#xE9;rminos, URLS, direcciones de email, nombres de archivos y extensiones de archivos.</p>
	</dd>
	<dt><code>Ancho constante</code></dt>
	<dd>
	<p>Usado para listados de programas y dentro de p&#xE1;rrafos para referirse a elementos de programas como nombres de variables o funciones, bases de datos, tipos de datos, variables de ambiente, declaraciones y palabras clave.</p>
	</dd>
	<dt><em><code>Ancho constante y cursiva</code></em></dt>
	<dd>
	<p>Muestra texto que deber&#xED;a ser reemplazado por valores provistos por el usuario o por valores determinados por el contexto.</p>
	</dd>
</dl>

<div data-type="note" id="62gkhY2">
<p>Este tipo de p&#xE1;rrafo indica una nota general.</p>
</div>
</section>

<section data-type="sect1" id="using_code_examples">
<h1>Uso de ejemplos de c&#xF3;digo</h1>

<p> El material suplementario (ejemplos de c&#xF3;digo, ejercicios, etc.) est&#xE1; disponble para su descarga en <a href="https://github.com/lmccart/gswp5.js-code"><em>https://github.com/lmccart/gswp5.js-code</em></a>.</p>

<p>Este libro est&#xE1; aqu&#xED; para ayudarte a que logres hacer tu trabajo. En general, puedes usar el c&#xF3;digo de este libro en tus programas y documentaci&#xF3;n. No necesitas contactarnos para pedir permiso a menos que est&#xE9;s reproduciendo una porci&#xF3;n significativa del c&#xF3;digo. Por ejemplo, escribir un programa que usa m&#xFA;ltiples trozos de c&#xF3;digo de este libro no requiere permiso. S&#xED; requiere permiso la venta o distribuci&#xF3;n de ejemplos de libros Make:. Responder una pregunta citando este libro y citar c&#xF3;digos de ejemplo no requiere permiso. S&#xED; requiere permiso incorporar una cantidad significativa de c&#xF3;digo de ejemplo de este libro en la documentaci&#xF3;n de tu producto.</p>

<p>Apreciamos, pero no requerimos, atribuci&#xF3;n. Una atribuci&#xF3;n usualmente incluye el t&#xCD;tulo, autor, editorial e ISBN. Por ejemplo: &#x201C; <em>Make: Getting Started with p5.js</em> por Lauren McCarthy, Casey Reas y Ben Fry, Copyright 2015 Maker Media, Inc., 978-1-457-18677-6.&quot;</p>

<p>Si sientes que tu uso de los ejemplos de c&#xF3;digo se aleja del uso justo o de los permisos dados aqu&#xCD;, si&#xE9;ntete libre de contactarnos en <a href="mailto:permissions@oreilly.com">permissions@oreilly.com</a>.</p>
</section>

<section data-type="sect1" id="_safari_books_online">
<h1>Safari&#xAE; Books Online</h1>

<div class="safarienabled">
<p><a class="orm:hideurl:ital" href="http://safaribooksonline.com"><em class="hyperlink">Safari Books Online</em></a> es una biblioteca digital on-demand que ofrece <a class="orm:hideurl" href="https://www.safaribooksonline.com/explore/">contenido</a> experto en los formatos libro y video de los autores l&#xED;deres del mundo en tecnolog&#xED;a y negocios.</p>
</div>

<p>Profesionales de la tecnolog&#xED;a, desarrolladores de software, dise&#xF1;adores web y profesionales de negocios y creativos usan Safari Books Online como su fuente principal de investigaci&#xF3;n, resoluci&#xF3;n de problemas, aprendizaje y entrenamiento certificado.</p>

<p>Safari Books Online ofrece un rango de <a class="orm:hideurl" href="https://www.safaribooksonline.com/pricing/">planes y precios</a> para el sector <a class="orm:hideurl" href="https://www.safaribooksonline.com/enterprise/">empresarial</a>, <a class="orm:hideurl" href="https://www.safaribooksonline.com/government/">gubernamental</a>, <a class="orm:hideurl" href="https://www.safaribooksonline.com/academic-public-library/">educacional</a>, y para individuos.</p>

<p>Los miembros tienen acceso a miles de libros, videos de entrenamiento y manuscritos prepublicados en una base de datos completamente buscable de editores como Maker Media, O&#x2019;Reilly Media, Prentice Hall Professional, Addison-Wesley Professional, Microsoft Press, Sams, Que, Peachpit Press, Focal Press, Cisco Press, John Wiley &amp; Sons, Syngress, Morgan Kaufmann, IBM Redbooks, Packt, Adobe Press, FT Press, Apress, Manning, New Riders, McGraw-Hill, Jones &amp; Bartlett, Course Technology, y cientos <a class="orm:hideurl" href="https://www.safaribooksonline.com/our-library/">m&#xE1;s</a>. Para m&#xE1;s informaci&#xF3;n sobre Safari Books Online, por favor vis&#xED;tanos <a class="orm:hideurl" href="http://safaribooksonline.com/">en l&#xED;nea</a>.</p>
</section>

<section data-type="sect1" id="how_to_contact_us">
<h1>C&#xF3;mo contactarnos</h1>

<p>Por favor dirige tus comentarios y preguntas sobre este libro a a la editorial:</p>

<ul class="simplelist">
	<li>Maker Media, Inc.</li>
	<li>1160 Battery Street East, Suite 125</li>
	<li>San Francisco, California 94111</li>
	<li>800-998-9938 (en Estados Unidos o Canad&#xE1;)</li>
	<li><a href="http://makermedia.com/contact-us/"><em>http://makermedia.com/contact-us/</em></a></li>
</ul>

<p>Make: une, inspira, informa y entretiene a una creciente comunidad de gente inventiva que se embarca en proyectos asombrosos en sus patios, s&#xF3;tanos y cocheras. Make: celebra tu derecho de modificar, hackear y torcer cualquier tecnolog&#xED;a como quieras. La audiencia de Make: sigue siendo una cultura en expansi&#xF3;n y una comunidad que cree en mejorarnos a nosotros mismos, a nuestro medio ambiente, a nuestro sistema educacional - al mundo entero. Esto es mucho m&#xE1;s que una audiencia, es un movimiento mundial que Make: est&#xE1; liderando - lo llamamos el movimiento Maker.</p>

<p>Para m&#xE1;s informaci&#xF3;n sobre Make:, vis&#xED;tanos en l&#xED;nea:</p>

<ul class="simplelist">
	<li>Make: magazine: <a href="http://makezine.com/magazine/"><em class="hyperlink">http://makezine.com/magazine/</em></a></li>
	<li>Maker Faire: <a href="http://makerfaire.com"><em class="hyperlink">http://makerfaire.com</em></a></li>
	<li>Makezine.com: <a href="http://makezine.com"><em class="hyperlink">http://makezine.com</em></a></li>
	<li>Maker Shed: <a href="http://makershed.com/"><em class="hyperlink">http://makershed.com/</em></a></li>
</ul>
</section>

<section data-type="sect1" id="acknowledgments">
<h1>Agradecimientos</h1>

<p>Le agradecemos a Brian Jepson y a Anna Kaziunas France por su gran energ&#xED;a, apoyo y visi&#xF3;n.</p>

<p>No podemos imaginar este libro sin <em>Getting Started with Arduino</em> (Maker Media) de Massimo Banzi. El excelente libro de Massimo fue el prototipo.</p>

<p>Un peque&#xF1;o grupo de individuos ha, durante a&#xF1;os, contribuido tiempo y energ&#xED;a esenciales a Processing. Dan Shiffman es nuestro compa&#xF1;ero en la Fundaci&#xF3;n Processing, la organizaci&#xF3;n 501(c)(3) que apoya al software Processing. La mayor parte del c&#xF3;digo principal de Processing 2.0 y Processing 3.0 proviene de las mentes brillantes de Andres Colubri y Manindra Moharana. Scott Murray, Jamie Kosoy y Jon Gacnik han construido una maravillosa infraestructura web para el proyecto. James Grady est&#xE1; haciendo un genial trabajo en la interfaz de usuario 3.0. Le agradecemos a Florian Jenett por sus a&#xF1;os de trabajo en diversas &#xE1;reas, incluyendo foros, sitio web y dise&#xF1;o. Elie Zananiri y Andreas Schlegel han creado la infraestructura para construir y documentar las bibliotecas contribuidas y han pasado innumerables horas curando las listas. Muchos otros han contribuido significativamente al proyecto, los datos precisos est&#xE1;n disponibles en <a href="https://github.com/processing"><em class="hyperlink">https://github.com/processing</em></a>.</p>

<p> Este libro surgi&#xF3; de la ense&#xF1;anza con Processing en UCLA. Chandler McWilliams ha sido instrumental en definir estas clases. Casey le agradece a los estudiantes de pregrado en el Departamento de Design Media Arts en UCLA por su energ&#xED;a y entusiasmo. Sus ayudantes del curso han sido grandes colaboradores para definir c&#xF3;mo Processing es ense&#xF1;ado. Agradecimientos a Tatsuya Saito, John Houck, Tyler Adams, Aaron Siegel, Casey Alt, Andres Colubri, Michael Kontopoulos, David Elliot, Christo Allegra, Pete Hawkes y Lauren McCarthy.</p>

<p>p5.js es desarrollado por una gran comunidad de contribuyentes a lo largo del mundo. Dan Shiffman, Jason Sigal, Sam Lavigne, K.Adam White, Chandler McWilliams, Evelyn Eastmond,&#xA0;los miembros del grupo de trabajo de p5 en ITP, los asistentes a la primera p5.js Contributor&apos;s Conference en el Frank-Ratchye STUDIO for Creative Inquiry de Carnegie Mellon University, y los estudiantes y mentores del Processing Google Summer of Code han sido instrumentales para hacer que p5.js sea lo que es hoy. Apoyo significativo para el proyecto ha sido provisto por la Processing Foundation, NYU ITP, RISD y Bocoup. Puedes ver la lista de lista completa de contribuyentes en <a href="https://github.com/processing/p5.js#contributors"><em class="hyperlink">https://github.com/processing/p5.js#contributors</em></a>.&#xA0;Lauren tambi&#xE9;n le agradece a Kyle McDonald por su perpetuo apoyo e inspiraci&#xF3;n.</p>

<p>Este libro ha sido transformado por las art&#xED;sticas ilustraciones de Taeyoon Choi. Fueron desarrolladas en parte a trav&#xE9;s de una residencia en el Frank-Ratchye STUDIO for Creative Inquiry en Carnegie Mellon University, con apoyo del programa Art Works del National Endowment for the Arts. Charlotte Stiles ayud&#xF3; tremendamente con la edici&#xF3;n de los ejemplos e im&#xE1;genes de este libro.</p>

<figure id="acknowledge"><img src="assets/images/gspj_00in02.png"><figcaption></figcaption></figure>

<p>A trav&#xE9;s de la fundaci&#xF3;n del Aesthetics and Computation Group (1996&#x2013;2002) en el MIT Media Lab, John Maeda hizo todo esto posible.</p>

</section>
</section>

<section data-type="introduction" class="opener notoc" id="R7maHq7">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-01-intro"><img class="fse fs image" src="assets/images/gspj_01in01.png">
<figcaption>&#xA0;</figcaption>
</figure>
</section>

<section class="pagenumrestart" data-type="chapter" id="hello">
<h1 class="chapterhead">Hola</h1>

<p class="lede">p5.js sirve para&#xA0;<a contenteditable="false" data-primary="sketching with code overview" data-type="indexterm" id="swc1ov">&#xA0;</a>escribir software que produce im&#xE1;genes, animaciones e interacciones. La motivaci&#xF3;n es escribir una l&#xED;nea de c&#xF3;digo y que un c&#xED;rculo aparezca en la pantalla. A&#xF1;ade unas pocas l&#xED;neas de c&#xF3;digo, y ahora el c&#xED;rculo sigue al rat&#xF3;n. Otra l&#xED;nea de c&#xF3;digo, y el c&#xED;rculo cambia de color cuando presionas el rat&#xF3;n. A &#xA0;esto lo llamamos <em>bosquejar</em> con c&#xF3;digo. Escribes una l&#xED;nea, luego a&#xF1;ades otra, luego otra, y as&#xED;. El resultado es un programa creado parte por parte.</p>

<p>Los cursos de programaci&#xF3;n t&#xED;picamente se enfocan primero en estructura y teor&#xED;a. Cualquier aspecto visual - una interfaz, una animaci&#xF3;n - es considerado un postre que solo puede ser disfrutado despu&#xE9;s de que terminas de comer tus vegetales, el equivalente a varias semanas de estudiar algoritmos y m&#xE9;todos. A trav&#xE9;s de los a&#xF1;os, hemos visto a muchos amigos tratar de tomar estos cursos, para luego abandonarlos despu&#xE9;s de la primera sesi&#xF3;n o despu&#xE9;s de una muy larga y frustrante noche previa a la entrega de la primera tarea. Toda curiosidad inicial que ten&#xED;an sobre c&#xF3;mo hacer que el computador trabaje para ellos es perdida porque no pueden vislumbrar un camino claro entre lo que tienen que aprender al principio y lo que quieren crear.</p>

<p>p5.js ofrece una manera de programar a trav&#xE9;s de la creaci&#xF3;n de gr&#xE1;ficos interactivas. Existen muchas maneras posibles de ense&#xF1;ar c&#xF3;digo, pero los estudiantes usualmente encuentran apoyo y motivaci&#xF3;n al tener una retroalimentaci&#xF3;n visual inmediata. p5.js provee esta retroalimentaci&#xF3;n, y su &#xE9;nfasis en im&#xE1;genes, prototipado y comunidad es discutido en las siguientes p&#xE1;ginas.</p>

<section data-type="sect1" class="pagebreak-before" id="bosquejo-y-prototipado-231BUpA">
<h1>Bosquejo y prototipado</h1>

<p>Bosquejar &#xA0;es una forma de pensar; es juguet&#xF3;n y r&#xE1;pido. El objetivo b&#xE1;sico es explorar muchas ideas en un corto periodo de tiempo. En nuestro propio trabajo, usualmente empezamos bosquejando en papel y luego trasladamos nuestros resultados a c&#xF3;digo. Las ideas para animaci&#xF3;n e interacci&#xF3;n son usualmente bosquejadas como un gui&#xF3;n gr&#xE1;fico con anotaciones. Despu&#xE9;s de hacer algunos bosquejos en software, las mejores ideas son seleccionadas y combinadas en prototipos (<a data-type="xref" href="#Fig_01_01">Figura 1-1</a>). Es un proceso c&#xED;clico de hacer, probar y mejorar que va y viene entre papel y pantalla.</p>

<figure id="Fig_01_01"><img alt="Fig 01 01" src="assets/images/gspj_0101.png">
<figcaption><b>Figura 1-1. </b>A medida que los dibujos pasan de un cuaderno de bosquejos a la pantalla, van emergiendo nuevas posibilidades</figcaption>
</figure>
</section>

<section data-type="sect1" class="pagebreak-before" id="flexibilidad-1AM2U9W">
<h1>Flexibilidad</h1>

<p>Tal como un cintur&#xF3;n de herramientas para software, p5.js est&#xE1; compuesto de muchas herramientas que funcionan en conjunto y en diversas combinaciones. Como resultado, puede ser usado para exploraciones r&#xE1;pidas o para investigaci&#xF3;n en profundidad. Como un programa hecho con p5.js puede ser tan corto como unas pocas l&#xED;neas de c&#xF3;digo o tan largo como miles de l&#xED;neas, existe espacio para crecimiento y variaci&#xF3;n. Las bibliotecas de p5.js lo extienden a otros dominios incluyendo el trabajo con sonido y la inclusi&#xF3;n de botones, barras deslizadoras, ingreso de datos y captura de c&#xE1;mara con HTML.</p>
</section>

<section data-type="sect1" id="gigantes-Y8NOUQ3">
<h1>Gigantes</h1>

<p>Las personas han estado haciendo im&#xE1;genes con computadores desde los a&#xF1;os 1960s, y hay mucho que podemos aprender de esta historia. Por ejemplo, antes de que los computadores pudieran proyectar a pantallas CRT o LCD, se usaban grandes m&#xE1;quinas trazadoras (<a data-type="xref" href="#Fig_01_02">Figura 1-2</a>) para dibujar las im&#xE1;genes. En la vida, todos nos paramos sobre hombros de gigantes, y los titanes de p5.js incluyen pensadores del dise&#xF1;o, gr&#xE1;fica computacional, arte, arquitectura, estad&#xED;stica y otras disciplinas afines. Dale un vistazo a <em>Sketchpad</em> (1963) de Ivan Sutherland, <em>Dynabook</em> (1968) de Alan Kay y a otros artistas destacados en el libro de Ruth Leavitt <em>Artist and Computer</em><span data-type="footnote"><a href="http://www.atariarchives.org/artist/"><em class="hyperlink">http://www.atariarchives.org/artist/</em></a></span> (Harmony Books, 1976). Los archivos de ACM SIGGRAPH y de Ars Electronica brindan atisbos fascinantes en la historia de la gr&#xE1;fica y el software.</p>

<figure id="Fig_01_02"><img alt="Fig 01 02" src="assets/images/gspj_0102.png">
<figcaption><b>Figura 1-2. </b>Demostraci&#xF3;n de dibujo por Manfred Mohr en el Mus&#xE9;e d&apos;Art Moderne de la Ville de Paris usando la trazadora Benson y un computador digital, 11 de mayo 1971 (foto por Rainer M&#xFC;rle, cortes&#xED;a de bitforms gallery, New York)</figcaption>
</figure>
</section>

<section data-type="sect1" class="pagebreak-before" id="arbol-familiar-y32oUyA">
<h1>&#xC1;rbol familiar</h1>

<p>Como los lenguajes humanos, los lenguajes de programaci&#xF3;n pertenecen a familias de lenguajes relacionados. p5.js es un dialecto de un lenguaje de programaci&#xF3;n llamado <a contenteditable="false" data-primary="JavaScript" data-type="indexterm">&#xA0;</a>JavaScript.&#xA0;La sintaxis del lenguaje es casi id&#xE9;ntica, pero p5.js a&#xF1;ade caracter&#xED;sticas personalizadas relacionadas a gr&#xE1;ficas e interacci&#xF3;n (<a data-type="xref" href="#Fig_01_03">Figura 1-3</a>) y provee un acceso simple a caracter&#xED;sticas nativas de HTML5 que ya est&#xE1;n soportadas por los navegadores web. Por estas caracter&#xED;sticas compartidas, aprender p5.js es un primer paso &#xFA;til para aprender a programar en otros lenguajes y usar otras herramientas computacionales.</p>

<figure id="Fig_01_03"><img alt="Fig 01 03" src="assets/images/gspj_0103.png">
<figcaption><b>Figura 1-3. </b>p5.js posee una gran familia de lenguajes y ambientes de programaci&#xF3;n relacionados</figcaption>
</figure>
</section>

<section data-type="sect1" id="unete-KAjJUOA">
<h1>&#xDA;nete</h1>

<p>Miles de personas usan p5.js cada d&#xED;a. Al igual que ellos, t&#xFA; puedes descargar p5.js gratuitamente. Incluso tienes la opci&#xF3;n de modificar el c&#xF3;digo de p5.js para que se adapte a tus necesidades. p5.js es un proyecto FLOSS (free/libre/open source software, lo que significa software gratis libre y de c&#xF3;digo abierto), y siguiendo el esp&#xED;ritu de esta comunidad, te alentamos a participar y compartir tus proyectos y tu conocimiento &#xA0;<a contenteditable="false" data-primary="sketching with code overview" data-startref="swc1ov" data-type="indexterm">&#xA0;</a>en <em class="hyperlink"><a href="http://p5js.org">http://p5js.org</a></em> (<a data-type="xref" href="#Fig_01_04">Figura 1-4</a>).</p>

<figure id="Fig_01_04"><img alt="Fig 01 04" src="assets/images/gspj_0104.png">
<figcaption><b>Figura 1-4. </b>p5.js es promovido por una comunidad de personas que contribuyen a trav&#xE9;s de Internet</figcaption>
</figure>
</section>
</section>

<section data-type="introduction" class="opener notoc" id="mb4ZIjL">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-02-setup"><img src="assets/images/gspj_02in01.png">
<figcaption>&#xA0;</figcaption>
</figure>
</section>

<section data-type="chapter" id="starting_to_code">
<h1 class="chapterhead">Empezando a programar</h1>

<p class="lede">Para aprovechar <a contenteditable="false" data-primary="coding basics" data-type="indexterm" id="cb2">&#xA0;</a>al m&#xE1;ximo este libro, no basta con solamente leerlo. Necesitas experimentar y practicar. No puedes aprender a programar solamente leyendo - se aprende haciendo. Para empezar, descarga p5.js y escribe tu primer bosquejo.</p>

<section data-type="sect1" id="ambiente-4p5nCZG">
<h1>Ambiente</h1>

<p>Primero, necesitar&#xE1;s un <a contenteditable="false" data-primary="code editors" data-type="indexterm"></a>editor de c&#xF3;digo. Un editor de c&#xF3;digo es similar a un editor de texto (como Bloc de notas), excepto que posee una funcionalidad especial para editar c&#xF3;digo en vez de texto plano. Puedes usar cualquier editor que quieras; te recomendamos <a href="https://atom.io/">Atom</a> y <a href="http://brackets.io/">Brackets</a>, ambos descargables de forma gratuita.</p>

<!-- <p>Tambi&#xE9;n existe un editor oficial de p5.js en desarrollo. Si lo quieres usar, lo puedes descargar visitando <a href="http://p5js.org/download"><em class="hyperlink">http://p5js.org/download</em></a> y seleccionando el bot&#xF3;n que dice "Editor." Si est&#xE1;s usando el editor de p5.js, puedes saltar a la secci&#xF3;n <a data-type="xref" href="#your-first-program">Tu-primer-programa</a>.</p> -->

</section>

<section data-type="sect1" id="descarga-y-configuracion-de-archivos-xpL4C6p">
<h1>Descarga y configuracion de archivos</h1>

<p>Comienza visitando <a href="https://p5js.org/es/download/"><em class="hyperlink">https://p5js.org/es/download/</em></a> y selecciona &quot;p5.js completo&quot;. Haz doble click en el archivo <em>.zip</em> descargado, y arrastra el directorio a una ubicaci&#xF3;n en tu disco duro. Puede ser <em>Archivos de programa</em> o <em>Documentos</em> o simplemente el escritorio, lo importante es que el directorio <em>p5</em> sea extraido del archivo <em>.zip</em>.</p>

<p>El directorio <em>p5</em> contiene un proyecto de ejemplo con el que puedes empezar a trabajar. Abre tu editor de c&#xF3;digo. Luego abre el directorio llamado <em>empty-example</em> (ejemplo vacio) en tu editor de c&#xF3;digo. En la mayor&#xED;a de los editores de c&#xF3;digo, puedes hacer esto yendo al men&#xFA; Archivo, usando la opci&#xF3;n Abrir y luego seleccionado el directorio <em>empty-example</em>. &#xA1;Ahora est&#xE1;s listo para empezar tu primer programa!</p>
</section>

<section data-type="sect1" id="your-first-program">
<h1>Tu primer programa</h1>

<p>Cuando abras el directorio <em>empty-example</em>, lo m&#xE1;s probable es que veas una barra lateral con el nombre del directorio en la parte superior y una lista con los archivos contenidos en este directorio. Si haces click en alguno de estos archivos, ver&#xE1;s los contenidos del archivo aparecer en el &#xE1;rea principal.</p>

<p>Un bosquejo en p5.js est&#xE1; compuesto de varios lenguajes distintos usados en conjunto. <em>HTML</em> (HyperText Markup Language) brinda la columna vertebral, enlazando todos los otros elementos en la p&#xE1;gina. JavaScript (y la biblioteca p5.js) te permiten crear gr&#xE1;ficas interactivas que puedes mostrar en tu p&#xE1;gina HTML. A veces se usa CSS (Cascading Style Sheets) para definir elementos de estilo en la p&#xE1;gina HTML, pero no cubriremos este lenguaje en este libro.</p>

<p>Si revisas el archivo <em>index.html</em>, te dar&#xE1;s cuenta que contiene un poco de c&#xF3;digo HTML. Este archivo brinda la estructura a tu proyecto, enlazando la biblioteca p5.js y otro archivo llamado <em>sketch.js</em>, <a contenteditable="false" data-primary="sketch.js file" data-type="indexterm">&#xA0;</a>donde t&#xFA; escribir&#xE1;s tu propio programa. El c&#xF3;digo que crea estos enlaces tiene la siguiente apariencia:</p>

<pre data-code-language="html" data-type="programlisting">&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;../<br>p5.js&quot;&gt;&lt;/script&gt;
&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; <br>src=&quot;sketch.js&quot;&gt;&lt;/script&gt;</pre>

<p>No necesitas hacer nada en el c&#xF3;digo HTML por el momento &#x2014; ya est&#xE1; configurado para ti. A continuacion,haz  click en <em>sketch.js</em> y revisa el c&#xF3;digo:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  // put setup code here
}

function draw() {
  // put drawing code here
}</pre>

<p>El c&#xF3;digo plantilla contiene dos bloques, o funciones, <code>setup()</code> y <code>draw()</code>. <a contenteditable="false" data-primary="setup() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="draw() function" data-type="indexterm">&#xA0;</a>Puedes poner tu c&#xF3;digo en cualquiera de los dos lugares, y cada lugar tiene un prop&#xF3;sito espec&#xED;fico.</p>

<p>Cualquier c&#xF3;digo que est&#xE9; involucrado en la definici&#xF3;n del estado incial de tu programa corresponde al bloque <code>setup()</code>. Por ahora, lo dejaremos vac&#xED;o, pero m&#xE1;s adelante en el libro, a&#xF1;adir&#xE1;s c&#xF3;digo aqu&#xED; para especificar el tama&#xF1;o de tu lienzo para tus gr&#xE1;ficas, el grosor de tu trazado o la velocidad de tu programa.</p>

<p>Cualquier c&#xF3;digo involucrado en realmente dibujar contenido en la pantalla (definir el color de fondo, dibujar figuras, texto o im&#xE1;genes) ser&#xE1; puesto dentro del bloque <code>draw()</code>. Es aqu&#xED; donde empezar&#xE1;s a escribir tus primeras l&#xED;neas de c&#xF3;digo.</p>

<section data-type="sect2" id="ejemplo-2-1-dibuja-una-elipse-gG09CVa">
<h2>Ejemplo 2-1: dibuja una elipse</h2>

<p>Entre las llaves del bloque <code>draw()</code>,  borra el texto <span class="keep-together"><em><code>// put drawing code here</code></em></span> y reempl&#xE1;zalo con lo siguiente:</p>

<pre data-code-language="p5js" data-type="programlisting">background(204);
ellipse(50, 50, 80, 80);</pre>

<p>Tu programa completo deber&#xE1; verse as&#xED;:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  // put setup code here
}

function draw() {
  background(204);
  ellipse(50, 50, 80, 80);
}</pre>

<p>Esta nueva l&#xED;nea de c&#xF3;digo significa &quot;dibuja una elipse, con su centro 50 pixeles a la derecha desde el extremo izquierdo y 50 pixeles hacia abajo desde el extremo superior, con una altura y un ancho de 80 pixeles&quot;. Graba el c&#xF3;digo presionando Command-S, o escogiendo la opci&#xF3;n Archivo&#x2192;Grabar del men&#xFA;.</p>

<p>Para ver el c&#xF3;digo en ejecuci&#xF3;n, puedes abrir el archivo <em>index.html</em> en cualquier navegador web (como Chrome, Firefox o Safari). Navega al directorio <em>empty-example</em> en tu explorador de archivos y haz doble click en <em>index.html</em> para abrirlo. Otra alternativa es hacerlo desde el navegador web, escoger Archivo&#x2192;Abrir y seleccionar el archivo <em>index.html</em>.</p>

<p>Si has escrito todo correctamente, deber&#xED;as ver un c&#xED;rculo en tu navegador. Si no lo ves, aseg&#xFA;rate de haber copiado correctamente el c&#xF3;digo de ejemplo. Los n&#xFA;meros tienen que estar entre par&#xE9;ntesis y tener comas entre ellos. La l&#xED;nea debe terminar con un punto y coma.
</p>

<!--Page Break--><br class="pagebreak-after">

<p>Una de las cosas m&#xE1;s dif&#xED;ciles al empezar a programar es que tienes que ser muy espec&#xED;fico con la sintaxis. El software p5.js no es siempre suficientemente inteligente como para entender lo que quieres decir, y puede ser muy exigente con la puntuaci&#xF3;n. Te acostumbrar&#xE1;s a esto con un poco de pr&#xE1;ctica.</p>

<p>A continuaci&#xF3;n, avanzaremos para hacer m&#xE1;s emocionante nuestro bosquejo.</p>
</section>

<section data-type="sect2" id="ejemplo-2-2-hacer-circulos-VGO0Cxa">
<h2>Ejemplo 2-2: hacer c&#xED;rculos</h2>

<p>Borra <a contenteditable="false" data-primary="circles" data-secondary="drawing" data-type="indexterm" id="c2d"></a>el texto del ejemplo anterior, y prueba este. Graba tu c&#xF3;digo, y refresca (Command-R) <em>index.html</em> en tu navegador para verlo actualizado.</p>

<figure><img alt="Ex 02 02" src="assets/images/gspj_02in03.png">
 <figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  if (mouseIsPressed) {
    fill(0);
  } else {
    fill(255);
  }
  ellipse(mouseX, mouseY, 80, 80);
}</pre>

<p class="pagebreak-before">Este programa crea un lienzo para gr&#xE1;ficas que tiene un ancho de 480 pixeles y una altura de 120 pixeles, y luego empieza a dibujar c&#xED;rculos blancos en la posici&#xF3;n del rat&#xF3;n. Cuando presionas un bot&#xF3;n del rat&#xF3;n, el color del c&#xED;rculo cambia a negro. Explicaremos despu&#xE9;s y en detalle m&#xE1;s de los elementos de este programa. Por ahora, ejecuta el c&#xF3;digo, mueve el rat&#xF3;n y haz click para&#xA0;<a contenteditable="false" data-primary="circles" data-secondary="drawing" data-startref="c2d" data-type="indexterm">&#xA0;</a>  experimentarlo.</p>
</section>
</section>

<section data-type="sect1" id="la-consola-5a3OCZa">
<h1>La consola</h1>

<p>El <a contenteditable="false" data-primary="console" data-type="indexterm" id="cons2">&#xA0;</a>navegador tiene incluido una <em>consola</em> que puede ser muy &#xFA;til para <a contenteditable="false" data-primary="debugging" data-type="indexterm">&#xA0;</a>corregir errores en los programas. Cada navegador tiene una manera distinta de abrir la consola. Aqu&#xED; est&#xE1;n las instrucciones sobre c&#xF3;mo hacerlo en los navegadores m&#xE1;s t&#xED;picos:</p>

<ul>
	<li>Para abrir la consola en Chrome, selecciona en el men&#xFA; superior Ver &#x2192; Opciones para desarrolladores &#x2192; Consola de JavaScript.</li>
	<li>En Firefox, en el men&#xFA; superior selecciona Herramientas &#x2192; Desarrollado Web &#x2192; Consola Web.</li>
	<li>Si usas Safari, necesitar&#xE1;s habilitar la funcionalidad antes de que puedas usarla. Desde el men&#xFA; superior, selecciona Preferencias, luego haz click en la pesta&#xF1;a Avanzado y activa la casilla con el texto &quot;Mostrar el men&#xFA; Desarrollo en la barra de men&#xFA;s.&quot; Tras hacer esto, podr&#xE1;s seleccionar Desarrollo &#x2192; Mostrar consola de JavaScript.</li>
	<!-- <li>En Internet Explorer, abre F12 Developer Tools, luego selecciona la Console tool.</li> -->
</ul>

<p>Ahora deber&#xED;as ver un recuadro en la parte inferior o lateral de tu pantalla (<a data-type="xref" href="#Fig_02_01">Figura 2-1</a>). Si hay un error de tipeo u otro <a contenteditable="false" data-primary="error messages, in console" data-type="indexterm" id="em2ic"></a>error en tu programa, aparecer&#xE1; texto rojo explicando qu&#xE9; error es. Este texto puede a veces ser cr&#xED;ptico, pero si revisas al lado derecho de la l&#xED;nea, estar&#xE1; el nombre del archivo y el n&#xFA;mero de la l&#xED;nea de c&#xF3;digo donde fue detectado el error. Ese es un lugar adecuado donde empezar a buscar errores en tu programa.</p>

<!--
<div data-nickname="akaziuna" data-type="comment">
<div class="comment-identifier"><img src="https://secure.gravatar.com/avatar/e0080a854a5c1d5b8feb7567ee1b2eb2" />
<div spellcheck="false">akaziuna</div>
<i class="delete_comment glyphicons remove_2">&nbsp;</i></div>

<p>Note to Production: whitespace around the SVG image is too large.&nbsp;</p>
</div>
-->

<!--Page Break--><br class="pagebreak-after">

<figure id="Fig_02_01"><img alt="Fig 02 01" src="assets/images/gspj_0201.png">
<figcaption><b>Figura 2-1. </b>Vista de ejemplo de un error en la consola (la apariencia y disposicion var&#xED;a segun el navegador usado)</figcaption>
</figure>
</section>

<section data-type="sect1" id="crear-un-nuevo-proyecto-12WzC3a">
<h1>Crear un nuevo proyecto</h1>

<p>Has<a contenteditable="false" data-primary="error messages, in console" data-startref="em2ic" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="console" data-startref="cons2" data-type="indexterm">&#xA0;</a>creado un bosquejo a partir de un ejemplo vac&#xED;o, &#xBF;pero c&#xF3;mo creas un nuevo proyecto?&#xA0;<a contenteditable="false" data-primary="new project" data-type="indexterm" id="np2">&#xA0;</a>La manera m&#xE1;s f&#xE1;cil de hacerlo es ubicando el directorio <em>empty-example</em> en tu explorador de archivos,&#xA0;luego copiar y pegarlo para crear un segundo <em>empty-example</em>. Puedes renombrar el directorio como quieras &#x2014; por ejemplo, <em>Proyecto-2</em>.</p>

<p>Ahora puedes abrir este directorio en tu editor de c&#xF3;digo y empezar a hacer un nuevo bosquejo. Cuando quieras verlo en el navegador, abre el archivo <em>index.html </em>ubicado en tu nuevo directorio <em>Proyecto-2</em>.</p>

<p>Siempre es una buena idea grabar frecuentemente tus bosquejos. Mientras vas probando cosas nuevas, graba tu bosquejo con diferentes nombres, (Archivo&#x2192;Guardar como), para que as&#xED; siempre puedas volver a versiones anteriores.  Esto es especialmente &#xFA;til si algo&#xA0;<a contenteditable="false" data-primary="new project" data-startref="np2" data-type="indexterm">&#xA0;</a>falla.</p>

<div data-type="note" id="OGgPUZa">
<p>Un error com&#xFA;n es estar editando un proyecto pero estar viendo otro en el navegador, haciendo que no puedas ver los cambios que has realizado. Si te das cuenta que tu programa se ve igual a pesar de haber hecho cambios a tu c&#xF3;digo, revisa que est&#xE1;s viendo el archivo <em>index.html</em> correcto.</p>
</div>
</section>

<section data-type="sect1" id="ejemplos-y-referencia-OGglCAa">
<h1>Ejemplos y referencia</h1>

<p>Aprender <a contenteditable="false" data-primary="Reference page" data-type="indexterm"></a><a contenteditable="false" data-primary="Examples page" data-type="indexterm"></a>a programar con p5.js involucra explorar mucho c&#xF3;digo: ejecutarlo, alterarlo, romperlo y mejorarlo hasta que lo hayas reconfigurado en algo novedoso.  Con esto en mente, el sitio web de p5.js tiene docenas de ejemplos que demuestran diferentes caracter&#xED;sticas de la biblioteca. Visita la <a href="http://p5js.org/es/examples">p&#xE1;gina de Ejemplos</a> para verlos. Puedes jugar con ellos editanto el c&#xF3;digo en la p&#xE1;gina y luego haciendo click en &quot;Ejecutar.&quot; Los ejemplos est&#xE1;n agrupados en distintas categor&#xED;as seg&#xFA;n su funci&#xF3;n, como forma, color, e imagen. Encuentra un tema que te interese en la lista y prueba un ejemplo.</p>

<p>Si ves una parte del programa con la que no est&#xE1;s familiarizado o sobre la que quieres aprender su funcionalidad, visita la <a href="http://p5js.org/es/reference/"><em>Referencia de p5.js</em></a>.</p>

<p>La <em>Referencia de p5.js</em> explica cada elemento de c&#xF3;digo con una descripci&#xF3;n y ejemplos. Los programas de la <em>Referencia</em> son mucho m&#xE1;s cortos (usualmente cuatro o cinco l&#xED;neas) y m&#xE1;s f&#xE1;ciles de seguir que los ejemplos de la p&#xE1;gina Aprende. Ten en cuenta que estos ejemplos usualmente omiten <code>setup()</code> y <code>draw()</code> por simplicidad, pero estas l&#xED;neas de c&#xF3;digo que ves deber&#xE1;n ser puestas dentro de uno de estos bloques para poder ser ejecutadas. Recomendamos mantener la p&#xE1;gina de <em>Referencia</em> abierta mientras est&#xE9;s leyendo este libro y mientras est&#xE9;s programando. Puede ser navegada por tema o usando la barra de b&#xFA;squeda en la parte superior de la p&#xE1;gina.</p>

<p>La <em>Referencia</em> fue escrita pensando en el principiante; esperamos que sea clara y facil de entender. Estamos muy agradecidos de las personas que han encontrado errores y los han se&#xF1;alado. Si crees que puedes mejorar una entrada en la referencia o que has encontrado alg&#xFA;n error, por favor haznos saber esto haciendo click en el enlace en la parte inferior de cada <a contenteditable="false" data-primary="coding basics" data-startref="cb2" data-type="indexterm">&#xA0;</a>p&#xE1;gina de referencia.</p>
</section>
</section>

<section data-type="introduction" class="opener notoc" id="R91ntg5">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->

<figure id="TChoi-03-createCanvas"><img src="assets/images/gspj_03in01.png"><figcaption></figcaption></figure>
</section>

<section data-type="chapter" id="draw">
<h1 class="chapterhead">Dibujar</h1>

<p class="lede">Al principio, <a contenteditable="false" data-primary="drawing" data-type="indexterm" id="d3">&#xA0;</a>dibujar en una pantalla de computador es como trabajar en papel cuadriculado. Parte como un procedimiento t&#xE9;cnico cuidadoso, pero a medida que se introducen nuevos conceptos, el dibujo de formas simples con software se transforma en un trabajo de animaci&#xF3;n e interacci&#xF3;n. Antes de que hagamos este salto, tenemos que empezar por el principio.</p>

<p>Una pantalla de computador es una matriz de elementos de luz llamados <a contenteditable="false" data-primary="pixels" data-type="indexterm">&#xA0;</a><em>pixeles</em>. Cada pixel tiene una posici&#xF3;n dentro de la matriz definida por sus coordenadas. Cuando creas un bosquejo en p5.js, lo puedes visualizar con un navegador. Dentro de la ventana del navegador, p5.js crea un<a contenteditable="false" data-primary="drawing" data-secondary="canvas" data-type="indexterm" id="d3cx">&#xA0;</a><a contenteditable="false" data-primary="canvas" data-type="indexterm" id="c3">&#xA0;</a><em>lienzo para dibujar</em>, un &#xE1;rea en la que se dibujan las gr&#xE1;ficas. El lienzo puede ser del mismo tama&#xF1;o que la ventana, o puede tener dimensiones distintas. El lienzo est&#xE1; usualmente ubicado en la esquina superior izquierda de tu ventana, pero lo puedes posicionar en otros lugares.</p>

<p>Cuando dibujas en el lienzo, la coordenada <em>x</em> es la distancia desde el borde izquierdo del lienzo y la coordenada <em>y</em> es la distancia desde el borde superior. Escribimos las coordenadas de un pixel as&#xED;: <a contenteditable="false" data-primary="x and y coordinates" data-type="indexterm">&#xA0;</a>(x, y). As&#xED; que, si el lienzo es de 200&#xD7;200 pixeles, la esquina superior izquierda es (0, 0), el centro est&#xE1; en (100, 100) y la esquina inferior derecha es (199, 199). Estos n&#xFA;meros pueden ser confusos; &#xBF;por qu&#xE9; contamos de 0 a 199 en vez de 1 a 200? La respuesta es que en programaci&#xF3;n, usualmente contamos partiendo en 0 porque as&#xED; es m&#xE1;s f&#xE1;cil hacer c&#xE1;lculos que veremos m&#xE1;s adelante.</p>

<section class="pagebreak-before" data-type="sect1" id="el-lienzo-6E9WfL2">
<h1>El lienzo</h1>

<p>El lienzo es creado y las im&#xE1;genes son dibujadas dentro de &#xE9;l a trav&#xE9;s de elementos de c&#xF3;digo llamados <em>funciones</em>.<a contenteditable="false" data-primary="functions" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="parameters" data-type="indexterm">&#xA0;</a>Las funciones son el bloque fundamental de un programa en p5.js. El comportamiento de una funci&#xF3;n est&#xE1; definido por sus <em> par&#xE1;metros</em>. Por ejemplo, casi todos los programas en p5.js tienen una funci&#xF3;n <code>createCanvas()</code> <a contenteditable="false" data-primary="createCanvas() function" data-type="indexterm">&#xA0;</a>que crea un lienzo para dibujar con un ancho y una altura espec&#xED;ficos. Si tu programa no tiene una funci&#xF3;n <code>createCanvas()</code>, el lienzo creado por defecto es de 100&#xD7;100 pixeles.</p>

<section data-type="sect2" id="example-3-1-crea-un-lienzo-RE8WfOZ">
<h2>Example 3-1: crea un lienzo</h2>

<p>La funci&#xF3;n <code>createCanvas()</code> tiene dos par&#xE1;metros;&#xA0;el primero define el ancho del lienzo para dibujar, el segundo define la altura. Para dibujar un lienzo que sea de 800 pixeles de ancho y 600 pixeles de altura, escribe:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(800, 600);
}</pre>

<p>Ejecuta este c&#xF3;digo para observar el resultado. Prueba con valores distintos para explorar las posibilidades. Prueba con n&#xFA;meros muy peque&#xF1;os y con n&#xFA;meros m&#xE1;s grandes que las dimensiones de tu pantalla.</p>
</section>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-3-2-dibuja-un-punto-G2AGfOE">
<h2>Ejemplo 3-2: dibuja un punto</h2>

<p>Para definir<a contenteditable="false" data-primary="drawing" data-secondary="points" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="point() function" data-type="indexterm">&#xA0;</a>el color de un solo pixel dentro del lienzo, usamos la funci&#xF3;n <code>point()</code>. Posee dos par&#xE1;metros que definen la posici&#xF3;n: la coordenada <em>x</em> seguida de la coordenada <em>y</em>. Para crear un peque&#xF1;o lienzo y un punto en el centro de &#xE9;l, la coordenada (240, 60), escribe:</p>

<figure><img alt="Ex 03 02" src="assets/images/gspj_03in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  point(240, 60);
}</pre>

<p>Trata de escribir un programa que pone un punto en cada esquina del lienzo para dibujar y uno en el centro. Luego trata de poner puntos consecutivos de manera vertical, horizontal y en diagonales, para formar<a contenteditable="false" data-primary="canvas" data-startref="c3" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="canvas" data-startref="d3cx" data-type="indexterm">&#xA0;</a>l&#xED;neas.</p>
</section>
</section>

<section data-type="sect1" id="figuras-basicas-oE6yfwZ">
<h1>Figuras b&#xE1;sicas</h1>

<p>p5.js incluye un grupo de funciones para dibujar figuras b&#xE1;sicas (ver <a data-type="xref" href="#Fig_03_01">Figura 3-1</a>). Figuras simples<a contenteditable="false" data-primary="shapes" data-secondary="drawing basic" data-type="indexterm" id="s3db">&#xA0;</a><a contenteditable="false" data-primary="basic shapes" data-type="indexterm" id="bs3">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="lines" data-type="indexterm" id="d3lines">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="shapes" data-tertiary="basic" data-type="indexterm" id="d3sb">&#xA0;</a>como l&#xED;neas pueden ser combinadas para crear figuras m&#xE1;s complicadas como una hoja o una cara.</p>

<p>Para dibujar una sola&#xA0;<a contenteditable="false" data-primary="lines" data-secondary="drawing" data-type="indexterm" id="ld3">&#xA0;</a>l&#xED;nea, necesitamos cuatro par&#xE1;metros: dos para el punto inicial y dos para el final.</p>

<figure id="Fig_03_01"><img alt="Fig 03 01" src="assets/images/gspj_0301.png">
<figcaption><b>Figura 3-1. </b>Figuras y sus coordenadas</figcaption>
</figure>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-3-3-dibuja-una-linea-yEY7fj2">
<h2>Ejemplo 3-3: dibuja una l&#xED;nea</h2>

<p>Para dibujar una l&#xED;nea entre la coordenada (20, 50) y (420, 110), prueba:</p>

<figure><img alt="Ex 03 03" src="assets/images/gspj_03in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  line(20, 50, 420, 110);
}</pre>
<a contenteditable="false" data-primary="lines" data-secondary="drawing" data-startref="ld3" data-type="indexterm">&#xA0;</a>&#xA0;<a contenteditable="false" data-primary="drawing" data-secondary="lines" data-startref="d3lines" data-type="indexterm">&#xA0;</a></section>

<section data-type="sect2" id="ejemplo-3-4-dibuja-figuras-basicas-j1yrfd2">
<h2>Ejemplo 3-4: dibuja figuras b&#xE1;sicas</h2>

<p>Siguiendo este patr&#xF3;n, un tri&#xE1;ngulo necesita seis par&#xE1;metros y un cuadril&#xE1;tero necesita ocho (un par para cada punto):</p>

<figure><img alt="Ex 03 04" src="assets/images/gspj_03in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  quad(158, 55, 199, 14, 392, 66, 351, 107);
  triangle(347, 54, 392, 9, 392, 66);
  triangle(158, 55, 290, 91, 290, 112);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-3-5dibuja-un-rectangulo-v2mmf02">
<h2>Ejemplo 3-5:dibuja un rect&#xE1;ngulo</h2>

<p>Tanto los <em>rect&#xE1;ngulos</em> <a contenteditable="false" data-primary="rectangles" data-secondary="drawing" data-type="indexterm">&#xA0;</a>como las <em>elipses</em><a contenteditable="false" data-primary="drawing" data-secondary="rectangles" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="rectangles" data-type="indexterm">&#xA0;</a>son definidos por cuatro par&#xE1;metros: el primero y el segundo son las coordenadas <em>x</em> e <em>y</em> del punto ancla, el tercero es el ancho y el cuarto es la altura. Para dibujar un rect&#xE1;ngulo en la coordenada (180, 60) con un ancho de 220 pixeles y una altura de 40 pixeles, usa la funci&#xF3;n <code>rect()</code> <a contenteditable="false" data-primary="rect() function" data-type="indexterm">&#xA0;</a>as&#xED;:</p>

<figure><img alt="Ex 03 05" src="assets/images/gspj_03in05.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  rect(180, 60, 220, 40);
}
</pre>
&#xA0;<a contenteditable="false" data-primary="drawing" data-secondary="rectangles" data-startref="d3r" data-type="indexterm">&#xA0;</a></section>

<section data-type="sect2" id="ejemplo-3-6-dibuja-una-elipse-R1WgfA1">
<h2>Ejemplo 3-6: dibuja una elipse</h2>

<p>Las coordenadas <em>x</em> e <em>y</em><a contenteditable="false" data-primary="drawing" data-secondary="ellipses" data-type="indexterm" id="d3ell">&#xA0;</a><a contenteditable="false" data-primary="ellipses" data-type="indexterm" id="ell3">&#xA0;</a> de un rect&#xE1;ngulo corresponden a la esquina superior izquierda, pero para una elipse son el centro de la figura. En este ejemplo, observa que la coordenada <em>y</em> de la primera elipse est&#xE1; fuera del lienzo. Los objetos pueden ser dibujados parcialmente (o enteramente) fuera del lienzo sin arrojar errores:</p>

<figure><img alt="Ex 03 06" src="assets/images/gspj_03in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  ellipse(278, -100, 400, 400);
  ellipse(120, 100, 110, 110);
  ellipse(412, 60, 18, 18);
}
</pre>

<p>p5.js no posee funciones separadas para dibujar cuadrados y c&#xED;rculos. Para hacer estas figuras, usa el mismo valor para los par&#xE1;metros de <em>ancho</em> y <em>altura</em> en las funciones&#xA0;<code>ellipse()</code> y <code>rect()</code>.</p>
</section>

<section data-type="sect2" id="ex-3-7">
<h2>Ejemplo 3-7: dibuja una parte de una elipse</h2>

<p>La funci&#xF3;n <code>arc()</code> <a contenteditable="false" data-primary="arc() function" data-type="indexterm"></a>dibuja una parte de una elipse:</p>

<figure><img alt="Ex 03 07" src="assets/images/gspj_03in07.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting" class="pagebreak-before">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  arc(90, 60, 80, 80, 0, HALF_PI);
  arc(190, 60, 80, 80, 0, PI+HALF_PI);
  arc(290, 60, 80, 80, PI, TWO_PI+HALF_PI);
  arc(390, 60, 80, 80, QUARTER_PI, PI+QUARTER_PI);
}</pre>

<p>El primer y el segundo par&#xE1;metro definen la ubicaci&#xF3;n, mientras que el tercero y el cuarto definen el ancho y la altura. El quinto par&#xE1;metro define el &#xE1;ngulo inicial del arco y el sexto el &#xE1;ngulo final. Los &#xE1;ngulos est&#xE1;n definidos en radianes, en vez de grados. Los <em>radianes</em> son medidas de &#xE1;ngulo basadas en el valor de pi (3.14159). La <a data-type="xref" href="#Fig_03_02">Figura 3-2</a> muestra c&#xF3;mo ambos est&#xE1;n relacionados. Como se ve en este ejemplo, cuatro valores de radianes son usados tan frecuentemente que fueron agregados con nombres especiales como parte de p5.js. Los valores <code>PI</code>, <code>QUARTER_PI</code>, <code>HALF_PI</code> y <code>TWO_PI</code> (por PI, un cuarto de PI, un medio de PI, y dos PI) pueden ser usados para reemplazar los valores en radianes de 180&#xB0;, 45&#xB0;, 90&#xB0;, y 360&#xB0;.</p>

<figure id="Fig_03_02"><img alt="Fig 03 02" src="assets/images/gspj_0302.png">
<figcaption><b>Figura 3-2. </b>Radianes y grados son dos formas distintas de medir un &#xE1;ngulo. Los grados en una circunferencia van entre 0 y 360, mientas que los radianes est&#xE1;n relacionados con pi, y van desde 0 a aproximadamente 6.28.</figcaption>
</figure>
</section>

<section data-type="sect2" id="ex-3-8">
<h2>Ejemplo 3-8: dibuja con grados</h2>

<p>Si<a contenteditable="false" data-primary="drawing" data-secondary="ellipses" data-startref="d3ell" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="ellipses" data-startref="d3ell" data-type="indexterm">&#xA0;</a>prefieres usar<a contenteditable="false" data-primary="degree measurements" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="radians() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="with degrees" data-secondary-sortas="degrees" data-type="indexterm">&#xA0;</a>medidas en grados, puedes convertir a radianes con la funci&#xF3;n <code>radians()</code>. Esta funci&#xF3;n toma un &#xE1;ngulo en grados y lo convierte al valor en radianes correspondiente. El siguiente ejemplo es el mismo que <a data-type="xref" href="#ex-3-7">Ejemplo 3-7</a>, pero usa la funci&#xF3;n <code>radians()</code> para definir los valores en grados de inicio y final:</p>

<pre class="pagebreak-before" data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  arc(90, 60, 80, 80, 0, radians(90));
  arc(190, 60, 80, 80, 0, radians(270));
  arc(290, 60, 80, 80, radians(180), radians(450));
  arc(390, 60, 80, 80, radians(45), radians(225));
}</pre>
</section>

<section data-type="sect2" id="ejemplo-3-9-usa-anglemode-RZ46fV1">
<h2>Ejemplo 3-9: usa angleMode()</h2>

<p>De forma alternativa,<a contenteditable="false" data-primary="angleMode() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="angleMode" data-type="indexterm">&#xA0;</a>puedes convertir tu bosquejo completo para que use grados en vez de radianes usando la funci&#xF3;n <code>angleMode()</code>. Esto hace que todas las funciones que aceptan o retornan &#xE1;ngulos usen grados o radianes seg&#xFA;n en el par&#xE1;metro de la funci&#xF3;n, en vez de que t&#xFA; tengas que convertirlos. El siguiente ejemplo es el mismo que <a data-type="xref" href="#ex-3-8">Ejemplo 3-8</a>, pero usa la funci&#xF3;n <code>angleMode(DEGREES)</code> para definir los valores en grados de inicio y final (DEGREES significa grados):</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  angleMode(DEGREES);
}

function draw() {
  background(204);
  arc(90, 60, 80, 80, 0, 90);
  arc(190, 60, 80, 80, 0, 270);
  arc(290, 60, 80, 80, 180, 450);
  arc(390, 60, 80, 80, 45, 225);
}</pre>
&#xA0;<a contenteditable="false" data-primary="basic shapes" data-startref="bs3" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="shapes" data-startref="d3sb" data-tertiary="basic" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="shapes" data-secondary="drawing basic" data-startref="s3db" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="orden-de-dibujo-mZOlflE">
<h1>Orden de dibujo</h1>

<p>Cuando un programa <a contenteditable="false" data-primary="drawing" data-secondary="drawing order" data-type="indexterm" id="d3sdo">&#xA0;</a>se ejecuta, el computador empieza por el principio y lee cada l&#xED;nea de c&#xF3;digo hasta que llega a la &#xFA;ltima l&#xED;nea y luego se detiene.</p>

<div data-type="note" id="OEVYt5Z">Existen unas pocas excepciones a esto, como cuando cargas archivos externos, las que revisaremos m&#xE1;s adelante. Por ahora, puedes asumir que cada l&#xED;nea se ejecuta en orden cuando dibujas.</div>

<p>Si quieres que una figura sea dibujada encima de todas las otras figuras, necesita estar despu&#xE9;s de las otras en el c&#xF3;digo.</p>

<section data-type="sect2" id="ejemplo-3-10-controla-el-orden-de-dibujo-OEVPfr2">
<h2>Ejemplo 3-10: controla el orden de dibujo</h2>

<figure><img alt="Ex 03 10" src="assets/images/gspj_03in08.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  ellipse(140, 0, 190, 190);
  // El rect&#xE1;ngulo es dibujado sobre la elipse
  // porque est&#xE1; despu&#xE9;s en el c&#xF3;digo
  rect(160, 30, 260, 20);
}</pre>
</section>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-3-11-en-reversa-bEq5f9E">
<h2>Ejemplo 3-11: en reversa</h2>

<p>Modifica el bosquejo invirtiendo el orden de <code>rect()</code> y <code>ellipse()</code> para ver el c&#xED;rculo encima del rect&#xE1;ngulo:</p>

<figure><img alt="Ex 03 11" src="assets/images/gspj_03in09.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  rect(160, 30, 260, 20);
  // La elipse es dibujada sobre el rect&#xE1;ngulo
  // porque est&#xE1; despu&#xE9;s en el c&#xF3;digo
  ellipse(140, 0, 190, 190);
}</pre>

<p>Puedes pensar esto como pintar con brocha o hacer un collage. El &#xFA;ltimo elemento que a&#xF1;ades es el que est&#xE1; visible encima del resto.</p>
<a contenteditable="false" data-primary="drawing" data-secondary="drawing order" data-startref="d3sdo" data-type="indexterm"></a></section>
</section>

<section data-type="sect1" id="propiedades-de-las-figuras-dExVf82">
<h1>Propiedades de las figuras</h1>

<p>Puedes<a contenteditable="false" data-primary="shapes" data-secondary="properties" data-tertiary="stroke weight" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="shapes" data-tertiary="properties" data-type="indexterm" id="d3ssp">&#xA0;</a>querer tener m&#xE1;s control sobre las figuras que dibujas, m&#xE1;s all&#xE1; de su posici&#xF3;n y su tama&#xF1;o. Para lograr esto, existe un conjunto de funciones que definen las propiedades de las figuras.</p>

<section data-type="sect2" id="ex-3-12">
<h2>Ejemplo 3-12: define el grosor del trazo</h2>

<p>El valor por defecto del grosor del trazo es de un pixel, pero esto puede ser cambiado con la funci&#xF3;n <code>strokeWeight()</code>. El &#xFA;nico par&#xE1;metro<a contenteditable="false" data-primary="strokeWeight() function" data-type="indexterm" id="swf3">&#xA0;</a> de <code>strokeWeight()</code> define el grosor de las l&#xED;neas dibujadas:</p>

<figure><img alt="Ex 03 12" src="assets/images/gspj_03in10.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  ellipse(75, 60, 90, 90);
  strokeWeight(8);  // Grosor del trazo es 8 pixeles
  ellipse(175, 60, 90, 90);
  ellipse(279, 60, 90, 90);
  strokeWeight(20);  // Grosor del trazo es 20 pixeles
  ellipse(389, 60, 90, 90);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-3-13-define-los-atributos-del-trazo-a2Mxf01">
<h2>Ejemplo 3-13: define los atributos del trazo</h2>

<p>La funci&#xF3;n <code>strokeJoin()</code><a contenteditable="false" data-primary="shapes" data-secondary="properties" data-tertiary="stroke attributes" data-type="indexterm" id="s3psa"></a><a contenteditable="false" data-primary="strokeJoin() function" data-type="indexterm" id="sjf3"></a> modifica la forma en que las l&#xED;neas se unen (y c&#xF3;mo se ven las esquinas), y la funci&#xF3;n <code>strokeCap()</code><a contenteditable="false" data-primary="strokeCap() function" data-type="indexterm">&#xA0;</a>cambia c&#xF3;mo las l&#xED;neas son dibujadas en su inicio y final:</p>

<figure><img alt="Ex 03 13" src="assets/images/gspj_03in11.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  strokeWeight(12);
}

function draw() {
  background(204);
  strokeJoin(ROUND);      // Redondea las esquinas del trazo
  rect(40, 25, 70, 70);
  strokeJoin(BEVEL);      // Bisela las esquinas del trazo
  rect(140, 25, 70, 70);
  strokeCap(SQUARE);      // Cuadra los extremos de las l&#xED;neas
  line(270, 25, 340, 95);
  strokeCap(ROUND);       // Redondea los extremos de las l&#xED;neas
  line(350, 25, 420, 95);
}</pre>

<p>La posici&#xF3;n de figuras como <code>rect()</code> y <code>ellipse()</code>&#xA0;es controlada por las funciones <code>rectMode()</code> y <code>ellipseMode()</code><a contenteditable="false" data-primary="rectMode() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="ellipseMode() function" data-type="indexterm">&#xA0;</a>. Revisa la <em>Referencia de p5.js</em> para ver ejemplos de c&#xF3;mo posicionar rect&#xE1;ngulos seg&#xFA;n su centro (en vez de su esquina superior izquierda), o de c&#xF3;mo dibujar elipses desde su esquina superior izquierda como los rect&#xE1;ngulos.</p>

<p>Cuando se define cualquiera de estos atributos, todas las figuras dibujadas posteriormente son afectadas. Por ejemplo, en <a data-type="xref" href="#ex-3-12">Ejemplo 3-12</a>, observa c&#xF3;mo el segundo y tercer c&#xED;rculo tienen el mismo grosor de trazo, a pesar de que el grosor es definido solo una vez antes de que ambos sean dibujados.</p>

<p>Observa que la l&#xED;nea de c&#xF3;digo<a contenteditable="false" data-primary="strokeWeight() function" data-startref="swf3" data-type="indexterm">&#xA0;</a> <code>strokeWeight(12)</code> aparece dentro de <code>setup()</code> en vez de <code>draw()</code>. Esto ocurre porque no cambia durante la duraci&#xF3;n de nuestro programa, as&#xED; que basta con definirlo una &#xFA;nica una vez en <code>setup()</code>. Esto es mayormente por organizaci&#xF3;n; poner la l&#xED;nea en <code>draw()</code> tendr&#xED;a <a contenteditable="false" data-primary="strokeJoin() function" data-startref="sjf3" data-type="indexterm">&#xA0;</a>el mismo<a contenteditable="false" data-primary="shapes" data-secondary="properties" data-startref="s3p" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="shapes" data-startref="d3ssp" data-tertiary="properties" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="shapes" data-secondary="properties" data-startref="s3psa" data-tertiary="stroke attributes" data-type="indexterm">&#xA0;</a>efecto visual.</p>
</section>
</section>

<section data-type="sect1" id="color-B2PDf62">
<h1>Color</h1>

<p>Todas<a contenteditable="false" data-primary="drawing" data-secondary="color" data-type="indexterm" id="d3color">&#xA0;</a><a contenteditable="false" data-primary="color" data-secondary="grayscale" data-type="indexterm" id="color3gs">&#xA0;</a>las figuras hasta el momento han sido rellenas de color blanco y de borde negro. Para<a contenteditable="false" data-primary="background() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="fill() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="stroke() function" data-type="indexterm">&#xA0;</a>cambiar esto, usa las funciones <code>fill()</code> y <code>stroke()</code>. Los valores de los par&#xE1;metros var&#xED;an entre 0 y 255, donde 255 es blanco, 128 es gris medio y 0 es negro. La <a data-type="xref" href="#Fig_03_03">Figura 3-3</a> muestra c&#xF3;mo los valores entre 0 y 255 corresponden a diferentes niveles de gris. La funci&#xF3;n <code>background()</code> que hemos visto en ejemplos anteriores funciona de la misma manera, excepto que en vez de definir el color de relleno o de trazado para dibujar, define el color del fondo del lienzo.</p>

<figure id="Fig_03_03"><img alt="Fig 03 03" src="assets/images/gspj_0303.png">
<figcaption><b>Figura 3-3. </b>Valores de gris de 0 a 255</figcaption>
</figure>

<section data-type="sect2" id="ejemplo-3-14-pinta-con-grises-a2GWfG2">
<h2>Ejemplo 3-14: pinta con grises</h2>

<p>Este &#xA0;ejemplo muestra tres valores de gris distintos sobre un fondo negro:</p>

<figure><img alt="Ex 03 14" src="assets/images/gspj_03in12.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(0);                // Negro
  fill(204);                    // Gris claro
  ellipse(132, 82, 200, 200);   // C&#xED;rculo gris claro
  fill(153);                    // Gris medio
  ellipse(228, -16, 200, 200);  // C&#xED;rculo gris medio
  fill(102);                    // Gris oscuro
  ellipse(268, 118, 200, 200);  // C&#xED;rculo gris oscuro
}</pre>
</section>

<section data-type="sect2" id="ejemplo-3-15controla-el-relleno-y-el-color-del-trazo-6EXrf72">
<h2>Ejemplo 3-15:controla el relleno y el color del trazo</h2>

<p>Puedes <a contenteditable="false" data-primary="color" data-secondary="controlling fill and stroke" data-type="indexterm" id="c3cfs">&#xA0;</a>usar la funci&#xF3;n <code>noStroke()</code> para desactivar el trazo y as&#xED; no dibujar el borde, y puedes desactivar el relleno de una figura con<a contenteditable="false" data-primary="noFill() function" data-type="indexterm">&#xA0;</a> <code>noFill()</code>:</p>

<figure><img alt="Ex 03 15" src="assets/images/gspj_03in13.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  fill(153);                    // Gris medio
  ellipse(132, 82, 200, 200);   // C&#xED;rculo gris
  noFill();                     // Desactivar relleno
  ellipse(228, -16, 200, 200);  // Borde de c&#xED;rculo
  noStroke();                   // Desactivar trazo
  ellipse(268, 118, 200, 200);  // No hay dibujo
}</pre>

<p>Ten cuidado de no desactivar el relleno y el trazo al mismo tiempo, como lo hicimos en el ejemplo anterior, porque nada ser&#xE1; dibujado en la <a contenteditable="false" data-primary="color" data-secondary="controlling fill and stroke" data-startref="c3cfs" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="color" data-secondary="grayscale" data-startref="color3gs" data-type="indexterm">&#xA0;</a>pantalla.</p>
</section>

<section data-type="sect2" id="ejemplo-3-16-dibuja-con-color-510NfaZ">
<h2>Ejemplo 3-16: dibuja con color</h2>

<p>Para ir<a contenteditable="false" data-primary="color" data-secondary="RGB color" data-type="indexterm">&#xA0;</a> m&#xE1;s all&#xE1; de la escala de grises, usa tres par&#xE1;metros para espeficar los componentes de color rojo, verde y azul. Como este libro est&#xE1; impreso en blanco y negro, solamente ver&#xE1;s valores grises. Ejecuta el c&#xF3;digo para revelar los colores:</p>

<figure><img alt="Ex 03 16" src="assets/images/gspj_03in14.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  noStroke();
}

function draw() {
  background(0, 26, 51);        // Color azul oscuro
  fill(255, 0, 0);              // Color rojo
  ellipse(132, 82, 200, 200);   // C&#xED;rculo rojo
  fill(0, 255, 0);              // Color verde
  ellipse(228, -16, 200, 200);  // C&#xED;rculo verde
  fill(0, 0, 255);              // Color azul
  ellipse(268, 118, 200, 200);  // C&#xED;rculo azul
}</pre>

<p>Los colores en el ejemplo son llamados&#xA0;<em>color RGB</em>, que corresponde a la forma en que los computadores definen el color en la pantalla. Los tres n&#xFA;meros definen los valores de rojo, verde y azul, y var&#xED;an entre 0 y 255 de la misma forma que los valores de gris. Estos tres n&#xFA;meros son los par&#xE1;metros para tus funciones de <code>background()</code>, <code>fill()</code>, y <code>stroke()</code>.</p>
</section>

<section data-type="sect2" id="ex-3-17">
<h2>Ejemplo 3-17: define la transparencia</h2>

<p>Al<a contenteditable="false" data-primary="color" data-secondary="transparency control" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="transparency control" data-type="indexterm">&#xA0;</a>a&#xF1;adir un cuarto par&#xE1;metro a <code>fill()</code> o <code>stroke()</code>, puedes controlar la transparencia. Este cuarto par&#xE1;metro es conocido como el valor <code>alpha</code> <a contenteditable="false" data-primary="alpha value" data-type="indexterm">&#xA0;</a>, y tambi&#xE9;n usa el rango entre 0 y 255 para definir la cantidad de transparencia. El valor 0 define el color como totalmente transparente (no ser&#xE1; mostrado en la pantalla), el valor 255 es enteramente opaco, y los valores entre estos extremos hacen que los colores se mezclen en la pantalla:</p>

<figure><img alt="Ex 03 17" src="assets/images/gspj_03in15.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  noStroke();
}

function draw() {
  background(204, 226, 225);    // Color azul claro
  fill(255, 0, 0, 160);         // Color rojo
  ellipse(132, 82, 200, 200);   // C&#xED;rculo rojo
  fill(0, 255, 0, 160);         // Color verde
  ellipse(228, -16, 200, 200);  // C&#xED;rculo verde
  fill(0, 0, 255, 160);         // Color azul
  ellipse(268, 118, 200, 200);  // C&#xED;rculo azul
}</pre>
<a contenteditable="false" data-primary="drawing" data-secondary="color" data-startref="d3color" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="color" data-startref="color3" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="figuras-personalizadas-qEbrfwE">
<h1>Figuras personalizadas</h1>

<p>No est&#xE1;s<a contenteditable="false" data-primary="drawing" data-secondary="shapes" data-tertiary="custom" data-type="indexterm" id="d3sc">&#xA0;</a><a contenteditable="false" data-primary="shapes" data-secondary="drawing custom" data-type="indexterm" id="s3dc">&#xA0;</a>limitado a usar estas figuras geom&#xE9;tricas b&#xE1;sicas &#x2014; tambi&#xE9;n puedes dibujar nuevas formas conectando una serie de puntos.</p>

<section data-type="sect2" id="ex-3-18">
<h2>Ejemplo 3-18: dibuja una flecha</h2>

<p>La funci&#xF3;n<a contenteditable="false" data-primary="arrows, drawing" data-type="indexterm">&#xA0;</a> <code>beginShape()</code> <a contenteditable="false" data-primary="beginShape() function" data-type="indexterm">&#xA0;</a> se&#xF1;ala el comienzo de una nueva figura. La funci&#xF3;n <code>vertex()</code> es<a contenteditable="false" data-primary="vertex() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="arrows" data-type="indexterm">&#xA0;</a>usada para definir cada par de coordenadas <em>x</em> e <em>y</em> de la figura. Finalmente, <code>endShape()</code> <a contenteditable="false" data-primary="endShape() function" data-type="indexterm">&#xA0;</a>se&#xF1;ala que la figura est&#xE1; completa:</p>

<figure><img alt="Ex 03 18" src="assets/images/gspj_03in16.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  beginShape();
  vertex(180, 82);
  vertex(207, 36);
  vertex(214, 63);
  vertex(407, 11);
  vertex(412, 30);
  vertex(219, 82);
  vertex(226, 109);
  endShape();
}</pre>
</section>

<section data-type="sect2" id="example-3-19-cierra-la-flecha-Y23AfaE">
<h2>Example 3-19: cierra la flecha</h2>

<p>Cuando ejecutas el <a data-type="xref" href="#ex-3-18">Ejemplo 3-18</a>, ver&#xE1;s<a contenteditable="false" data-primary="shapes" data-secondary="closing gap" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="closing gaps" data-type="indexterm">&#xA0;</a>que el primer y el &#xFA;ltimo punto no est&#xE1;n conectados. Para hacer esto, a&#xF1;ade la palabra <code>CLOSE</code> como par&#xE1;metro a la funci&#xF3;n <code>endShape()</code>, &#xA0;as&#xED;:</p>

<figure><img alt="Ex 03 19" src="assets/images/gspj_03in17.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  beginShape();
  vertex(180, 82);
  vertex(207, 36);
  vertex(214, 63);
  vertex(407, 11);
  vertex(412, 30);
  vertex(219, 82);
  vertex(226, 109);
  endShape(CLOSE);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-3-20-crea-criaturas-q2v5fK1">
<h2>Ejemplo 3-20: crea criaturas</h2>

<p>El poder<a contenteditable="false" data-primary="creatures, drawing" data-type="indexterm">&#xA0;</a>de definir figuras<a contenteditable="false" data-primary="vertex() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="creatures" data-type="indexterm" id="d3creat">&#xA0;</a>con <code>vertex()</code> es la posibilidad de construir figuras con bordes complejos. p5.js puede dibujar miles y miles de l&#xED;neas al mismo tiempo para llenar la pantalla con figuras fant&#xE1;sticas que provienen de tu imaginaci&#xF3;n. Un ejemplo modesto pero m&#xE1;s complejo es presentado a continuaci&#xF3;n:</p>

<figure><img alt="Ex 03 20" src="assets/images/gspj_03in18.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);

  // Criatura izquierda
  beginShape();
  vertex(50, 120);
  vertex(100, 90);
  vertex(110, 60);
  vertex(80, 20);
  vertex(210, 60);
  vertex(160, 80);
  vertex(200, 90);
  vertex(140, 100);
  vertex(130, 120);
  endShape();
  fill(0);
  ellipse(155, 60, 8, 8);

  // Criatura derecha
  fill(255);
  beginShape();
  vertex(370, 120);
  vertex(360, 90);
  vertex(290, 80);
  vertex(340, 70);
  vertex(280, 50);
  vertex(420, 10);
  vertex(390, 50);
  vertex(410, 90);
  vertex(460, 120);
  endShape();
  fill(0);
  ellipse(345, 50, 10, 10);
}</pre>
<a contenteditable="false" data-primary="drawing" data-secondary="shapes" data-startref="d3sc" data-tertiary="custom" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="shapes" data-secondary="drawing custom" data-startref="s3dc" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="creatures" data-startref="d3creat" data-type="indexterm"></a></section>
</section>

<section data-type="sect1" id="comentarios-5ZNlfn1">
<h1>Comentarios</h1>

<p>Los <a contenteditable="false" data-primary="// (double slashes) for code comments" data-type="indexterm" id="ds4fcc">&#xA0;</a>ejemplos en este cap&#xED;tulo usan doble barra (//) al comienzo de una l&#xED;nea para a&#xF1;adir comentarios al c&#xF3;digo. <a contenteditable="false" data-primary="comments" data-type="indexterm" id="ca3">&#xA0;</a>Los <em>comentarios</em> son secciones de los programas que son ignoradas cuando el programa se ejecuta. Son &#xFA;tiles para hacerte notas a ti mismo que expliquen lo que est&#xE1; pasando en el c&#xF3;digo. Si otras personas est&#xE1;n leyendo tu c&#xF3;digo, los comentarios son especialmente importantes para ayudarles a entender tu proceso mental.</p>

<p>Los comentarios son tambi&#xE9;n especialmente &#xFA;tiles para un n&#xFA;mero de opciones distintas, como tratar de escoger el color correcto. Por ejemplo, podr&#xED;amos estar tratando de encontrar el rojo preciso que queremos para una elipse:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(200, 200);
}

function draw() {
  background(204);
  fill(165, 57, 57);
  ellipse(100, 100, 80, 80);
}</pre>

<p>Ahora sup&#xF3;n que quieres probar un rojo distinto, pero no quieres perder el antiguo. Puedo copiar y pegar la l&#xED;nea, hacer un cambio y luego comentar la l&#xED;nea antigua de c&#xF3;digo:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(200, 200);
}

function draw() {
  background(204);
  //fill(165, 57, 57);
  fill(144, 39, 39);
  ellipse(100, 100, 80, 80);
}</pre>

<p>Poner <code>//</code> al principio de una l&#xED;nea la anula temporalmente. Tambi&#xE9;n puedes quitar <code>//</code> y escribirlo al inicio de otra l&#xED;nea si quieres probarla de nuevo:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(200, 200);
}

function draw() {
  background(204);
  fill(165, 57, 57);
  //fill(144, 39, 39);
  ellipse(100, 100, 80, 80);
}</pre>

<p>A medida que trabajas con bosquejos de p5.js, te encontrar&#xE1;s a ti mismo creando docenas de iteraciones de ideas; usar comentarios para hacer notas o para desactivar l&#xED;neas de c&#xF3;digos puede ayudarte a mantener registro de tus m&#xFA;ltiples<a contenteditable="false" data-primary="comments" data-startref="ca3" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="// (double slashes) for code comments" data-startref="ds4fcc" data-type="indexterm">&#xA0;</a>opciones.</p>
</section>

<section data-type="sect1" id="robot1">
<h1>Robot 1: dibuja</h1>

<figure><img alt="Robot 1" src="assets/images/gspj_03in19.png">
<figcaption>
</figcaption></figure>

<p>Este es<a contenteditable="false" data-primary="robot programs (examples)" data-secondary="draw" data-type="indexterm" id="rp3draw">&#xA0;</a>P5, el robot de p5.js. En este libro existen 10 diferentes programas para dibujarlo y animarlo  - cada uno explora una idea de programaci&#xF3;n diferente. El dise&#xF1;o de P5 est&#xE1; inspirado en Sputnik I (1957), Shakey del Stanford Research Institute (1966&#x2013;1972), el dron luchador en <em>Dune</em> (1984) de  David Lynch y en HAL 9000 de <em>2001: A Space Odyssey</em> (1968), entre otros robots favoritos.

</p><p>El primer programa de robot usa las funciones de dibujo introducidas anteriormente en este cap&#xED;tulo. Los par&#xE1;metros de las funciones <code>fill()</code> y <code>stroke()</code> definen los valores de la escala de grises. Las funciones <code>line()</code>, <code>ellipse()</code> y <code>rect()</code> definen las figuras que crean el cuello, las antenas, el cuerpo y la cabeza del robot. Para familiarizarte mejor con las funciones, ejecuta el programa y cambia los valores para redise&#xF1;ar el robot:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(720, 480);
  strokeWeight(2);
  ellipseMode(RADIUS);
}

function draw() {
  background(204);

  // Cuello
  stroke(102);                // Hace gris el trazo
  line(266, 257, 266, 162);   // Izquierda
  line(276, 257, 276, 162);   // Centro
  line(286, 257, 286, 162);   // Derecha

  // Antenas
  line(276, 155, 246, 112);   // Peque&#xF1;a
  line(276, 155, 306, 56);    // Larga
  line(276, 155, 342, 170);   // Mediana

  // Cuerpo
  noStroke();                 // Desactiva trazo
  fill(102);                  // Hace gris el relleno
  ellipse(264, 377, 33, 33);  // Globo antigravitacional
  fill(0);                    // Hace negro el relleno
  rect(219, 257, 90, 120);    // Cuerpo principal
  fill(102);                  // Hace gris el relleno
  rect(219, 274, 90, 6);      // Raya gris

  // Cabeza
  fill(0);                    // Hace negro el relleno
  ellipse(276, 155, 45, 45);  // Cabeza
  fill(255);                  // Hace blanco el relleno
  ellipse(288, 150, 14, 14);  // Ojo grande
  fill(0);                    // Hace negro el relleno
  ellipse(288, 150, 3, 3);    // Pupila
  fill(153);                  // Hace gris claro el relleno
  ellipse(263, 148, 5, 5);    // Ojo peque&#xF1;o 1
  ellipse(296, 130, 4, 4);    // Ojo peque&#xF1;o 2
  ellipse(305, 162, 3, 3);    // Ojo peque&#xF1;o 3
}</pre>
<a contenteditable="false" data-primary="drawing" data-startref="d3" data-type="indexterm">&#xA0;</a>&#xA0;<a contenteditable="false" data-primary="robot programs (examples)" data-secondary="draw" data-startref="rp3draw" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="rxYDCvE">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-04-intro"><img class="fse fs image" src="assets/images/gspj_04in01.png">
<figcaption> </figcaption>
</figure>
</section>

<section data-type="chapter" id="variables" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Variables</h1>

<p class="lede">Una <em>variable</em> <a contenteditable="false" data-primary="variables" data-type="indexterm" id="v4">&#xA0;</a>almacena en la memoria un valor para su uso posterior en un programa. Una variable puede ser usada muchas veces dentro de un mismo programa, y el valor puede ser f&#xE1;cilmente modificado mientras el programa est&#xE1; siendo ejecutado.</p>

<section data-type="sect1" id="primeras-variables-YNWlSo2">
<h1>Primeras variables</h1>

<p>La &#xA0;raz&#xF3;n principal por la que usamos variables es para evitar repetirnos en el c&#xF3;digo. Si est&#xE1;s escribiendo el mismo n&#xFA;mero una y otra vez, considera usar una variable para que tu c&#xF3;digo sea m&#xE1;s general y m&#xE1;s f&#xE1;cil de actualizar.</p>

<section data-type="sect2" id="ex-4-1">
<h2>Ejemplo 4-1: reusa los mismos valores</h2>

<p>Por <a contenteditable="false" data-primary="variables" data-secondary="reusing identical values" data-type="indexterm">&#xA0;</a>ejemplo, cuando haces variables la coordenada <em>y</em>  y el di&#xE1;metro para los tres c&#xED;rculos de este ejemplo, se usan los mismos valores para cada elipse:</p>

<figure><img alt="Ex 04 01" src="assets/images/gspj_04in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var y = 60;
var d = 80;

function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  ellipse(75, y, d, d);   // Izquierda
  ellipse(175, y, d, d);  // Centro
  ellipse(275, y, d, d);  // Derecha
}</pre>
</section>

<section data-type="sect2" id="ex-4-2">
<h2>Ejemplo 4-2: modifica los valores</h2>

<p>Simplemente<a contenteditable="false" data-primary="variables" data-secondary="changing values" data-type="indexterm">&#xA0;</a>modificando las variables <em>y</em> y <em>d</em> altera las tres elipses:</p>

<figure><img alt="Ex 04 02" src="assets/images/gspj_04in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var y = 100;
var d = 130;

function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  ellipse(75, y, d, d);   // Izquierda
  ellipse(175, y, d, d);  // Centro
  ellipse(275, y, d, d);  // Derecha
}</pre>

<p>Si no tuvieras variables, tendr&#xED;as que cambiar tres veces la coordenada <em>y</em> usada en el c&#xF3;digo y seis veces el di&#xE1;metro. Comparando los ejemplos <a href="#ex-4-1">4-1</a> y <a href="#ex-4-2">4-2</a>, observa c&#xF3;mo todas las l&#xED;neas son iguales, excepto las dos primeras l&#xED;neas con variables. Las variables te permiten separar las l&#xED;neas de c&#xF3;digo que cambian de las que no cambian, lo que hace que los programas sean f&#xE1;ciles de modificar. Por ejemplo, si pones las variables que controlan colores y tama&#xF1;os en un lugar, puedes explorar diferentes opciones visuales enfoc&#xE1;ndote en s&#xF3;lo unas pocas l&#xED;neas de c&#xF3;digo.</p>
</section>
</section>

<section data-type="sect1" id="hacer-variables-nzYXSD7">
<h1>Hacer variables</h1>

<p>Cuando<a contenteditable="false" data-primary="variables" data-secondary="creating" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="naming variables" data-type="indexterm">&#xA0;</a>haces tus propias variables, puedes determinar el <em>nombre&#xA0;</em>y el <em>valor</em>. T&#xFA; decides c&#xF3;mo se llama la variable. Escoge un nombre que sea indicativo de lo que est&#xE1; almacenado en la variable, pero hazlo consistente y no muy largo. Por ejemplo, el nombre de variable &#x201C;radio&#x201D; ser&#xE1; mucho m&#xE1;s claro que &#x201C;r&#x201D; cuando leas tu c&#xF3;digo.</p>

<p>Las variables primero deben ser <em>declaradas</em>, <a contenteditable="false" data-primary="variables" data-secondary="declared" data-type="indexterm">&#xA0;</a>lo que reserva espacio en la memoria del computador para almacenar la informaci&#xF3;n. Cuando declaras una variable, usas la palabra <code>var</code>, para indicar que est&#xE1;s creando una nueva variable, seguida del nombre.&#xA0;Despu&#xE9;s de que el nombre es fijado, se le puede asignar un valor a la variable:</p>

<pre data-code-language="p5js" data-type="programlisting">var x;  // Declara la variable x
x = 12; // Asigna un valor a x</pre>

<p>Este c&#xF3;digo hace lo mismo, pero es m&#xE1;s corto:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 12; // Declara la variable x y le asigna un valor</pre>

<p>Los caracteres <code>var</code>&#xA0;en la l&#xED;nea de c&#xF3;digo que declara la variable, pero no son escritos de nuevo. Cada vez que se escribe <code>var</code>&#xA0;antes del nombre de una variable, el computador piensa que est&#xE1;s tratando de declarar una nueva variable. No puedes tener dos variables con el mismo nombre en la misma secci&#xF3;n del programa (<a data-type="xref" href="#variable_scope">Ap&#xE9;ndice C</a>), ya que el programa podr&#xED;a comportarse extra&#xF1;amente:</p>

<pre data-code-language="p5js" data-type="programlisting">var x;       // Declara la variable x
var x = 12;  // &#xA1;ERROR! Ya existe una variable x</pre>

<p>Puedes situar tus variables fuera<a contenteditable="false" data-primary="setup() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="draw() function" data-type="indexterm">&#xA0;</a>de <code>setup()</code> y <code>draw()</code>. Si creas una variable dentro de <code>setup()</code>, no puedes usarla dentro de <code>draw()</code>, as&#xED; que necesitas situar estas variables en otro lugar. Estas variables reciben el nombre de<a contenteditable="false" data-primary="global variables" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="variables" data-secondary="global" data-type="indexterm">&#xA0;</a><em>variables globales</em>, porque pueden ser usadas en cualquier parte (&quot;globalmente&quot;) del programa.</p>
</section>

<section data-type="sect1" id="variables-de-p5js-OzP1SWN">
<h1>Variables de p5.js</h1>

<p>p5.js posee una<a contenteditable="false" data-primary="variables" data-secondary="p5.js" data-type="indexterm" id="v4p5js">&#xA0;</a>serie de variables especiales para almacenar informaci&#xF3;n sobre el programa mientras se ejecuta. Por ejemplo, el ancho y la altura del lienzo se almacenan en las variables <code>width</code> y <code>height</code>. Estos valores son definidos por la funci&#xF3;n <code>createCanvas()</code>. Pueden ser usados para dibujar elementos relativos al tama&#xF1;o del lienzo, incluso si la l&#xED;nea de c&#xF3;digo <code>createCanvas()</code> es modificada.</p>

<section data-type="sect2" id="ejemplo-4-3-ajusta-el-lienzo-observa-lo-que-sucedes-WNLbS97">
<h2>Ejemplo 4-3: ajusta el lienzo, observa lo que sucedes</h2>

<p>En este ejemplo, modifica los par&#xE1;metros de createCanvas() para observar c&#xF3;mo funciona:</p>

<figure><img alt="Ex 04 03" src="assets/images/gspj_04in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  line(0, 0, width, height);  // L&#xED;nea desde (0,0) a (480, 120)
  line(width, 0, 0, height);  // L&#xED;nea desde (480,0) a (0, 120)
  ellipse(width/2, height/2, 60, 60);
}</pre>

<p>Existen tambi&#xE9;n variables especiales que mantienen registro del estado del rat&#xF3;n y de los valores del teclado, entre otras. Ser&#xE1;n discutidas<a contenteditable="false" data-primary="variables" data-secondary="p5.js" data-startref="v4p5js" data-type="indexterm">&#xA0;</a>en <a data-type="xref" href="#response">5/Respuesta</a>.</p>
</section>
</section>

<section data-type="sect1" id="un-poco-de-matematicas-dznKS5N">
<h1>Un poco de matem&#xE1;ticas</h1>

<p>La gente<a contenteditable="false" data-primary="arithmetic operations" data-type="indexterm" id="ao4">&#xA0;</a><a contenteditable="false" data-primary="math, and programming" data-type="indexterm" id="map4">&#xA0;</a>a menudo asume que las matem&#xE1;ticas y la programaci&#xF3;n son lo mismo. Aunque un poco de conocimiento de matem&#xE1;ticas puede ser &#xFA;til para ciertos tipos de programaci&#xF3;n, la aritm&#xE9;tica b&#xE1;sica alcanza para cubrir lo m&#xE1;s importante.</p>

<section data-type="sect2" id="ejemplo-4-4-aritmetica-basica-V74wSy2">
<h2>Ejemplo 4-4: aritm&#xE9;tica b&#xE1;sica</h2>

<figure><img alt="Ex 04 04" src="assets/images/gspj_04in05.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var x = 25;
var h = 20;
var y = 25;

function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  x = 20;
  rect(x, y, 300, h);        // Superior
  x = x + 100;
  rect(x, y + h, 300, h);    // Central
  x = x - 250;
  rect(x, y + h*2, 300, h);  // Inferior
}</pre>

<p>En el c&#xF3;digo, s&#xED;mbolos como <code>+</code>, <code>&#x2212;</code> y <code>*</code> son llamados<a contenteditable="false" data-primary="arithmetic operations" data-secondary="operators" data-type="indexterm" id="ao4o">&#xA0;</a><a contenteditable="false" data-primary="operators" data-type="indexterm" id="op4">&#xA0;</a><em>operadores</em>. Cuando se encuentran entre dos valores, crean una <em>expresi&#xF3;n</em>. Por ejemplo, 5 + 9 y 1024 - 512 son expresiones. Los operadores para operaciones matem&#xE1;ticas b&#xE1;sicas son:</p>

<table>
	<tbody>
		<tr>
			<td>
			<p>+</p>
			</td>
			<td>
			<p>Suma</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>&#x2212;</p>
			</td>
			<td>
			<p>Resta</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>*</p>
			</td>
			<td>
			<p>Multiplicaci&#xF3;n</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>/</p>
			</td>
			<td>
			<p>Divisi&#xF3;n</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>=</p>
			</td>
			<td>
			<p>Asignaci&#xF3;n</p>
			</td>
		</tr>
	</tbody>
</table>

<p>JavaScript posee un conjunto de reglas para definir el orden de precedencia que los operadores tienen entre s&#xED;, lo que significa, cu&#xE1;les c&#xE1;lculos son efectuados en primer, segundo y tercer lugar, etc. Estas reglas definen el orden en el que el c&#xF3;digo se ejecuta. Un poco de conocimiento sobre esto es un gran avance hacia el entendimiento de c&#xF3;mo funciona una l&#xED;nea de c&#xF3;digo corta como esta:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 4 + 4 * 5; // Se le asigna el valor 24 a x</pre>

<p>La expresi&#xF3;n 4 * 5 es evaluada primero porque la multiplicaci&#xF3;n tiene la prioridad m&#xE1;s alta. Luego, se le suma 4 al producto <span class="keep-together">4 * 5</span>, resultando 24. Finalmente, como el <a contenteditable="false" data-primary="assignment operator" data-type="indexterm">&#xA0;</a><em>operador de asignaci&#xF3;n</em> (el signo <em>igual</em>) tiene la menor predecencia, el valor 24 es asignado a la variable <em>x</em>. Esto se puede aclarar con el uso de par&#xE9;ntesis, pero el resultado es el mismo:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 4 + (4 * 5); // Se le asigna el valor 24 a x</pre>

<p>Si quieres forzar que la suma ocurra primero, usa par&#xE9;ntesis. Como los par&#xE9;ntesis tienen mayor precedencia que la multiplicaci&#xF3;n, al cambiar los par&#xE9;ntesis de lugar se cambia el c&#xE1;lculo efectuado:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = (4 + 4) * 5; // Se le asigna el valor 40 a x</pre>

<p>En clases de matem&#xE1;ticas se ense&#xF1;a un acr&#xF3;nimo para este orden: PEMDAS, <a contenteditable="false" data-primary="PEMDAS acronym" data-type="indexterm">&#xA0;</a>que significa Par&#xE9;ntesis, Exponentes, Multiplicaci&#xF3;n, Divisi&#xF3;n, Adici&#xF3;n, Substracci&#xF3;n, donde los par&#xE9;ntesis tienen la mayor prioridad y la substracci&#xF3;n la menor.<a contenteditable="false" data-primary="order of operations" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arithmetic operations" data-secondary="order of" data-type="indexterm">&#xA0;</a>El orden completo de operaciones se encuentra en <a data-type="xref" href="#order_of_operations">Ap&#xE9;ndice B</a>.</p>

<p>Algunos c&#xE1;lculos son usados tan frecuentemente en programaci&#xF3;n que se han elaborado atajos, lo que es &#xFA;til para ahorrar tiempo al escribir. Por ejemplo, puedes sumar a o restar  una variable con un solo operador:</p>

<pre data-code-language="p5js" data-type="programlisting">x += 10; // Es equivalente a x = x + 10
y &#x2212;= 15; // Es equivalente a y = y - 15</pre>

<p>Tambi&#xE9;n es com&#xFA;n sumar o restar 1 a una variable, as&#xED; que tambi&#xE9;n existe un atajo. Los operadores <code>++</code> y <code>&#x2212;&#x2212;</code> operators hacen esto:</p>

<pre data-code-language="p5js" data-type="programlisting">x++; // Es equivalente a x = x + 1
y&#x2212;&#x2212;; // Es equivalente a y = y - 1</pre>
<a contenteditable="false" data-primary="operators" data-startref="op4" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="math, and programming" data-startref="map4" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arithmetic operations" data-secondary="operators" data-startref="ao4o" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arithmetic operations" data-startref="ao4" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="repetition">
<h1>Repetici&#xF3;n</h1>

<p>A medida<a contenteditable="false" data-primary="repetition" data-seealso="for loops" data-type="indexterm" id="rep4">&#xA0;</a><a contenteditable="false" data-primary="variables" data-secondary="and repetition" data-secondary-sortas="repetition" data-type="indexterm" id="v4rep">&#xA0;</a>que escribas m&#xE1;s programas, te dar&#xE1;s cuenta de que ocurren patrones al repetir l&#xED;neas de c&#xF3;digo con peque&#xF1;as modificaciones. Una estructura de c&#xF3;digo llamada bucle<a contenteditable="false" data-primary="for loops" data-type="indexterm" id="fl4">&#xA0;</a><code>for</code> hace posible que una l&#xED;nea de c&#xF3;digo se ejecute m&#xE1;s de una vez, condensando el tipo de repetici&#xF3;n a unas pocas l&#xED;neas de c&#xF3;digo. Esto hace que tus programas sean  m&#xE1;s modulares y f&#xE1;ciles de modificar.</p>

<section data-type="sect2" id="ejemplo-4-5-haz-lo-mismo-una-y-otra-vez-G7GnSe2">
<h2>Ejemplo 4-5: haz lo mismo una y otra vez</h2>

<p>Este ejemplo tiene el tipo de patr&#xF3;n que puede ser simplificado con un bucle <code>for</code>:</p>

<figure><img alt="Ex 04 05" src="assets/images/gspj_04in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  strokeWeight(8);
}

function draw() {
  background(204);
  line(20, 40, 80, 80);
  line(80, 40, 140, 80);
  line(140, 40, 200, 80);
  line(200, 40, 260, 80);
  line(260, 40, 320, 80);
  line(320, 40, 380, 80);
  line(380, 40, 440, 80);
}</pre>
</section>

<section data-type="sect2" id="ex-4-6">
<h2>Ejemplo 4-6: usar un bucle for</h2>

<p>Se puede lograr lo mismo con un bucle <code>for</code>, y con mucho menos c&#xF3;digo:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  strokeWeight(8);
}

function draw() {
  background(204);
  for (var i = 20; i &lt; 400; i += 60) {
    line(i, 40, i + 60, 80);
  }
}</pre>

<p>El bucle <code>for</code> es distinto en muchas maneras del c&#xF3;digo que hemos escrito hasta ahora. F&#xED;jate en las llaves, los caracteres <code>{</code> y <code>}</code>. El c&#xF3;digo entre las llaves se llama<a contenteditable="false" data-primary="block" data-type="indexterm">&#xA0;</a> <em>bloque</em>. Este es el c&#xF3;digo que ser&#xE1; repetido en cada iteraci&#xF3;n del bucle <code>for</code>.</p>

<p>Dentro de los par&#xE9;ntesis hay tres declaraciones, separadas por punto y coma, que funcionan en conjunto para controlar cu&#xE1;ntas veces se ejecuta el c&#xF3;digo dentro del bloque. De izquierda a derecha, estas declaraciones son llamadas<a contenteditable="false" data-primary="initialization statement (init)" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="test statement" data-type="indexterm" id="ts4">&#xA0;</a>&#xA0;la <em>inicializaci&#xF3;n</em> (<code>inic</code>), la <em>prueba</em> (test), y el <em>refresco</em> (update):</p>

<pre data-code-language="p5js" data-type="programlisting">for (inic; prueba; refresco) {
  //instrucciones
}</pre>

<p><code>inic</code> t&#xED;picamente declara una variable nueva a ser usada en el bucle for y le asigna un valor. El nombre de variable <code>i</code> se usa frecuentemente, pero no tiene nada de especial. La <em>prueba</em> eval&#xFA;a el valor de esta variable, y el <em>refresco</em> cambia el valor de la variable. <a data-type="xref" href="#Fig_04_01">Figura 4-1</a> muestra el orden en el que el c&#xF3;digo se ejecuta y c&#xF3;mo se controla el c&#xF3;digo dentro del bloque.</p>

<figure id="Fig_04_01"><img alt="Fig 04 01" src="assets/images/gspj_0401.png">
<figcaption><b>Figura 4-1. </b>Diagrama de flujo de un bucle for</figcaption>
</figure>

<p>La instrucci&#xF3;n <em>prueba</em> requiere m&#xE1;s explicaci&#xF3;n. Siempre es una <em>expresi&#xF3;n de relaci&#xF3;n</em> que compara dos valores con un <a contenteditable="false" data-primary="relational operators" data-type="indexterm">&#xA0;</a><em>operador relacional</em>. En este ejemplo, la expresi&#xF3;n es &quot;i &lt; 400&quot; y el operador es el s&#xED;mbolo &lt; (menor que). Los operadores relacionales m&#xE1;s comunes<a contenteditable="false" data-primary="!= (not equal to) operator" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="&lt;= (less than or equal to) operator" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="&gt;= (greater than or equal to) operator" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="&gt; (greater than) operator" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="== (equal to) operator" data-type="indexterm"></a>son:<a contenteditable="false" data-primary="&lt; (less than) operator" data-type="indexterm">&#xA0;</a></p>

<table>
	<tbody>
		<tr>
			<td>
			<p>&gt;</p>
			</td>
			<td>
			<p>Mayor que</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>&lt;</p>
			</td>
			<td>
			<p>Menor que</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>&gt;=</p>
			</td>
			<td>
			<p>Mayor o igual que</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>&lt;=</p>
			</td>
			<td>
			<p>Menor o igual que</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>==</p>
			</td>
			<td>
			<p>Igual</p>
			</td>
		</tr>
		<tr>
			<td>
			<p>!=</p>
			</td>
			<td>
			<p>Distinto de</p>
			</td>
		</tr>
	</tbody>
</table>

<p>Una expresi&#xF3;n relacional siempre evalua a <code>true</code> (verdadero) o <code>false</code> (falso). Por ejemplo, la expresi&#xF3;n 5 &gt; 3 es <code>true</code>. Preguntamos,  &quot;&#xBF;es cinco mayor que tres?&quot; Como la respuesta es &quot;s&#xED;,&quot; decimos que la expresi&#xF3;n es <code>true</code>. Para la expresi&#xF3;n 5 &lt; 3, preguntamos, &quot;&#xBF;es cinco menor que tres?&quot; Como la respuesta es &quot;no,&quot; decimos que la expresi&#xF3;n es <code>false</code>. Cuando la evaluaci&#xF3;n es <code>true</code>, se ejecuta el c&#xF3;digo dentro del bloque, y cuando es <code>false</code>, el c&#xF3;digo dentro del bloque no se ejecuta y el bucle <code>for</code><a contenteditable="false" data-primary="test statement" data-startref="ts4" data-type="indexterm">&#xA0;</a>termina.</p>
</section>

<section data-type="sect2" id="ejemplo-4-7-entrenamiento-de-bucles-for-k7JQSv2">
<h2>Ejemplo 4-7: entrenamiento de bucles for</h2>

<p>El poder definitivo que entregan los bucles <code>for</code> es la habilidad de hacer cambios r&#xE1;pidos a tu c&#xF3;digo. Como el c&#xF3;digo dentro del bloque es ejecutado t&#xED;picamente m&#xFA;ltiples veces, un cambio al bloque es magnificado cuando el c&#xF3;digo es ejecutado. Al modificar <a data-type="xref" href="#ex-4-6">Ejemplo 4-6</a> ligeramente, podemos crear una variedad de patrones distintos:</p>

<figure><img alt="Ex 04 07" src="assets/images/gspj_04in07.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  strokeWeight(2);
}
<!--Page Break--><br class="pagebreak-after">
<!--Page Break--><br class="pagebreak-after">
<!--Page Break--><br class="pagebreak-after">
function draw() {
  background(204);
  for (var i = 20; i &lt; 400; i += 8) {
    line(i, 40, i + 60, 80);
  }
}</pre>
</section>

<section data-type="sect2" id="ejemplo-4-8-desplegando-las-lineas-dNw9Sm7">
<h2>Ejemplo 4-8: desplegando las l&#xED;neas</h2>
<a contenteditable="false" data-primary="lines" data-secondary="fanning out" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="for loops" data-secondary="for fanning out lines" data-secondary-sortas="fanning" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="lines" data-secondary="fanning out with for loops" data-type="indexterm">&#xA0;</a>

<figure><img alt="Ex 04 08" src="assets/images/gspj_04in08.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  strokeWeight(2);
}

function draw() {
  background(204);
  for (var i = 20; i &lt; 400; i += 20) {
    line(i, 0, i + i/2, 80);
  }
}</pre>
</section>

<section data-type="sect2" id="ejemplo-4-9-modificando-las-lineas-AzaRSAN">
<h2>Ejemplo 4-9: modificando las l&#xED;neas</h2>
<a contenteditable="false" data-primary="for loops" data-secondary="for kinking lines" data-secondary-sortas="kinking" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="lines" data-secondary="kinking with for loops" data-type="indexterm">&#xA0;</a>

<figure><img alt="Ex 04 09" src="assets/images/gspj_04in09.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  strokeWeight(2);
}

function draw() {
  background(204);
  for (var i = 20; i &lt; 400; i += 20) {
    line(i, 0, i + i/2, 80);
    line(i + i/2, 80, i*1.2, 120);
  }
}</pre>
</section>

<section data-type="sect2" id="ex-4-10">
<h2>Ejemplo 4-10: anidando un bucle for dentro de otro</h2>

<p>Cuando<a contenteditable="false" data-primary="embedded for loops" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="for loops" data-secondary="embedding within each other" data-type="indexterm">&#xA0;</a>un bucle <code>for</code> es anidado dentro de otro, el n&#xFA;mero de repeticiones se multiplica. Primero veamos un ejemplo corto y luego revisaremos sus partes en <a data-type="xref" href="#ex-4-11">Ejemplo 4-11</a>:</p>

<figure><img alt="Ex 04 10" src="assets/images/gspj_04in10.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  noStroke();
}

function draw() {
  background(0);
  for (var y = 0; y &lt;= height; y += 40) {
    for (var x = 0; x &lt;= width; x += 40) {
      fill(255, 140);
      ellipse(x, y, 40, 40);
    }
  }
}</pre>
</section>

<section data-type="sect2" id="ex-4-11">
<h2>Ejemplo 4-11: filas y columnas</h2>

<p>En este<a contenteditable="false" data-primary="columns and rows, creating with for loops" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="rows and columns, creating with for loops" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="for loops" data-secondary="creating rows and columns with" data-type="indexterm" id="fl4cracw">&#xA0;</a>ejemplo, los bucles <code>for</code> est&#xE1;n lado a lado, en vez de estar uno anidado dentro de otro. El resultado muestra que un bucle for est&#xE1; dibujando una columna de 4 c&#xED;rculos y el otro est&#xE1; dibujando una fila de 13 c&#xED;rculos:</p>

<figure><img alt="Ex 04 11" src="assets/images/gspj_04in11.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  noStroke();
}

function draw() {
  background(0);
  for (var y = 0; y &lt; height+45; y += 40) {
    fill(255, 140);
    ellipse(0, y, 40, 40);
  }
  for (var x = 0; x &lt; width+45; x += 40) {
    fill(255, 140);
    ellipse(x, 0, 40, 40);
  }
}</pre>

<p>Cuando uno de estos bucles <code>for</code> es puesto dentro del otro, como en el <a data-type="xref" href="#ex-4-10">Ejemplo 4-10</a>, las 4 repeticiones del primer bucle son combinadas con las 13 del segundo, para as&#xED; ejecutar 52 veces (4&#xD7;13 = 52) el c&#xF3;digo dentro del bloque combinado.</p>

<p>El <a data-type="xref" href="#ex-4-10">Ejemplo 4-10</a> es una buena base para explorar muchos tipos de patrones visuales repetitivos. Los siguientes ejemplos muestran un par de maneras en que esto puede ser extendido, aunque esto es solamente una peque&#xF1;a muestra de lo que es<a contenteditable="false" data-primary="for loops" data-secondary="creating rows and columns with" data-startref="fl4cracw" data-type="indexterm">&#xA0;</a>posible.</p>
</section>

<section data-type="sect2" id="ex-4-12">
<h2>Ejemplo 4-12: alfileres y l&#xED;neas</h2>

<p>En este ejemplo, el <a contenteditable="false" data-primary="for loops" data-secondary="for pins and lines" data-secondary-sortas="pins" data-type="indexterm">&#xA0;</a>c&#xF3;digo dibuja una l&#xED;nea entre cada punto de la matriz y el centro de la pantalla:</p>

<figure><img alt="Ex 04 12" src="assets/images/gspj_04in12.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  fill(255);
  stroke(102);
}

function draw() {
  background(0);
  for (var y = 20; y &lt;= height-20; y += 10) {
    for (var x = 20; x &lt;= width-20; x += 10) {
      ellipse(x, y, 4, 4);
      // Dibuja una l&#xED;nea al centro de la imagen
      line(x, y, 240, 60);
    }
  }
}
</pre>
</section>

<section data-type="sect2" id="ex-4-13">
<h2>Ejemplo 4-13: puntos semitono</h2>

<p>En este ejemplo, las<a contenteditable="false" data-primary="for loops" data-secondary="for halftone dots" data-secondary-sortas="halftone" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="halftone dots, creating" data-type="indexterm">&#xA0;</a>elipses se reducen en tama&#xF1;o en cada nueva fila y son movidas hacia la derecha, sumando la coordenada <em>y</em> con la coordenada <em>x</em>:</p>

<figure><img alt="Ex 04 13" src="assets/images/gspj_04in13.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(0);
  for (var y = 32; y &lt;= height; y += 8) {
    for (var x = 12; x &lt;= width; x += 15) {
      ellipse(x + y, y, 16 - y/10.0, 16 - y/10.0);
    }
  }
}</pre>
<a contenteditable="false" data-primary="variables" data-secondary="and repetition" data-secondary-sortas="repetition" data-startref="v4rep" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="repetition" data-seealso="for loops" data-startref="rep4" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="for loops" data-startref="fl4" data-type="indexterm"></a></section>
</section>

<section data-type="sect1" id="robot2">
<h1>Robot 2: variables</h1>

<figure><img alt="Robot 2" src="assets/images/gspj_04in14.png">
<figcaption>
</figcaption></figure>

<p>Las <a contenteditable="false" data-primary="robot programs (examples)" data-secondary="modifying code with variables" data-type="indexterm" id="rp4mcwv">&#xA0;</a>variables introducidas en este programa hacen que el c&#xF3;digo se vea m&#xE1;s dif&#xED;cil que el de la Robot 1 (ver <a data-type="xref" href="#robot1">Robot 1: dibuja</a>), pero ahora es mucho m&#xE1;s simple hacer modificaciones, porque los n&#xFA;meros que dependen uno de otro est&#xE1;n en una misma ubicaci&#xF3;n. Por ejemplo, el dibujo del cuello est&#xE1; basado en la variable <code>neckHeight</code>. El grupo de variables al principio del c&#xF3;digo controla los aspectos del robot que queremos cambiar: ubicaci&#xF3;n, altura del cuerpo y altura del cuello. Puedes observar algunas de las posibles variaciones posibles en la figura; de izquierda a derecha, aqu&#xED;; est&#xE1;n los valores correspondientes:</p>

<table class="smallerText">
	<tbody>
		<tr>
			<td class="largerTd">
			<pre class="pre smallerText">y = 390&#xA0;
bodyHeight = 180&#xA0;
neckHeight = 40
</pre>
			</td>
			<td class="largerTd">
			<pre class="pre smallerText">y = 460&#xA0;
bodyHeight = 260&#xA0;
neckHeight = 95
</pre>
			</td>
			<td class="largerTd">
			<pre class="pre smallerText">y = 310&#xA0;
bodyHeight = 80&#xA0;
neckHeight = 10
</pre>
			</td>
			<td class="largerTd">
			<pre class="pre smallerText">y = 420&#xA0;
bodyHeight = 110&#xA0;
neckHeight = 140
</pre>
			</td>
		</tr>
	</tbody>
</table>

<p>Cuando modifiques tu propio c&#xF3;digo para usar variables en vez de n&#xFA;meros, planea cuidadosamente los cambios y despu&#xE9;s realiza las modificaciones en incrementos graduales. Por ejemplo, cuando este programa fue escrito, cada variable fue creada a una a la vez para minimizar la complejidad de la transici&#xF3;n. Solamente despu&#xE9;s de que una variable fuera creada y el c&#xF3;digo era ejecutado para asegurar que funcionara correctamente, se a&#xF1;ad&#xED;a una nueva variable:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 60;            // Coordenada x
var y = 420;           // Coordenada y
var bodyHeight = 110;  // Altura del cuerpo
var neckHeight = 140;  // Altura del cuello
var radius = 45;
var ny = y - bodyHeight - neckHeight - radius;  // y del cuello

function setup() {
  createCanvas(170, 480);
  strokeWeight(2);
  ellipseMode(RADIUS);
}

function draw() {
  background(204);

  // Cuello
  stroke(102);
  line(x+2, y-bodyHeight, x+2, ny);
  line(x+12, y-bodyHeight, x+12, ny);
  line(x+22, y-bodyHeight, x+22, ny);

  // Antenas
  line(x+12, ny, x-18, ny-43);
  line(x+12, ny, x+42, ny-99);
  line(x+12, ny, x+78, ny+15);

  // Cuerpo
  noStroke();
  fill(102);
  ellipse(x, y-33, 33, 33);
  fill(0);
  rect(x-45, y-bodyHeight, 90, bodyHeight-33);
  fill(102);
  rect(x-45, y-bodyHeight+17, 90, 6);

  // Cabeza
  fill(0);
  ellipse(x+12, ny, radius, radius);
  fill(255);
  ellipse(x+24, ny-6, 14, 14);
  fill(0);
  ellipse(x+24, ny-6, 3, 3);
  fill(153);
  ellipse(x, ny-8, 5, 5);
  ellipse(x+30, ny-26, 4, 4);
  ellipse(x+41, ny+6, 3, 3);
}</pre>
<a contenteditable="false" data-primary="variables" data-startref="v4" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="robot programs (examples)" data-secondary="modifying code with variables" data-startref="rp4mcwv" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="lexnuRY">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-05-mouse"><img src="assets/images/gspj_05in01.png"><figcaption></figcaption></figure>
</section>

<section data-type="chapter" id="response" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Respuesta</h1>

<p class="lede">El c&#xF3;digo que<a contenteditable="false" data-primary="response to input" data-type="indexterm" id="rti5">&#xA0;</a><a contenteditable="false" data-primary="response to input" data-secondary="setup and draw" data-type="indexterm" id="rti5sad">&#xA0;</a>responde a acciones de entrada del rat&#xF3;n, teclado u otros dispositivos  depende de la ejecuci&#xF3;n continua del programa.  Ya nos enfrentamos a las funciones <code class="codeLede">setup()</code> y <code class="codeLede">draw()</code> en <a data-type="xref" href="#hello">1/Hola</a>. Ahora aprenderemos m&#xE1;s sobre qu&#xE9; hacen y c&#xF3;mo podemos usarlas para reaccionar a entradas al programa.</p>

<section data-type="sect1" id="una-vez-y-para-siempre-pM4YSG7">
<h1>Una vez y para siempre</h1>

<p>El c&#xF3;digo dentro del bloque <code>draw()</code> <a contenteditable="false" data-primary="draw() function" data-type="indexterm" id="df5">&#xA0;</a>se ejecuta desde el principio hasta el final, luego se repite hasta que cierras el programa cuando cierras la ventana. Cada iteraci&#xF3;n de <code>draw()</code> se <a contenteditable="false" data-primary="frames" data-type="indexterm">&#xA0;</a>llama <em>cuadro</em>. (La tasa de cuadros por defecto es de 60 cuadros por segundo, pero esto puede ser modificado).</p>

<section data-type="sect2" id="ejemplo-5-1-la-funcion-draw-mVNNSWV">
<h2>Ejemplo 5-1: la funci&#xF3;n draw()</h2>

<p>Para ver c&#xF3;mo funciona el bloque <code>draw()</code> , ejecuta este ejemplo:</p>

<pre data-code-language="p5js" data-type="programlisting">function draw() {
  // Muestra en la consola la cuenta de cuadros
  print(&quot;Estoy dibujando&quot;);
  print(frameCount);
}</pre>

<p class="pagebreak-before">Ver&#xE1;s lo siguiente:</p>

<pre data-type="programlisting">Estoy dibujando
1
Estoy dibujando
2
Estoy dibujando
3
...</pre>

<p>En el programa de ejemplo anterior, las funciones <code>print()</code> escriben el texto &quot;Estoy dibujando&quot; seguido del contador actual de cuadros, tarea efectuada por la variable especial <code>frameCount</code> (1, 2, 3, &#x2026;). El texto aparece en la consola de tu navegador.</p>
</section>

<section data-type="sect2" id="ejemplo-5-2-la-funcion-setup-Y0d2SGM">
<h2>Ejemplo 5-2: la funci&#xF3;n setup()</h2>

<p>Para <a contenteditable="false" data-primary="setup() function" data-type="indexterm" id="sf5">&#xA0;</a>complementar la funci&#xF3;n <code>draw()</code> en bucle, p5.js posee la funci&#xF3;n&#xA0;<code>setup()</code>&#xA0;que solo se ejecuta una vez cuando el programa empieza:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  print(&quot;Estoy empezando&quot;);
}

function draw() {
  print(&quot;Estoy corriendo&quot;);
}</pre>

<p>Cuando corres este c&#xF3;digo, se escribe lo siguiente en la consola:</p>

<pre data-type="programlisting">Estoy empezando
Estoy corriendo
Estoy corriendo
Estoy corriendo
...</pre>

<p>El texto &quot;Estoy corriendo&quot; sigue escribi&#xE9;ndose en la consola hasta que el programa se detenga.</p>

<p>En algunos navegadores, en vez de escribir una y otra vez &quot;Estoy corriendo&quot;, lo imprimir&#xE1; solamente una vez, y despu&#xE9;s por cada vez adicional, incrementar&#xE1; un n&#xFA;mero junto a la l&#xED;nea, representando el n&#xFA;mero total de veces que la l&#xED;nea ha sido impresa sucesivamente.</p>

<p>En un programa t&#xED;pico, el c&#xF3;digo dentro de <code>setup()</code> es usado para definir las condiciones iniciales. La primera l&#xED;nea es usualmente la funci&#xF3;n <code>createCanvas()</code>, a menudo seguida de c&#xF3;digo para definir los colores de relleno y trazado iniciales. (Si no incluyes la funci&#xF3;n <code>createCanvas()</code>, el lienzo para dibujar tendr&#xE1; por defecto una dimensi&#xF3;n de 100x100 pixeles).</p>

<p>Ahora sabes c&#xF3;mo usar <code>setup()</code> y <code>draw()</code>  en mayor detalle, pero esto no es todo.</p>

<p>Hay una ubicaci&#xF3;n adicional d&#xF3;nde has estado poniendo c&#xF3;digo &#x2014; tambi&#xE9;n puedes poner variables globales fuera de <code>setup()</code> y <code>draw()</code>. Esto se hace m&#xE1;s claro cuando anotamos el orden en que el c&#xF3;digo es ejecutado:</p>

<ol>
	<li>
	<p>Se crean las variables declaradas fuera de <code>setup()</code> y <code>draw()</code>.</p>
	</li>
	<li>
	<p>Se ejecuta una vez el c&#xF3;digo dentro de <code>setup()</code>.</p>
	</li>
	<li>
	<p>Se ejecuta continuamente el c&#xF3;digo dentro de <code>draw()</code>.</p>
	</li>
</ol>
</section>

<section data-type="sect2" id="ejemplo-5-3-setup-te-presento-a-draw-w7jjSv7">
<h2>Ejemplo 5-3: setup(), te presento a draw()</h2>

<p>El siguiente ejemplo pone en pr&#xE1;ctica todos estos conceptos:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 280;
var y = -100;
var diameter = 380;

function setup() {
  createCanvas(480, 120);
  fill(102);
}

function draw() {
  background(204);
  ellipse(x, y, diameter, diameter);
}</pre>
<a contenteditable="false" data-primary="draw() function" data-startref="df5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="setup() function" data-startref="sf5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="response to input" data-secondary="setup and draw" data-startref="rti5sad" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="seguir-8MLqSv7">
<h1 class="pagebreak-before">Seguir</h1>

<p>Como <a contenteditable="false" data-primary="response to input" data-secondary="mouse movement tracking" data-type="indexterm" id="rti5mmt">&#xA0;</a>el c&#xF3;digo est&#xE1; ejecut&#xE1;ndose continuamente, podemos seguir la posici&#xF3;n del rat&#xF3;n y usar estos n&#xFA;meros para mover elementos en la pantalla.</p>

<section data-type="sect2" id="ejemplo-5-4-seguir-al-raton-v7P8Sb7">
<h2>Ejemplo 5-4: seguir al rat&#xF3;n</h2>

<p>La variable <code>mouseX</code>&#xA0; almacena la coordenada <em>x</em>, y la variable <code>mouseY</code> almacena la coordenada <em>y</em>:</p>

<figure><img alt="Ex 05 04" class="addBorder" src="assets/images/gspj_05in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  fill(0, 102);
  noStroke();
}

function draw() {
  ellipse(mouseX, mouseY, 9, 9);
}</pre>

<p>En este ejemplo, cada vez que se ejecuta el c&#xF3;digo del bloque <code>draw()</code>, se a&#xF1;ade un nuevo c&#xED;rculo al lienzo. Esta imagen fue hecha moviendo el rat&#xF3;n para controlar la posici&#xF3;n del c&#xED;rculo. Como la funci&#xF3;n de relleno est&#xE1; configurada para ser parcialmente transparente, las &#xE1;reas negras m&#xE1;s densas muestran d&#xF3;nde el rat&#xF3;n estuvo m&#xE1;s tiempo o se movi&#xF3; m&#xE1;s lento. Los c&#xED;rculos que est&#xE1;n m&#xE1;s separados muestran d&#xF3;nde el rat&#xF3;n estuvo movi&#xE9;ndose m&#xE1;s r&#xE1;pido.</p>
</section>

<section data-type="sect2" id="ejemplo-5-5-el-punto-te-persigue-kVabSEM">
<h2>Ejemplo 5-5: el punto te persigue</h2>

<p>En este &#xA0;ejemplo, se a&#xF1;ade un nuevo c&#xED;rculo al lienzo cada vez que el c&#xF3;digo dentro de <code>draw()</code> se ejecuta. Para refrescar la pantalla y solamente  mostrar el c&#xED;rculo m&#xE1;s reciente, escribe la funci&#xF3;n <code>background()</code><a contenteditable="false" data-primary="background() function" data-type="indexterm">&#xA0;</a>al principio del bloque <code>draw()</code>  antes de que la figura sea dibujada:</p>

<figure><img alt="Ex 05 05" src="assets/images/gspj_05in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  fill(0, 102);
  noStroke();
}

function draw() {
  background(204);
  ellipse(mouseX, mouseY, 9, 9);
}</pre>

<p>La funci&#xF3;n <code>background()</code> pinta el lienzo completo, as&#xED; que aseg&#xFA;rate de ponerlo antes que las otras funciones dentro de <code>draw()</code>; si no haces esto, las figuras dibujadas previamente ser&#xE1;n borradas.</p>
</section>

<section data-type="sect2" id="ejemplo-5-6-dibuja-de-forma-continua-P035S8M">
<h2>Ejemplo 5-6: dibuja de forma continua</h2>

<p>Las variables <code>pmouseX</code> y <code>pmouseY</code><a contenteditable="false" data-primary="pmouseX/pmouseY variables" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="drawing" data-secondary="continuous" data-type="indexterm">&#xA0;</a>&#xA0;almacenan la posici&#xF3;n del rat&#xF3;n en el cuadro anterior. Al igual que <code>mouseX</code> y <code>mouseY</code>, estas variables especiales son actualizadas cada vez que se ejecuta <code>draw()</code>. Al combinarlas, pueden ser usadas para dibujar l&#xED;neas continuas al conectar las posiciones actual y m&#xE1;s reciente:</p>

<figure><img alt="Ex 05 06" class="addBorder" src="assets/images/gspj_05in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  strokeWeight(4);
  stroke(0, 102);
}

function draw() {
  line(mouseX, mouseY, pmouseX, pmouseY);
}</pre>
</section>

<section data-type="sect2" id="ex-5-7">
<h2>Ejemplo 5-7: define el grosor sobre la marcha</h2>

<p>Las variables <code>pmouseX</code> y <code>pmouseY</code>&#xA0;<a contenteditable="false" data-primary="lines" data-secondary="setting thickness of" data-type="indexterm">&#xA0;</a>tambi&#xE9;n pueden ser usadas para calcular la velocidad del rat&#xF3;n. Esto se hace midiendo la distancia entre la posici&#xF3;n actual y la m&#xE1;s reciente del rat&#xF3;n. Si el rat&#xF3;n se mueve lentamente, la distancia es peque&#xF1;a, pero si se empieza a mover m&#xE1;s r&#xE1;pido, la distancia se incrementa. Una funci&#xF3;n llamada <a contenteditable="false" data-primary="dist() function" data-type="indexterm">&#xA0;</a><code>dist()</code> simplifica este c&#xE1;lculo, como se muestra en el siguiente ejemplo. Aqu&#xED;, la velocidad del rat&#xF3;n es usada para definir el grosor de la l&#xED;nea dibujada:</p>

<figure><img alt="Ex 05 07" class="addBorder" src="assets/images/gspj_05in05.png">
<figcaption>
</figcaption></figure>

<pre class="pre" data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  stroke(0, 102);
}

function draw() {
  var weight = dist(mouseX, mouseY, pmouseX, pmouseY);
  strokeWeight(weight);
  line(mouseX, mouseY, pmouseX, pmouseY);
}</pre>
</section>

<section data-type="sect2" id="ex-5-8" class="pagebreak-before">
<h2>Ejemplo 5-8: suavizado</h2>

<p>En el <a data-type="xref" href="#ex-5-7">Ejemplo 5-7</a>, los<a contenteditable="false" data-primary="easing" data-type="indexterm" id="e5">&#xA0;</a><a contenteditable="false" data-primary="response to input" data-secondary="easing " data-type="indexterm" id="rti5e">&#xA0;</a>valores del rat&#xF3;n son convertidos directamente en posiciones en la pantalla. Pero a veces queremos que estos valores sigan al rat&#xF3;n m&#xE1;s libremente - que se queden atr&#xE1;s para crear un movimiento m&#xE1;s fluido. Esta t&#xE9;cnica se llama <em>suavizado</em>. En el suavizado, hay dos valores: el valor actual y el valor objetivo (ver <a data-type="xref" href="#Fig_05_01">Figura 5-1</a>). En cada paso del programa, el valor actual se acerca un poco m&#xE1;s al valor objetivo:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 0;
var suavizado = 0.01;

function setup() {
  createCanvas(220, 120);
}

function draw() {
  var objetivoX = mouseX;
  x += (objetivoX - x) * suavizado;
  ellipse(x, 40, 12, 12);
  print(objetivoX + &quot; : &quot; + x);
}</pre>

<p>El valor de la variable <code>x</code> siempre se est&#xE1; acerc&#xE1;ndo a <code>objetivoX</code>. La velocidad con la que se acerca a <code>objetivoX</code> es definida por la variable de <span class="keep-together"><code>suavizado</code></span>, un n&#xFA;mero entre 0 y 1. Un valor peque&#xF1;o de suavizado causa m&#xE1;s retraso que un valor m&#xE1;s grande. Con un valor de suavizado de 1, no hay retraso. Cuando ejecutas el <a data-type="xref" href="#ex-5-8">Ejemplo 5-8</a>, los valores son mostrados en la consola a trav&#xE9;s de la funci&#xF3;n<a contenteditable="false" data-primary="print() function" data-type="indexterm">&#xA0;</a> <code>print()</code>. Cuando mueves el rat&#xF3;n, observa c&#xF3;mo los n&#xFA;meros est&#xE1;n alejados, pero cuando dejas de moverlo, el valor de <code>x</code> se acerca al valor de <code>objetivoX</code>.</p>

<figure id="Fig_05_01"><img alt="Fig 05 01" src="assets/images/gspj_0501.png">
<figcaption><b>Figura 5-1. </b>El suavizado cambia el n&#xFA;mero de pasos necesarios para ir de un lugar a otro</figcaption>
</figure>

<p>Todo el trabajo en este ejemplo ocurre en la l&#xED;nea que empieza con <code>x +=</code>. Ah&#xED;, se calcula la diferencia entre el valor objetivo y el actual, y luego es multiplicada por la variable <code>suavizado</code> y sumada a <code>x</code> para acercarla m&#xE1;s al objetivo.</p>
</section>

<section data-type="sect2" class="pagebreak-before" id="ejemplo-5-9-suaviza-las-lineas-e0BnS50">
<h2>Ejemplo 5-9: suaviza las l&#xED;neas</h2>

<p>En este <a contenteditable="false" data-primary="lines" data-secondary="smoothing with easing" data-type="indexterm">&#xA0;</a>ejemplo, la t&#xE9;cnica de suavizado es aplicada al <a data-type="xref" href="#ex-5-7">Ejemplo 5-7</a>. En comparaci&#xF3;n, las l&#xED;neas son m&#xE1;s fluidas:</p>

<figure><img alt="Ex 05 09" class="addBorder" src="assets/images/gspj_05in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var x = 0;
var y = 0;
var px = 0;
var py = 0;
var suavizado = 0.05;

function setup() {
  createCanvas(480, 120);
  stroke(0, 102);
}

function draw() {
  var objetivoX = mouseX;
  x += (objetivoX - x) * suavizado;
  var objetivoY = mouseY;
  y += (objetivoX - y) * suavizado;
  var peso = dist(x, y, px, py);
  strokeWeight(peso);
  line(x, y, px, py);
  py = y;
  px = x;
}</pre>
<a contenteditable="false" data-primary="easing" data-startref="e5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="response to input" data-secondary="easing" data-startref="rti5e" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="response to input" data-secondary="mouse movement tracking" data-startref="rti5mmt" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" class="pagebreak-before" id="click-E01XSA7">
<h1>Click</h1>

<p>Adem&#xE1;s<a contenteditable="false" data-primary="clicks, mouse" data-type="indexterm" id="cm5">&#xA0;</a><a contenteditable="false" data-primary="response to input" data-secondary="mouse clicks" data-type="indexterm" id="rti3mc">&#xA0;</a><a contenteditable="false" data-primary="mouse clicks" data-type="indexterm" id="mc5">&#xA0;</a>de la ubicaci&#xF3;n del rat&#xF3;n, p5.js tambi&#xE9;n mantiene registro de si el bot&#xF3;n del rat&#xF3;n es presionado o no. La variable <code>mouseIsPressed</code><a contenteditable="false" data-primary="mouseIsPressed variable" data-type="indexterm">&#xA0;</a> tiene un valor distinto cuando el bot&#xF3;n del rat&#xF3;n est&#xE1; presionado. La variable <code>mouseIsPressed</code> es una variable booleana, <a contenteditable="false" data-primary="boolean variables" data-type="indexterm">&#xA0;</a>lo que significa que solo tiene dos valores posibles: <code>true</code> (verdadero) y <code>false</code> (falso). El valor de <code>mouseIsPressed</code> es <code>true</code> cuando un bot&#xF3;n est&#xE1; siendo presionado.</p>

<section data-type="sect2" id="ejemplo-5-10-haz-click-con-el-raton-n0xNSrM">
<h2>Ejemplo 5-10: haz click con el rat&#xF3;n</h2>

<p>La variable <code>mouseIsPressed</code> es usada en conjunto con la declaraci&#xF3;n <code>if</code> para determinar si una l&#xED;nea de c&#xF3;digo ser&#xE1; ejecutada o no. Prueba este ejemplo antes de que sigamos explicando:</p>

<figure><img alt="Ex 05 10" src="assets/images/gspj_05in07.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(240, 120);
  strokeWeight(30);
}

function draw() {
  background(204);
  stroke(102);
  line(40, 0, 70, height);
  if (mouseIsPressed == true) {
    stroke(0);
  }
  line(0, 70, width, 50);
}</pre>

<p class="pagebreak-before">En este programa, el c&#xF3;digo dentro del bloque <code>if</code> solamente se ejecuta cuando se presiona un bot&#xF3;n del rat&#xF3;n. Cuando no se presiona un bot&#xF3;n, el c&#xF3;digo es ignorado. Tal como el bucle <code>for</code> discutido en <a data-type="xref" href="#repetition">Repetici&#xF3;n</a>, el bloque <code>if</code> tambi&#xE9;n tiene una <code>prueba</code> que es evaluada a <code>true</code> o <code>false</code>:</p>

<pre data-code-language="p5js" data-type="programlisting">if (prueba) {
  instrucciones
}</pre>

<p>Cuando la prueba es <code>true</code>, el c&#xF3;digo dentro del bloque se ejecuta; cuando es <code>false</code>, el c&#xF3;digo dentro del bloque no se ejecuta. El computador determina si la prueba es <code>true</code> o <code>false</code> al evaluar la expresi&#xF3;n dentro de los par&#xE9;ntesis. (Si quieres refrescar tu memoria, el <a data-type="xref" href="#ex-4-6">Ejemplo 4-6</a> discute en mayor detalle las expresiones relacionales).</p>

<p>El s&#xED;mbolo <code>==</code><a contenteditable="false" data-primary="== (equal to) operator" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="= (assignment) operator" data-type="indexterm">&#xA0;</a>compara los valores a la izquierda y a la derecha para probar si son equivalentes o no. El s&#xED;mbolo <code>==</code> es distinto del operador de asignaci&#xF3;n, el s&#xED;mbolo unitario <code>=</code>. El s&#xED;mbolo <code> ==</code> pregunta, &quot;&#xBF;son estos elementos iguales?&quot; mientras que el s&#xED;mbolo <code>=</code> define el valor de una variable.</p>

<div data-type="note" id="b0Z2Iq0">
<p>Es un error com&#xFA;n, incluso de programadores avanzados, escribir <code>=</code> en el c&#xF3;digo en lugar de <code>==</code>. p5.js no siempre te advertir&#xE1; cu&#xE1;ndo lo hagas, as&#xED; que s&#xE9; cuidadoso.</p>
</div>

<p>De forma alternativa, la prueba en <code>draw()</code> se puede escribir as&#xED;:</p>

<pre data-code-language="p5js" data-type="programlisting">if (mouseIsPressed) {</pre>

<p>Las variables boolean, incluyendo a <code>mouseIsPressed</code>, no necesitan la comparaci&#xF3;n expl&#xED;cita con el operador <code>==</code>, porque su valor solamente puede ser <code>true</code> o <code>false</code>.</p>
</section>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-5-11-deteccion-de-no-hacer-click-b0ZNSO0">
<h2>Ejemplo 5-11: detecci&#xF3;n de no hacer click</h2>

<p>Un bloque <code>if</code> te da la oportunidad de ejecutar una porci&#xF3;n de c&#xF3;digo o de ignorarla. Puedes extender la funcionalidad del bloque <code>if</code> con un bloque <code>else</code>, permitiendo que tu programa escoja entre dos opciones. El c&#xF3;digo dentro del bloque <code>else</code>  se ejecuta cuando el valor de la prueba del bloque <code>if</code> es <code>false</code>. Por ejemplo, el color de trazado de un programa puede ser blanco cuando el bot&#xF3;n del rat&#xF3;n no es presionado y puede cambiar a negro cuando s&#xED; es presionado:</p>

<figure><img alt="Ex 05 11" src="assets/images/gspj_05in08.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(240, 120);
  strokeWeight(30);
}

function draw() {
  background(204);
  stroke(102);
  line(40, 0, 70, height);
  if (mouseIsPressed) {
    stroke(0);
  } else {
    stroke(255);
  }
  line(0, 70, width, 50);
}</pre>
</section>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-5-12-multiples-botones-del-raton-p09dSD7">
<h2>Ejemplo 5-12: m&#xFA;ltiples botones del rat&#xF3;n</h2>

<p>p5.js tambi&#xE9;n lleva registro de qu&#xE9; bot&#xF3;n del rat&#xF3;n es presionado, si es que tienes m&#xE1;s de uno en tu rat&#xF3;n. La variable <code>mouseButton</code> puede tener uno de estos tres valores: <code>LEFT</code> (izquierdo), <code>CENTER</code> (centro), o <code>RIGHT</code> (derecho). Para revisar cu&#xE1;l bot&#xF3;n es presionado, se necesita el operador <code>==</code>, como se muestra a continuaci&#xF3;n:</p>

<figure><img alt="Ex 05 12" src="assets/images/gspj_05in09.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  strokeWeight(30);
}

function draw() {
  background(204);
  stroke(102);
  line(40, 0, 70, height);
  if (mouseIsPressed) {
    if (mouseButton == LEFT) {
      stroke(255);
    } else {
      stroke(0);
    }
    line(0, 70, width, 50);
  }
}</pre>

<p>Un programa puede tener muchos m&#xE1;s bloques <code>if</code> y <code>else</code> (ver <a data-type="xref" href="#Fig_05_02">Figura 5-2</a>) que los encontrados en estos ejemplos cortos. Pueden ser concatenadas en una larga serie con distintas pruebas, y los bloques <code>if</code> pueden estar anidados dentro de otros bloques <code>if</code> para tomar decisiones m&#xE1;s complejas.</p>

<figure id="Fig_05_02"><img alt="Fig 05 02" src="assets/images/gspj_0502.png">
<figcaption><b>Figura 5-2. </b>La estructura if y else toma decisiones sobre cu&#xE1;les bloques de c&#xF3;digo se ejecutar&#xE1;n.</figcaption>
</figure>
</section>
</section>

<section data-type="sect1" id="ubicacion-4VAYSwV">
<h1>Ubicaci&#xF3;n</h1>

<p>Una estructura <code>if</code><a contenteditable="false" data-primary="cursor location" data-type="indexterm" id="cl5">&#xA0;</a><a contenteditable="false" data-primary="clicks, mouse" data-startref="cm5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="mouse clicks" data-startref="mc5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="response to input" data-secondary="mouse clicks" data-startref="rti3mc" data-type="indexterm">&#xA0;</a>puede ser usada con los valores <code>mouseX</code> y <code>mouseY</code><a contenteditable="false" data-primary="response to input" data-secondary="cursor location" data-type="indexterm" id="rti3cl">&#xA0;</a>para determinar la ubicaci&#xF3;n del cursor dentro de la ventana.</p>

<section data-type="sect2" id="ejemplo-5-13-encuentra-el-cursor-ZMqKS90">
<h2>Ejemplo 5-13: encuentra el cursor</h2>

<p>En este ejemplo, buscamos el cursor para revisar si est&#xE1; a la izquierda o a la derecha de una l&#xED;nea y luego movemos la l&#xED;nea hacia el cursor:</p>

<figure><img alt="Ex 05 13" src="assets/images/gspj_05in10.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var x;
var offset = 10;

function setup() {
  createCanvas(240, 120);
  x = width/2;
}

function draw() {
  background(204);
  if (mouseX &gt; x) {
    x += 0.5;
    offset = -10;
  }
  if (mouseX &lt; x) {
    x -= 0.5;
    offset = 10;
  }
  // Dibuja flecha izquierda o derecha seg&#xFA;n el valor &quot;offset&quot;
  line(x, 0, x, height);
  line(mouseX, mouseY, mouseX + offset, mouseY - 10);
  line(mouseX, mouseY, mouseX + offset, mouseY + 10);
  line(mouseX, mouseY, mouseX + offset*3, mouseY);
}</pre>

<p>Para escribir programas que tengan interfaces gr&#xE1;ficas de usuario (botones, casillas, barras deslizadoras, etc.) necesitamos escribir c&#xF3;digo que sepa cuando el cursor est&#xE1; dentro de un &#xE1;rea de la pantalla. Los siguientes dos ejemplos muestran c&#xF3;mo verificar si el cursor est&#xE1; dentro de un c&#xED;rculo y de un rect&#xE1;ngulo. El c&#xF3;digo est&#xE1; escrito de forma modular y con variables, para que pueda ser usado para comprobar con <em>cualquier</em> c&#xED;rculo o rect&#xE1;ngulo mediante la modificaci&#xF3;n de los valores.</p>
</section>

<section data-type="sect2" id="ejemplo-5-14-los-bordes-de-un-circulo-rM8NSD0">
<h2>Ejemplo 5-14: los bordes de un c&#xED;rculo</h2>

<p>Para<a contenteditable="false" data-primary="circles" data-secondary="cursor position relative to" data-type="indexterm" id="c5cprt">&#xA0;</a>la prueba con el c&#xED;rculo, usamos la funci&#xF3;n <code>dist()</code>&#xA0;<a contenteditable="false" data-primary="dist() function" data-type="indexterm">&#xA0;</a>para obtener la distancia desde el centro del c&#xED;rculo al cursor, luego comprobamos si este valor es menor que el radio del c&#xED;rculo (ver <a data-type="xref" href="#Fig_05_03">Figura 5-3</a>). Si lo es, sabemos que estamos dentro del c&#xED;rculo. En este ejemplo, cuando el cursor est&#xE1; dentro del &#xE1;rea del c&#xED;rculo, su tama&#xF1;o aumenta:</p>

<figure><img alt="Ex 05 14" src="assets/images/gspj_05in11.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var x = 120;
var y = 60;
var radio = 12;

function setup() {
  createCanvas(240, 120);
  ellipseMode(RADIUS);
}

function draw() {
  background(204);
  var d = dist(mouseX, mouseY, x, y);
  if (d &lt; radio) {
    radio++;
    fill(0);
  } else {
    fill(255);
  }
  ellipse(x, y, radio, radio);
}</pre>

<figure id="Fig_05_03"><img alt="Fig 05 03" src="assets/images/gspj_0503.png">
<figcaption><b>Figura 5-3. </b>Prueba del c&#xED;rculo. Cuando la distancia entre el rat&#xF3;n y el c&#xED;rculo es menor que el radio, el rat&#xF3;n esta dentro del c&#xED;rculo.</figcaption>
</figure>
</section>

<section data-type="sect2" id="ejemplo-5-15-los-bordes-de-un-rectangulo-QVzkSoM">
<h2>Ejemplo 5-15: los bordes de un rect&#xE1;ngulo</h2>

<p>Usaremos&#xA0;<a contenteditable="false" data-primary="circles" data-secondary="cursor position relative to" data-startref="c5cprt" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="rectangles" data-secondary="cursor position relative to" data-type="indexterm" id="r5cprt">&#xA0;</a>otro enfoque para comprobar si el cursor est&#xE1; dentro de un rect&#xE1;ngulo. Hacemos cuatro pruebas separadas para comprobar si el cursor est&#xE1; en el lado correcto de cada uno de los lados del rect&#xE1;ngulo, luego comparamos cada resultado de las pruebas y si todas son <code>true</code>, entonces sabemos que el cursor est&#xE1; dentro. Esto es ilustrado en <a data-type="xref" href="#Fig_05_04">Figura 5-4</a>. Cada uno de los pasos es simple, pero se ven complicados al combinarlos:</p>

<figure><img alt="Ex 05 15" src="assets/images/gspj_05in12.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var x = 80;
var y = 30;
var w = 80;
var h = 60;

function setup() {
  createCanvas(240, 120);
}

function draw() {
  background(204);
  if ((mouseX &gt; x) &amp;&amp; (mouseX &lt; x+w) &amp;&amp;
      (mouseY &gt; y) &amp;&amp; (mouseY &lt; y+h)) {
    fill(0);
  }
  else {
    fill(255);
  }
  rect(x, y, w, h);
}</pre>

<p>La prueba en la declaraci&#xF3;n <code>if</code> es un poco m&#xE1;s complicada que lo visto hasta el momento. Cuatro pruebas individuales (como <code>mouseX &gt; x</code>) son combinadas con el operador l&#xF3;gico <code>AND</code>, el s&#xED;mbolo <code>&amp;&amp;</code> <a contenteditable="false" data-primary="&amp;&amp; (logical AND) operator" data-type="indexterm">&#xA0;</a>, para asegurar que cada expresi&#xF3;n relacional en la secuencia sea <code>true</code>. Si alguna de ellas es <code>false</code>, la prueba completa es <code>false</code> y el color de relleno no ser&#xE1; negro.</p>

<figure id="Fig_05_04"><img alt="Fig 05 04" src="assets/images/gspj_0504.png">
<figcaption><b>Figura 5-4. </b>Prueba del rect&#xE1;ngulo. Cuando se combinan las cuatro pruebas y resultan true, el cursor est&#xE1; dentro del rect&#xE1;ngulo.</figcaption>
</figure>
</section>
</section>

<section data-type="sect1" class="pagebreak-before" id="tipo-27g6SYM">
<h1>Tipo</h1>

<p>p5.js mantiene<a contenteditable="false" data-primary="typing, responses to" data-type="indexterm" id="trt5"></a><a contenteditable="false" data-primary="response to input" data-secondary="keystrokes" data-type="indexterm" id="rti5ks"></a><a contenteditable="false" data-primary="rectangles" data-secondary="cursor position relative to" data-startref="r5cprt" data-type="indexterm"></a><a contenteditable="false" data-primary="cursor location" data-startref="cl5" data-type="indexterm"></a><a contenteditable="false" data-primary="response to input" data-secondary="cursor location" data-startref="rti3cl" data-type="indexterm"></a><a contenteditable="false" data-primary="keystroke responses" data-type="indexterm" id="kr5"></a> el registro de cualquier tecla que sea presionada en el teclado, adem&#xE1;s de la &#xFA;ltima tecla presionada. Tal como la variable <code>mouseIsPressed</code>, la variable <code>keyIsPressed</code><a contenteditable="false" data-primary="keyIsPressed variable" data-type="indexterm">&#xA0;</a> es <code>true</code> cuando cualquier tecla es presionada, y es <code>false</code> cuando no hay teclas presionadas.</p>

<section data-type="sect2" id="ejemplo-5-16-presiona-una-tecla-yM5DSRV">
<h2>Ejemplo 5-16: presiona una tecla</h2>

<p>En este ejemplo, la segunda l&#xED;nea solamente es dibujada cuando hay una tecla presionada:</p>

<figure><img alt="Ex 05 16" src="assets/images/gspj_05in13.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(240, 120);
}

function draw() {
  background(204);
  line(20, 20, 220, 100);
  if (keyIsPressed) {
    line(220, 20, 20, 100);
  }
}</pre>

<p>La variable <code>key</code> almacena la tecla presionada m&#xE1;s reciente. A diferencia de la variable boolean <code>keyIsPressed</code>, que se revierte a <code>false</code> cada vez que una tecla es soltada, la variable <code>key</code><a contenteditable="false" data-primary="key variable" data-type="indexterm">&#xA0;</a>mantiene su valor hasta que la siguiente tecla es presionada. El siguiente ejemplo usa el valor de <code>key</code> para dibujar el car&#xE1;cter en la pantalla. Cada vez que se presiona una tecla, el valor se actualiza y se dibuja un nuevo car&#xE1;cter. Algunas teclas, como Shift y Alt, no poseen un car&#xE1;cter visible, as&#xED; que si las presionas, nada ser&#xE1; dibujado.</p>
</section>

<section data-type="sect2" id="ejemplo-5-17-dibuja-algunas-letras-Z0rDS4M">
<h2>Ejemplo 5-17: dibuja algunas letras</h2>

<p>Este ejemplo presenta la funci&#xF3;n <code>textSize()</code> <a contenteditable="false" data-primary="textSize() function" data-type="indexterm">&#xA0;</a>para definir el tama&#xF1;o de las letras, la funci&#xF3;n <code>textAlign()</code><a contenteditable="false" data-primary="textAlign() function" data-type="indexterm">&#xA0;</a> para centrar el texto en su coordenada <em>x</em>, y la funci&#xF3;n <code>text()</code> <a contenteditable="false" data-primary="text() function" data-type="indexterm">&#xA0;</a>para dibujar las letras. Estas funciones ser&#xE1;n discutidas en mayor detalle en <a data-type="xref" href="#fonts">Tipos de letra</a>.</p>

<figure><img alt="Ex 05 17" src="assets/images/gspj_05in14.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  textSize(64);
  textAlign(CENTER);
  fill(255);
}

function draw() {
  background(0);
  text(key, 60, 80);
}</pre>

<p>Usando una estructura <code>if</code>, podemos revisar si una tecla espec&#xED;fica es presionada y elegir dibujar algo distinto en la pantalla a modo de respuesta.</p>
</section>

<section data-type="sect2" id="ejemplo-5-18-comprobar-teclas-especificas-vVnNSkV">
<h2>Ejemplo 5-18: comprobar teclas espec&#xED;ficas</h2>

<p>En este ejemplo, revisamos si las teclas N o H son presionadas. Usamos el operador de comparaci&#xF3;n, el s&#xED;mbolo <code>==</code> <a contenteditable="false" data-primary="== (equal to) operator" data-type="indexterm">&#xA0;</a>, para revisar si el valor de la variable <code>key</code> es igual a los caracteres que estamos buscando:</p>

<figure><img alt="Ex 05 18" src="assets/images/gspj_05in15.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
}

function draw() {
  background(204);
  if (keyIsPressed) {
    if ((key == &apos;h&apos;) || (key == &apos;H&apos;)) {
      line(30, 60, 90, 60);
    }
    if ((key == &apos;n&apos;) || (key == &apos;N&apos;)) {
      line(30, 20, 90, 100);
    }
  }
  line(30, 20, 30, 100);
  line(90, 20, 90, 100);
}</pre>

<p>Cuando revisamos si est&#xE1; siendo presionada la tecla H o la N, necesitamos revisar tanto para las letras en may&#xFA;scula como en min&#xFA;scula, en caso de que alguien presione la tecla Shift o tenga la funci&#xF3;n Caps Lock activada. Combinamos ambas pruebas con el operador l&#xF3;gico OR, <a contenteditable="false" data-primary="|| (logical OR) operator" data-type="indexterm">&#xA0;</a>el s&#xED;mbolo <code>||</code>. Si traducimos la segunda instrucci&#xF3;n <code>if</code> <a contenteditable="false" data-primary="if statements" data-type="indexterm">&#xA0;</a>de este ejemplo a lenguaje plano, dice, &quot;Si se presiona la tecla &apos;h&apos; OR la tecla &apos;H&apos;.&quot; A diferencia del operador l&#xF3;gico AND (el s&#xED;mbolo <code>&amp;&amp;</code>), solamente una de estas expresiones necesita ser <code>true</code> para que la prueba completa sea <code>true</code>.</p>

<p>Algunas teclas son m&#xE1;s dif&#xED;ciles de detectar, porque no est&#xE1;n asociadas a una letra en particular. Teclas como  Shift, Alt, y las <a contenteditable="false" data-primary="arrow keys, detecting" data-type="indexterm">&#xA0;</a>teclas de flecha est&#xE1;n codificadas. Tenemos que revisar el c&#xF3;digo con la variable <code>keyCode</code> <a contenteditable="false" data-primary="keyCode variable" data-type="indexterm">&#xA0;</a>para saber qu&#xE9; tecla es. Los valores m&#xE1;s frecuentes de <code>keyCode</code> son <code>ALT</code>, <code>CONTROL</code>, y <code>SHIFT</code>, adem&#xE1;s de las teclas de flechas, <code>UP_ARROW</code> (arriba), <code>DOWN_ARROW</code> (abajo), <code>LEFT_ARROW</code> (izquierda), y <code>RIGHT_ARROW</code> (derecha).</p>
</section>

<section data-type="sect2" id="ejemplo-5-19-mover-con-las-flechas-gVydSn0">
<h2>Ejemplo 5-19: mover con las flechas</h2>

<p>El siguiente ejemplo muestra c&#xF3;mo usar las flechas izquierda y derecha para mover un rect&#xE1;ngulo:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 215;

function setup() {
  createCanvas(480, 120);
}

function draw() {
  if (keyIsPressed) {
    if (keyCode == LEFT_ARROW) {
      x--;
    }
    else if (keyCode == RIGHT_ARROW) {
      x++;
    }
  }
  rect(x, 45, 50, 50);
}</pre>
<a contenteditable="false" data-primary="response to input" data-secondary="keystrokes" data-startref="rti5ks" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="keystroke responses" data-startref="kr5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="typing, responses to" data-startref="trt5" data-type="indexterm"></a></section>
</section>

<section data-type="sect1" id="tacto-K725SBM">
<h1>Tacto</h1>

<p>Para <a contenteditable="false" data-primary="response to input" data-secondary="touchscreens" data-type="indexterm">&#xA0;</a>dispositivos que lo soportan, p5.js mantiene registo de si la pantalla es tocada y su ubicaci&#xF3;n. Usa la variable <code>mouseIsPressed</code>, que es <code>true</code> cuando la pantalla es tocada y <code>false</code> cuando no.</p>

<section data-type="sect2" id="ejemplo-5-20-toca-la-pantalla-z7ebSW0">
<h2>Ejemplo 5-20: toca la pantalla</h2>

<p>En este ejemplo, la segunda l&#xED;nea es dibujada solo si la pantalla es tocada:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(240, 120);
}

function draw() {
  background(204);
  line(20, 20, 220, 100);
  if (mouseIsPressed) {
    line(220, 20, 20, 100);
  }
}</pre>

<p>Las variables <code>mouseX</code> y <code>mouseY</code> almacenan las coordenadas <em>x</em> e <em>y</em> del punto donde la pantalla est&#xE1; siendo tocada.</p>
</section>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-5-21-rastrea-el-dedo-QVJqS90">
<h2>Ejemplo 5-21: rastrea el dedo</h2>

<p>En &#xA0;este ejemplo, un c&#xED;rculo nuevo es a&#xF1;adido al lienzo cada vez que se ejecuta el c&#xF3;digo en <code>draw()</code>. Para refrescar la pantalla y solamente mostrar el c&#xED;rculo m&#xE1;s reciente, escribe la funci&#xF3;n <code>background()</code><a contenteditable="false" data-primary="background() function" data-type="indexterm">&#xA0;</a>al inicio de <code>draw()</code> antes de dibujar la figura:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  fill(0, 102);
  noStroke();
}

function draw() {
  ellipse(mouseX, mouseY, 15, 15);
}</pre>
</section>
</section>

<section data-type="sect1" id="mapeo-v7kLSg0">
<h1>Mapeo</h1>

<p>Los n&#xFA;meros<a contenteditable="false" data-primary="response to input" data-secondary="mapping" data-type="indexterm" id="rti5map">&#xA0;</a>que son creados por el rat&#xF3;n y por el teclado muchas veces necesitan ser modificados para ser &#xFA;tiles en un programa. Por ejemplo, si un bosquejo tiene un ancho de 1920 pixeles y los valores de <code>mouseX</code> son usados para definir el color del fondo, el rango de 0 a 1920 de <code>mouseX</code> necesitar&#xE1; ser escalado para moverse en un rango de 0 a 255 para controlar mejor el color. Esta transformaci&#xF3;n puede ser hecha con una ecuaci&#xF3;n o con una funci&#xF3;n <a contenteditable="false" data-primary="map() function" data-type="indexterm" id="mapf5">&#xA0;</a>llamada <code>map()</code>.</p>

<section data-type="sect2" id="ex-5-22">
<h2>Ejemplo 5-22: mapeo de valores a un rango</h2>

<p>En este ejemplo, la ubicaci&#xF3;n de dos l&#xED;neas es controlada por la variable <code>mouseX</code><a contenteditable="false" data-primary="mouseX/mouseY variables" data-type="indexterm" id="mxmyv5">&#xA0;</a>. La l&#xED;nea gris est&#xE1; sincronizada con la posici&#xF3;n del cursor, pero la l&#xED;nea negra se mantiene m&#xE1;s cerca del centro de la pantalla y se aleja de la l&#xED;nea blanca en los bordes izquierdos y derechos:</p>

<figure><img alt="Ex 05 22" src="assets/images/gspj_05in16.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(240, 120);
  strokeWeight(12);
}

function draw() {
  background(204);
  stroke(102);
  line(mouseX, 0, mouseX, height);  // L&#xED;nea gris
  stroke(0);
  var mx = mouseX/2 + 60;
  line(mx, 0, mx, height);  // L&#xED;nea negra
}</pre>

<p>La funci&#xF3;n <code>map()</code> es una manera m&#xE1;s general de hacer este tipo de cambio. Convierte una variable desde un rango de valores a otro. El primer par&#xE1;metro es la variable a ser convertida, el segundo y tercer valor son los valores m&#xED;nimo y m&#xE1;ximo de esa variable, y el cuarto y quinto son los valores m&#xED;nimo y m&#xE1;ximo deseados. La funci&#xF3;n <code>map()</code> esconde la matem&#xE1;tica detr&#xE1;s de esta conversi&#xF3;n.</p>
</section>

<section data-type="sect2" id="ejemplo-5-23-mapeo-con-la-funcion-map-30GqS6M">
<h2>Ejemplo 5-23: mapeo con la funci&#xF3;n <code>map()</code></h2>

<p>Este ejemplo reescribe el <a data-type="xref" href="#ex-5-22">Ejemplo 5-22</a> usando <code>map()</code>:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(240, 120);
  strokeWeight(12);
}

function draw() {
  background(204);
  stroke(255);
  line(120, 60, mouseX, mouseY); // L&#xED;nea blanca
  stroke(0);
  var mx = map(mouseX, 0, width, 60, 180);
  line(120, 60, mx, mouseY); // L&#xED;nea negra
}</pre>

<p>La funci&#xF3;n <code>map()</code> hace que el c&#xF3;digo sea f&#xE1;cil de leer, porque los valores m&#xE1;ximo y m&#xED;nimo est&#xE1;n claramente escritos como par&#xE1;metros. En este ejemplo, los valores de <code>mouseX</code> entre 0 y <code>width</code> son convertidos a n&#xFA;meros entre 60 (cuando <code>mouseX</code> es 0) y 180 (cuando <code>mouseX</code> es <code>width</code>). Encontrar&#xE1;s esta &#xFA;til funci&#xF3;n <code>map()</code> en muchos ejemplos a lo largo de este<a contenteditable="false" data-primary="mouseX/mouseY variables" data-startref="mxmyv5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="map() function" data-startref="mapf5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="response to input" data-secondary="mapping" data-startref="rti5map" data-type="indexterm"></a>libro.</p>
</section>
</section>

<section data-type="sect1" id="robot3">
<h1>Robot 3: respuesta</h1>

<figure><img alt="Robot 3" src="assets/images/gspj_05in17.png">
<figcaption>
</figcaption></figure>

<p>Este<a contenteditable="false" data-primary="robot programs (examples)" data-secondary="mouse-responding shapes" data-type="indexterm" id="rp5mrs">&#xA0;</a>programa usa las variables introducidas en Robot 2 (ver <a data-type="xref" href="#robot2">Robot 2: variables</a>) y hace posible cambiarlas mientras el programa es ejecutado de manera que las figuras respondan al rat&#xF3;n. El c&#xF3;digo dentro del bloque <code>draw()</code> es ejecutado muchas veces por segundo. En cada cuadro, las variables definidas en el programa cambian en respuesta a las variables <code>mouseX</code> y <code>mouseIsPressed</code>.</p>

<p>El valor <code>mouseX</code> controla la posici&#xF3;n del robot con la t&#xE9;cnica de suavizado para que los movimientos sean menos instant&#xE1;neos y se vean m&#xE1;s naturales. Cuando se presiona un bot&#xF3;n del rat&#xF3;n, los valores de <code>neckHeight</code> y <code>bodyHeight</code> cambian para hacer m&#xE1;s corto el robot :</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 60;          // Coordenada x
var y = 440;         // Coordenada y
var radius = 45;       // Radio de la cabeza
var bodyHeight = 160;  // Altura del cuerpo
var neckHeight = 70;   // Altura del cuello

var suavizado = 0.04;

function setup() {
  createCanvas(360, 480);
  strokeWeight(2);
  ellipseMode(RADIUS);
}

function draw() {

  var targetX = mouseX;
  x += (targetX - x) * suavizado;

  if (mouseIsPressed) {
    neckHeight = 16;
    bodyHeight = 90;
  } else {
    neckHeight = 70;
    bodyHeight = 160;
  }

  var neckY = y - bodyHeight - neckHeight - radius;

  background(204);

  // Cuello
  stroke(102);
  line(x+12, y-bodyHeight, x+12, neckY);

  // Antenas
  line(x+12, neckY, x-18, neckY-43);
  line(x+12, neckY, x+42, neckY-99);
  line(x+12, neckY, x+78, neckY+15);

  // Cuerpo
  noStroke();
  fill(102);
  ellipse(x, y-33, 33, 33);
  fill(0);
  rect(x-45, y-bodyHeight, 90, bodyHeight-33);

  // Cabeza
  fill(0);
  ellipse(x+12, neckY, radius, radius);
  fill(255);
  ellipse(x+24, neckY-6, 14, 14);
  <!--Page Break--><br class="pagebreak-after">
  fill(0);
  ellipse(x+24, neckY-6, 3, 3);
}</pre>
<a contenteditable="false" data-primary="response to input" data-startref="rti5" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="robot programs (examples)" data-secondary="mouse-responding shapes" data-startref="rp5mrs" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="Z1m2CkX">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-06-touches"><img src="assets/images/gspj_06in01.png"><figcaption></figcaption></figure>
</section>

<section data-type="chapter" id="translate" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Trasladar, rotar, escalar</h1>

<p class="lede">Una t&#xE9;cnica alternativa para posicionar y mover objetos en la pantalla es cambiar el sistema de coordenadas de la pantalla. Por ejemplo, puedes mover una figura 50 pixeles a la derecha, o puedes mover la ubicaci&#xF3;n de la coordenada (0,0) 50 pixeles a la derecha - el resultado visual en la pantalla es el mismo.</p>

<p>Al modificar el sistema de coordenadas por defecto, podemos crear diferentes&#xA0;<a contenteditable="false" data-primary="transformations" data-type="indexterm">&#xA0;</a><em>transformaciones</em>&#xA0;incluyendo&#xA0;<em>traslaci&#xF3;n</em>,&#xA0;<em>rotaci&#xF3;n</em>, y <span class="keep-together"><em>escalamiento</em></span>.</p>

<section data-type="sect1" id="traslacion-exBbS8x">
<h1>Traslaci&#xF3;n</h1>

<p>Trabajar<a contenteditable="false" data-primary="translating locations" data-type="indexterm" id="tl6">&#xA0;</a>con transformaciones puede ser dif&#xED;cil, pero la funci&#xF3;n&#xA0;<code>translate()</code>&#xA0;<a contenteditable="false" data-primary="translate() function" data-type="indexterm" id="tf6">&#xA0;</a>es la m&#xE1;s sencilla, as&#xED; que empezaremos con esta. Tal como la <a data-type="xref" href="#Fig_06_01">Figura 6-1</a> muestra, esta funci&#xF3;n puede trasladar el sistema de coordenadas hacia la izquierda, derecha, arriba y abajo.</p>

<figure id="Fig_06_01"><img alt="Fig 06 01" src="assets/images/gspj_0601.png">
<figcaption><b>Figura 6-1. </b>Trasladando las coordenadas</figcaption>
</figure>

<section data-type="sect2" id="ejemplo-6-1-trasladando-una-posicion-VWvQSlx">
<h2>Ejemplo 6-1: trasladando una posici&#xF3;n</h2>

<p>En este ejemplo, observa que el rect&#xE1;ngulo est&#xE1; dibujado en la coordenada (0,0), pero est&#xE1; en otra posici&#xF3;n en el lienzo, porque es afectado por la funci&#xF3;n <code>translate()</code>:</p>

<figure><img alt="Ex 06 01" src="assets/images/gspj_06in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  translate(mouseX, mouseY);
  rect(0, 0, 30, 30);
}</pre>

<p>La funci&#xF3;n&#xA0;<code>translate()</code>&#xA0; define la coordenada (0,0) de la pantalla en la ubicaci&#xF3;n del rat&#xF3;n (<code>mouseX</code>&#xA0;y&#xA0;<code>mouseY</code>). Cada vez que el bloque &#xA0;<code>draw()</code>&#xA0;se repite, el&#xA0;<code>rect()</code>&#xA0;es dibujado en el nuevo origen,&#xA0;derivado de la posici&#xF3;n actual del rat&#xF3;n.&#xA0;</p>
</section>

<section data-type="sect2" id="ejemplo-6-2-traslaciones-multiples-6YgvSoN">
<h2>Ejemplo 6-2: traslaciones m&#xFA;ltiples</h2>

<p>Despu&#xE9;s de que la transformaci&#xF3;n es realizada, es aplicada a todas las funciones de dibujo a continuaci&#xF3;n. Observa lo que pasa cuando una segunda funci&#xF3;n <code>translate</code> fes a&#xF1;adida para controlar un segundo rect&#xE1;ngulo:</p>

<figure><img alt="Ex 06 02" src="assets/images/gspj_06in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  translate(mouseX, mouseY);
  rect(0, 0, 30, 30);
  translate(35, 10);
  rect(0, 0, 15, 15);
}</pre>

<p>Los valores para la funci&#xF3;n&#xA0;<code>translate()</code>&#xA0;se suman. El rect&#xE1;ngulo peque&#xF1;o es trasladado seg&#xFA;n&#xA0;<code>mouseX</code>&#xA0;+ 35 y&#xA0;<code>mouseY</code>&#xA0;+ 10. Las coordenadas <em>x</em> e <em>y</em> de ambos rect&#xE1;ngulos son (0,0), pero las funciones <code>translate()</code> los mueven a otras posiciones en el lienzo.</p>

<p>Sin embargo, incluso cuando las transformaciones se acumulan dentro del bloque&#xA0;<code>draw()</code>, se anulan cada vez que la funci&#xF3;n <a contenteditable="false" data-primary="translate() function" data-startref="tf6" data-type="indexterm"></a>time&#xA0;<code>draw()</code>&#xA0;se ejecuta nuevamente desde el <a contenteditable="false" data-primary="translating locations" data-startref="tl6" data-type="indexterm"></a>principio.</p>
</section>
</section>

<section data-type="sect1" id="rotacion-zY2aSVN">
<h1>Rotaci&#xF3;n</h1>

<p>La funci&#xF3;n <code>rotate()</code> <a contenteditable="false" data-primary="rotate() function" data-type="indexterm">&#xA0;</a>rota el sistema de coordenadas. Tiene un par&#xE1;metro, que es el &#xE1;ngulo (en radianes) a rotar. Siempre rota relativo a (0,0), lo que se conoce como rotar en torno al <em>origen</em>. <a data-type="xref" href="#Fig_03_02">Figura 3-2</a> muestra los valores de &#xE1;ngulo en radianes. <a data-type="xref" href="#Fig_06_02">Figura 6-2</a> muestra la diferencia entre rotar con n&#xFA;meros positivos y negativos.</p>

<figure id="Fig_06_02"><img alt="Fig 06 02" src="assets/images/gspj_0602.png">
<figcaption><b>Figura 6-2. </b>Rotando las coordenadas</figcaption>
</figure>

<section data-type="sect2" id="ejemplo-6-3-rotacion-de-esquina-0xVRS7x">
<h2>Ejemplo 6-3: rotaci&#xF3;n de esquina</h2>

<p>Para &#xA0;rotar una figura, primero define el &#xE1;ngulo de rotaci&#xF3;n con <code>rotate()</code>, luego dibuja la figura. En este bosquejo, el par&#xE1;metro para rotar (<code>mouseX / 100.0</code>) tendr&#xE1; un valor entre 0 y 1.2 para definir el &#xE1;ngulo de rotaci&#xF3;n porque <code>mouseX</code> tendr&#xE1; un valor entre 0 y 120, el ancho del lienzo seg&#xFA;n lo definido <a contenteditable="false" data-primary="createCanvas() function" data-type="indexterm">&#xA0;</a>en <code>createCanvas()</code>:</p>

<figure><img alt="Ex 06 03" src="assets/images/gspj_06in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  rotate(mouseX / 100.0);
  rect(40, 30, 160, 20);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-6-4-rotacion-del-centro-JNweS4x">
<h2>Ejemplo 6-4: rotaci&#xF3;n del centro</h2>

<p>Para rotar &#xA0;una figura en torno a su propio centro, debe ser dibujada con la coordenada (0,0) en su centro. En este ejemplo, como la figura tiene un ancho de 160 y una altura de 20 seg&#xFA;n lo definido en la funci&#xF3;n <code>rect()</code>, es dibujada en la coordenada (-80, -10) para poner la coordenada (0,0) al centro de la figura:</p>

<figure><img alt="Ex 06 04" src="assets/images/gspj_06in05.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  rotate(mouseX / 100.0);
  rect(-80, -10, 160, 20);
}</pre>

<p>El anterior par de ejemplos muestra c&#xF3;mo rotar alrededor de la coordenada (0,0), &#xBF;pero qu&#xE9; otras posibilidades hay? Puedes usar las funciones <code>translate()</code> y <code>rotate()</code> para mayor control. Cuando son combinadas, el orden en que aparecen afecta el resultado. Si el sistema de coordenadas es trasladado y despu&#xE9;s rotado, es distinto que primero rotar y despu&#xE9;s mover el sistema de coordenadas.</p>
</section>

<section data-type="sect2" id="ex-6-5">
<h2>Ejemplo 6-5: traslaci&#xF3;n, despu&#xE9;s rotaci&#xF3;n</h2>

<p>Para girar una figura en torno a su centro a un lugar en la pantalla lejos del origen, primero usa la funci&#xF3;n <code>translate()</code> para <a contenteditable="false" data-primary="translate() function" data-type="indexterm" id="tf6x">&#xA0;</a>mover la figura a la ubicaci&#xF3;n donde quieres la figura, luego usa <code>rotate()</code>, y luego dibuja la figura con su centro en la coordenada (0,0):</p>

<figure><img alt="Ex 06 05" src="assets/images/gspj_06in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var angle = 0.0;

function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  translate(mouseX, mouseY);
  rotate(angle);
  rect(-15, -15, 30, 30);
  angle += 0.1;
}</pre>
</section>

<section data-type="sect2" id="ejemplo-6-6-rotacion-despues-traslacion-mW1eSDW">
<h2>Ejemplo 6-6: rotaci&#xF3;n, despu&#xE9;s traslaci&#xF3;n</h2>

<p>El siguiente ejemplo es id&#xE9;ntico a <a data-type="xref" href="#ex-6-5">Ejemplo 6-5</a>, excepto que <code>translate()</code> y <code>rotate()</code> ocurren en el orden inverso. La figura ahora rota alrededor de la esquina superior izquierda, con la distancia desde la esquina definida por <code>translate()</code>:</p>

<figure><img alt="Ex 06 06" src="assets/images/gspj_06in07.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var angle = 0.0;

function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  rotate(angle);
  translate(mouseX, mouseY);
  rect(-15, -15, 30, 30);
  angle += 0.1;
}</pre>

<div data-type="note" id="JxZBTKx">
<p>Tambi&#xE9;n puedes usar las funciones <code>rectMode()</code>, <code>ellipseMode()</code> y <code>imageMode()</code> para hacer m&#xE1;s simple el dibujo de figuras desde su centro.&#xA0;Puedes leer sobre estas funciones en la <em>Referencia de p5.js</em>.</p>
</div>
</section>

<section data-type="sect2" id="ejemplo-6-7-un-brazo-articulado-JxZ9SvY">
<h2>Ejemplo 6-7: un brazo articulado</h2>

<p>En este ejemplo, hemos unido una serie de funciones <code>translate()</code> y <code>rotate()</code> para crear un brazo articulado. Cada funci&#xF3;n <code>translate()</code> mueve la posici&#xF3;n de las l&#xED;neas, y cada funci&#xF3;n <code>rotate()</code> a&#xF1;ade a la rotaci&#xF3;n previa para poder girar m&#xE1;s:</p>

<figure><img alt="Ex 06 07" src="assets/images/gspj_06in08.png">
<figcaption>
</figcaption></figure>

<pre class="pre" data-code-language="p5js" data-type="programlisting">var angle = 0.0;
var angleDirection = 1;
var speed = 0.005;

function setup() {
  createCanvas(120, 120);
}

function draw() {
  background(204);
  translate(20, 25);  // Mover a la posici&#xF3;n inicial
  rotate(angle);
  strokeWeight(12);
  line(0, 0, 40, 0);
  translate(40, 0);   //Mover a la siguiente articulaci&#xF3;n
  rotate(angle * 2.0);
  strokeWeight(6);
  line(0, 0, 30, 0);
  translate(30, 0);   // Mover a la siguiente articulaci&#xF3;n
  rotate(angle * 2.5);
  strokeWeight(3);
  line(0, 0, 20, 0);

  angle += speed * angleDirection;
  if ((angle &gt; QUARTER_PI) || (angle &lt; 0)) {
    angleDirection *= -1;
  }
}</pre>

<p>La variable <code>angle</code> &#xA0;aumenta desde 0 hasta <code>QUARTER_PI</code> (un cuarto del valor de pi), luego disminuye hasta que es menor que cero, luego el ciclo se repite. El valor de la variable <code>angleDirection</code> &#xA0;est&#xE1; siempre entre 1 y -1 para hacer que el valor de <code>angle</code> correspondiente aumente o<a contenteditable="false" data-primary="translate() function" data-startref="tf6x" data-type="indexterm">&#xA0;</a>disminuya.</p>
</section>
</section>

<section data-type="sect1" id="escalar-kYlqSPx">
<h1>Escalar</h1>

<p>La funci&#xF3;n <code>scale()</code> <a contenteditable="false" data-primary="scale() function" data-type="indexterm" id="sf6">&#xA0;</a>estira las coordenadas del lienzo. Como las coordenadas se expanden o se contraen cuando cambia la escala, todo lo que est&#xE1; dibujado en el lienzo aumenta o disminuye sus dimensiones. La cantidad de escalamiento se escribe en porcentajes decimales. Entonces, el par&#xE1;metro 1.5 en la funci&#xF3;n <code>scale()</code> corresponde a 150% y 3 a 300% (<a data-type="xref" href="#Fig_06_03">Figura 6-3</a>).</p>

<figure id="Fig_06_03"><img alt="Fig 06 03" src="assets/images/gspj_0603.png">
<figcaption><b>Figura 6-3. </b>Escalando las coordenadas</figcaption>
</figure>

<section data-type="sect2" id="ex-6-8">
<h2>Ejemplo 6-8: escalamiento</h2>

<p>Tal como <code>rotate()</code>, la funci&#xF3;n <code>scale()</code> transforma desde el origen. Entonces, tal como <code>rotate()</code>, para escalar una figura desde su centro, debemos trasladar su ubicaci&#xF3;n, escalar y luego dibujar con el centro en la coordenada (0,0):</p>

<figure><img alt="Ex 06 08" src="assets/images/gspj_06in09.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  translate(mouseX, mouseY);
  scale(mouseX / 60.0);
  rect(-15, -15, 30, 30);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-6-9-manteniendo-consistentes-los-trazos-LW51SJW">
<h2>Ejemplo 6-9: manteniendo consistentes los trazos</h2>

<p>De las l&#xED;neas gruesas de <a data-type="xref" href="#ex-6-8">Ejemplo 6-8</a>, puedes ver c&#xF3;mo la funci&#xF3;n <code>scale()</code> afecta el grosor del trazado. Para mantener un grosor consistente &#xA0;de trazado a medida que la figura se escala, divide el trazado deseado por el valor escalar:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  translate(mouseX, mouseY);
  var scalar = mouseX / 60.0;
  scale(scalar);
  strokeWeight(1.0 / scalar);
  rect(-15, -15, 30, 30);
}</pre>
<a contenteditable="false" data-primary="scale() function" data-startref="sf6" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="push-y-pop-XYJySJN">
<h1>Push y pop</h1>

<p>Para aislar los<a contenteditable="false" data-primary="push() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="pop() function" data-type="indexterm">&#xA0;</a>efectos de las transformaciones para que no afecten otras funciones, usa las funciones <code>push()</code> y <code>pop()</code>. Cuando ejecutas <code>push()</code>, se almacena una copia del sistema de coordenadas actual y luego puedes restaurar ese sistema ejecutando <code>pop()</code>. Esto es &#xFA;til cuando necesitas transformar una figura, pero quieres afectar otras.</p>

<section data-type="sect2" id="ejemplo-6-10-aislando-transformaciones-vWkwSJW">
<h2>Ejemplo 6-10: aislando transformaciones</h2>

<p>En este ejemplo, el rect&#xE1;ngulo peque&#xF1;o siempre se dibuja en la misma posici&#xF3;n porque <code>translate(mouseX, mouseY)</code> es cancelado por <code>pop()</code>:</p>

<figure><img alt="Ex 06 10" src="assets/images/gspj_06in10.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  push();
  translate(mouseX, mouseY);
  rect(0, 0, 30, 30);
  pop();
  translate(35, 10);
  rect(0, 0, 15, 15);
}</pre>

<div data-type="note" id="8NbOTrY">
<p>Las funciones <code>push()</code> y <code>pop()</code> siempre se usan de a pares. Por cada <code>push()</code>, tiene que haber un correspondiente <code>pop()</code>.</p>
</div>
</section>
</section>

<section data-type="sect1" id="robot-4-trasladar-rotar-escalar-8NbnSkN">
<h1>Robot 4: trasladar, rotar, escalar</h1>

<figure><img alt="Robot 4" src="assets/images/gspj_06in11.png">
<figcaption>
</figcaption></figure>

<p>Las funciones <code>translate()</code>, <code>rotate()</code>, y <code>scale()</code> <a contenteditable="false" data-primary="robot programs (examples)" data-secondary="translate, rotate, and scale in" data-type="indexterm" id="rp6trs">&#xA0;</a>son utilizadas para modificar el bosquejo del robot. En relaci&#xF3;n a <a data-type="xref" href="#robot3">Robot 3: respuesta</a>, <code>translate()</code> es usado para hacer el c&#xF3;digo m&#xE1;s f&#xE1;cil de leer. Aqu&#xED;, observa como ya no es necesario sumar el valor de <code>x</code> a cada funci&#xF3;n de dibujo porque la funci&#xF3;n <code>translate()</code> mueve todo. Similarmente, la funci&#xF3;n <code>scale()</code> es usada para definir las dimensiones del robot completo. Cuando el rat&#xF3;n no est&#xE1; presionado, el tama&#xF1;o es de un 60% y cuando s&#xED; est&#xE1; presionado, es de un 100% en relaci&#xF3;n a las coordenadas originales. La funci&#xF3;n <code>rotate()</code> es usada dentro del bucle para dibujar una l&#xED;nea, rotarla un poco, luego dibujar una segunda l&#xED;nea, luego rotarla un poco m&#xE1;s, y as&#xED; hasta que el bucle ha dibujado 30 l&#xED;neas en forma de c&#xED;rculo para darle estilo al pelo de la cabeza del robot:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 60;          // Coordenada x
var y = 440;         // Coordenada y
var radius = 45;       // Radio de la cabeza
var bodyHeight = 180;  // Altura del cuerpo
var neckHeight = 40;   // Altura del cuello

var easing = 0.04;

function setup() {
  createCanvas(360, 480);
  strokeWeight(2);
  ellipseMode(RADIUS);
}

function draw() {

  var neckY = -1 * (bodyHeight + neckHeight + radius);

  background(204);

  translate(mouseX, y);  // Mueve todo a (mouseX, y)

  if (mouseIsPressed) {
    scale(1.0);
  } else {
    scale(0.6);  // 60% de tama&#xF1;o si el rat&#xF3;n est&#xE1; presionado
  }

  // Cuerpo
  noStroke();
  fill(102);
  ellipse(0, -33, 33, 33);
  fill(0);
  rect(-45, -bodyHeight, 90, bodyHeight-33);

  // Cuello
  stroke(102);
  line(12, -bodyHeight, 12, neckY);

  // Pelo
  push();
  translate(12, neckY);
  var angle = -PI/30.0;
  for (var i = 0; i &lt;= 30; i++) {
    line(80, 0, 0, 0);
    rotate(angle);
  }
  pop();

  // Cabeza
  noStroke();
  fill(0);
  ellipse(12, neckY, radius, radius);
  fill(255);
  ellipse(24, neckY-6, 14, 14);
  fill(0);
  ellipse(24, neckY-6, 3, 3);

}</pre>
<a contenteditable="false" data-primary="robot programs (examples)" data-secondary="translate, rotate, and scale in" data-startref="rp6trs" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="AON4Tj7">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
<figure id="TChoi-07-Network6"><img src="assets/images/gspj_07in01.png"><figcaption></figcaption></figure>
</section>

<section data-type="chapter" id="media" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Medios</h1>

<p class="lede">p5.js es <a contenteditable="false" data-primary="media" data-type="indexterm" id="m7">&#xA0;</a>capaz de dibujar m&#xE1;s que simplemente l&#xED;neas y figuras. Es tiempo de aprender c&#xF3;mo crear im&#xE1;genes y texto en nuestros programas para extender las posibilidades visuales a fotograf&#xED;a, diagramas detallados y diversos tipos de letra.</p>

<p>Antes de que hagamos esto, primero tenemos que hablar un poco sobre servidores. Hasta este punto, hemos estado viendo el archivo <em>index.html</em> directamente en el navegador. Esto funciona bien para ejecutar animaciones simples. Sin embargo, si quieres hacer cosas como cargar una imagen externa en tu bosquejo, tu navegador no lo va a permitir. Si revisas la consola, te encontrar&#xE1;s con un error que contiene el t&#xE9;rmino<a contenteditable="false" data-primary="cross-origin error" data-type="indexterm">&#xA0;</a><em>cross-origin</em> (origen cruzado). Para cargar archivos externos, tienes que correr un <em>servidor</em>. Un<a contenteditable="false" data-primary="servers, running" data-type="indexterm">&#xA0;</a><em>servidor</em> responde cuando escribes una URL en la barra de direcciones, y te <em>sirve</em>&#xA0;los archivos correspondientes para que los puedas visualizar.</p>

<p>Existen diferentes maneras de correr servidores. Visita <em class="hyperlink"><a href="https://github.com/processing/p5.js/wiki/Servidor-local">https://github.com/processing/p5.js/wiki/Servidor-local</a></em>&#xA0;para ver las instrucciones de c&#xF3;mo correr un servidor en sistemas Mac OS X, Windows y Linux. Una vez que lo tengas configurado, &#xA1;est&#xE1;s listo para cargar medios!</p>

<p>Hemos <a contenteditable="false" data-primary="media" data-secondary="downloading online example files" data-type="indexterm" id="m7doef">&#xA0;</a>subido algunos archivos para que los uses en los ejemplos de este cap&#xED;tulo: <em class="hyperlink"><a href="http://p5js.org/learn/books/media.zip">http://p5js.org/learn/books/media.zip</a></em>.</p>

<p>Descarga este archivo, descompr&#xED;melo en tu escritorio (o en otro lugar conveniente) y anota su ubicaci&#xF3;n.</p>

<div data-type="note" id="eLzRCAL">
<p>Para &#xA0;descomprimir en Mac OS X, basta con hacer doble click en el archivo y se crear&#xE1; un directorio llamado <em>media</em>. En Windows, haz doble click en el archivo <em>media.zip</em>, lo que abrir&#xE1; una nueva ventana. En esa ventana, arrastra el directorio <em>media</em> al escritorio.</p>
</div>

<p>Crea un nuevo bosquejo, y copia el archivo <em>lunar.jpg</em> del directorio <em>media</em> que acabas de descomprimir, en el directorio de tu <em>bosquejo</em>.</p>

<div data-type="note" id="RnK9CoL">
<p>En Windows y Mac OS X, &#xA0;las extensiones de los archivos est&#xE1;n escondidas por defecto. Es una buena idea cambiar esta opci&#xF3;n para que siempre veas el nombre completo de tus archivos. En Mac OS X, selecciona Preferencias en el  men&#xFA; principal (Finder), y luego aseg&#xFA;rate que &quot;Mostrar la extensi&#xF3;n completa&quot; est&#xE9; activada en la pesta&#xF1;a de opciones avanzadas. En Windows, busca las Opciones de Directorio, y selecciona la opci&#xF3;n ah&#xED;.<a contenteditable="false" data-primary="media" data-secondary="downloading online example files" data-startref="m7doef" data-type="indexterm">&#xA0;</a></p>
</div>

<section data-type="sect1" id="imagenes-RnKNtQE">
<h1>Im&#xE1;genes</h1>

<p>Existen<a contenteditable="false" data-primary="images" data-type="indexterm" id="i7">&#xA0;</a><a contenteditable="false" data-primary="media" data-secondary="images" data-seealso="images" data-type="indexterm" id="m7i">&#xA0;</a>tres pasos que tienes que realizar antes de que puedas dibujar una imagen en la pantalla:</p>

<ol>
	<li>
	<p>A&#xF1;ade la imagen al directorio del bosquejo.</p>
	</li>
	<li>
	<p>Crea una variable para almacenar la imagen.</p>
	</li>
	<li>
	<p>Carga la imagen en la variable con <code>loadImage()</code>.</p>
	</li>
</ol>

<section data-type="sect2" id="ex7-1_loadimage">
<h2>Ejemplo 7-1: carga una imagen</h2>

<p>Para<a contenteditable="false" data-primary="images" data-secondary="loading" data-type="indexterm" id="i7l">&#xA0;</a>cargar una imagen, introduciremos una nueva funci&#xF3;n llamada<a contenteditable="false" data-primary="preload() function" data-type="indexterm">&#xA0;</a> <code>preload()</code>. La funci&#xF3;n <code>preload()</code> se ejecuta una vez y antes de que la funci&#xF3;n <code>setup()</code> se ejecute. Generalmente deber&#xED;as cargar tus imagenes y otros archivos en <code>preload()</code> para asegurarte que est&#xE9;n completamente cargadas antes de que tu programa empiece a correr. Discutiremos esto en mayor profundidad m&#xE1;s adelante en el cap&#xED;tulo.</p>

<p>Despu&#xE9;s de que los tres pasos son completados, puedes dibujar la imagen en la pantalla con la funci&#xF3;n <a contenteditable="false" data-primary="image() function" data-type="indexterm">&#xA0;</a><code>image()</code>. El primer par&#xE1;metro de <code>image()</code> especifica la imagen a dibujar, el segundo y tercero son las coordenadas <em>x</em> e <em>y</em>:</p>

<figure><img alt="Ex 07 01" src="assets/images/gspj_07in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting" id="ex-7-1">var img;

function preload() {
  img = loadImage(&quot;lunar.jpg&quot;);
}

function setup() {
  createCanvas(480, 120);
}

function draw() {
  image(img, 0, 0);
}</pre>

<p>Los par&#xE1;metros opcionales cuarto y quinto determinan el ancho y altura de la imagen a dibujar. Si no se usan los par&#xE1;metros cuarto y quinto, la imagen es dibujada en su tama&#xF1;o original.</p>

<p>Los siguientes ejemplos muestran c&#xF3;mo trabajar con m&#xE1;s de una imagen en el mismo programa y c&#xF3;mo escalar una imagen.</p>
</section>

<section data-type="sect2" id="ejemplo-7-2-cargar-mas-imagenes-DnB5tgE">
<h2>Ejemplo 7-2: cargar m&#xE1;s im&#xE1;genes</h2>

<p>Para este ejemplo, necesitar&#xE1;s agregar &#xA0;el archivo <em>capsule.jpg</em> (que est&#xE1; dentro del directorio <em>media</em> descargaste) al directorio de tu<a contenteditable="false" data-primary="sketch folder" data-type="indexterm" id="sf7">&#xA0;</a><em>bosquejo</em>:</p>

<figure><img alt="Ex 07 02" src="assets/images/gspj_07in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var img1;
var img2;

function preload() {
  img1 = loadImage(&quot;lunar.jpg&quot;);
  img2 = loadImage(&quot;capsule.jpg&quot;);
}

function setup() {
  createCanvas(480, 120);
}

function draw() {
  image(img1, -120, 0);
  image(img1, 130, 0, 240, 120);
  image(img2, 300, 0, 240, 120);
}</pre>
<a contenteditable="false" data-primary="images" data-secondary="loading" data-startref="i7l" data-type="indexterm">&#xA0;</a></section>

<section data-type="sect2" id="ejemplo-7-3-mover-las-imagenes-con-el-raton-oG6ytqn">
<h2>Ejemplo 7-3: mover las im&#xE1;genes con el rat&#xF3;n</h2>

<p>Cuando los valores <code>mouseX</code> y <code>mouseY</code> son usados como los par&#xE1;metros cuarto y quinto de la funci&#xF3;n <code>image()</code>, el tama&#xF1;o de la imagen cambia con el movimiento del rat&#xF3;n:</p>

<figure><img alt="Ex 07 03" src="assets/images/gspj_07in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var img;

function preload() {
  img = loadImage(&quot;lunar.jpg&quot;);
}

function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(0);
  image(img, 0, 0, mouseX * 2, mouseY * 2);
}</pre>

<div data-type="note" id="mE2pCqG">
<p>Cuando una imagen es mostrada m&#xE1;s grande o peque&#xF1;a que su tama&#xF1;o original, puede distorsionarse. Ten cuidado al preparar tus im&#xE1;genes en los tama&#xF1;os en que ser&#xE1;n usadas. Cuando el tama&#xF1;o de la imagen es modificado con la funci&#xF3;n <code>image()</code>, el archivo original en tu directorio del <em>bosquejo</em> no cambia.</p>
</div>

<p>p5.js puede cargar y mostrar im&#xE1;genes raster en los formatos<a contenteditable="false" data-primary="images" data-secondary="formats" data-type="indexterm">&#xA0;</a>JPEG, PNG, <a contenteditable="false" data-primary="JPEG image format" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="PNG image format" data-type="indexterm"></a><a contenteditable="false" data-primary="GIF image format" data-type="indexterm"></a>y GIF, adem&#xE1;s de im&#xE1;genes vectoriales<a contenteditable="false" data-primary="SVG image format" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="vector images" data-type="indexterm">&#xA0;</a>formato SVG. Puedes convertir im&#xE1;genes a los formatos JPEG, PNG, GIF y SVG usando programas como GIMP, Photoshop e Illustrator. La mayor parte de las c&#xE1;maras digitales graban sus im&#xE1;genes en el formato JPEG, pero usualmente necesitan ser reducidas en tama&#xF1;o para ser usadas con p5.js. Una c&#xE1;mara digital t&#xED;pica crea una imagen que es varias veces m&#xE1;s grande que el &#xE1;rea de dibujo de gran parte de los bosquejos creados en p5.js.&#xA0;<a contenteditable="false" data-primary="images" data-secondary="resizing" data-type="indexterm">&#xA0;</a>Cambiar el tama&#xF1;o de estas im&#xE1;genes antes de que sean a&#xF1;adidas al directorio de <em>bosquejo</em> hace que los bosquejos carguen m&#xE1;s r&#xE1;pido,&#xA0;corran m&#xE1;s eficientemente y<a contenteditable="false" data-primary="sketch folder" data-type="indexterm">&#xA0;</a>ahorra espacio en el disco duro.</p>

<p>Las im&#xE1;genes GIF, PNG y SVG soportan <a contenteditable="false" data-primary="images" data-secondary="transparency" data-type="indexterm" id="i7t">&#xA0;</a>transparencia, lo que significa que los pixeles pueden ser invisibles o parcialmente visibles (recuerda la discusi&#xF3;n de <code>color()</code> y valores alpha en <a data-type="xref" href="#ex-3-17">Ejemplo 3-17</a>). Las im&#xE1;genes GIF tienen transparencia de 1 bit, lo que significa que los pixeles son totalmente opacos o totalmente transparentes. Las im&#xE1;genes PNG soportan transparencia de 8 bits, lo que significa que cada pixel tiene una variable de opacidad. Los siguientes ejemplos usan&#xA0;<em>clouds.gif</em> y <em>clouds.png</em>&#xA0;para mostrar las diferencias entre los formatos de archivo.&#xA0; Las im&#xE1;genes est&#xE1;n dentro del directorio <em>media</em> que has descargado anteriormente. Aseg&#xFA;rate de incluirlas al directorio de tu bosquejo antes de probar cada ejemplo.</p>
</section>

<section data-type="sect2" id="ejemplo-7-4-transparencia-con-gif-mE2dtJG">
<h2>Ejemplo 7-4: transparencia con GIF</h2>

<figure><img alt="Ex 07 04" src="assets/images/gspj_07in05.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var img;

function preload() {
  img = loadImage(&quot;clouds.gif&quot;);
}

function setup() {
  createCanvas(480, 120);
}
function draw() {
  background(204);
  image(img, 0, 0);
  image(img, 0, mouseY * -1);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-7-5-transparencia-con-png-VnjptaL">
<h2>Ejemplo 7-5: transparencia con PNG</h2>
<a contenteditable="false" data-primary="PNG image format" data-type="indexterm">&#xA0;</a>

<figure><img alt="Ex 07 05" src="assets/images/gspj_07in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var img;

function preload() {
  img = loadImage(&quot;clouds.png&quot;);
}

function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  image(img, 0, 0);
  image(img, 0, mouseY * -1);
}</pre>
<a contenteditable="false" data-primary="images" data-secondary="transparency" data-startref="i7t" data-type="indexterm">&#xA0;</a></section>

<section data-type="sect2" id="ejemplo-7-6-mostrando-una-imagen-svg-NEd2tJG">
<h2>Ejemplo 7-6: mostrando una imagen SVG</h2>
<a contenteditable="false" data-primary="SVG image format" data-type="indexterm">&#xA0;</a>

<figure><img alt="Ex 07 06" src="assets/images/gspj_07in07.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var img;

function preload() {
  img = loadImage(&quot;network.svg&quot;);
}

function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(0);
  image(img, 0, 0);
  image(img, mouseX, 0);
}</pre>

<div data-type="note" id="wng7CXn">
<p>Recuerda incluir la extensi&#xF3;n apropiada del archivo (<em>.gif</em>, <em>.jpg</em>, <em>.png</em>, o <em>.svg</em>) cuando cargas la imagen. Tambi&#xE9;n aseg&#xFA;rate de que el nombre de la imagen est&#xE9; escrito exactamente como aparece en el archivo, incluyendo<a contenteditable="false" data-primary="media" data-secondary="images" data-seealso="images" data-startref="m7i" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="images" data-startref="i7" data-type="indexterm">&#xA0;</a><span class="keep-together">may&#xFA;sculas y min&#xFA;sculas</span>.</p>
</div>
</section>
</section>


<section data-type="sect1" id="asincronicidad-wngRt2E">
<h1>Asincronicidad</h1>

<p>&#xBF;Por qu&#xE9;<a contenteditable="false" data-primary="media" data-secondary="and asynchronicity" data-secondary-sortas="asynchronicity" data-type="indexterm" id="m7a">&#xA0;</a><a contenteditable="false" data-primary="asynchronicity" data-type="indexterm" id="async7">&#xA0;</a>necesitamos cargar las im&#xE1;genes en<a contenteditable="false" data-primary="preload() function" data-type="indexterm">&#xA0;</a> <code>preload()</code>? &#xBF;Por qu&#xE9; no usamos<a contenteditable="false" data-primary="setup() function" data-type="indexterm">&#xA0;</a> <code>setup()</code>? Hasta este punto, hemos estado asumiendo que nuestros programas corren desde la parte superior a la inferior, con cada l&#xED;nea de c&#xF3;digo siendo ejecutada completamente antes de avanzar a la siguiente. Aunque esto es cierto generalmente, en el caso de algunas funciones como cargar im&#xE1;genes, tu navegador empezar&#xE1; el proceso de cargar la imagen, pero saltar&#xE1; a la siguiente l&#xED;nea antes de que la imagen haya terminado de cargarse. Esto recibe el nombre de <em>asincronicidad</em>, o de <em>funci&#xF3;n as&#xED;ncrona</em>. Esto es un poco inesperado al principio, pero permite que las p&#xE1;ginas carguen y corran m&#xE1;s r&#xE1;pido en la web.</p>

<p>Para ver esto con mayor claridad, considera el siguiente ejemplo. Es id&#xE9;ntico a <a data-type="xref" href="#ex7-1_loadimage">Ejemplo 7-1</a>, excepto que usamos<a contenteditable="false" data-primary="loadImage() function" data-type="indexterm">&#xA0;</a> <code>loadImage()</code> dentro de <code>setup()</code> en vez de <code>preload()</code>.</p>

<section data-type="sect2" id="ejemplo-7-7demonstrando-la-asincronicidad-znV1tjE">
<h2>Ejemplo 7-7:demonstrando la asincronicidad</h2>

<figure><img alt="Ex 07 07" src="assets/images/gspj_07in08.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var img;

function setup() {
  createCanvas(480, 120);
  img = loadImage(&quot;lunar.jpg&quot;);
  noLoop();
}

function draw() {
  background(204);
  image(img, 0, 0);
}</pre>

<p>Cuando ejecutes este programa, te dar&#xE1;s cuenta que el lienzo para pintar est&#xE1; gris y que la imagen no est&#xE1; siendo mostrada. El bosquejo primero ejecuta la funci&#xF3;n <code>setup()</code>,  y luego ejecuta la funci&#xF3;n <code>draw()</code>. En la l&#xED;nea de <code>loadImage()</code> empieza a cargar la imagen, pero contin&#xFA;a con el resto de <code>setup()</code> y con <code>draw()</code>  antes de que la imagen est&#xE9; completamente cargada.&#xA0;La funci&#xF3;n <code>image()</code> no es capaz de dibujar una imagen que todav&#xED;a no est&#xE9; cargada.</p>

<p>Para ayudar con este problema, p5.js posee la funci&#xF3;n<a contenteditable="false" data-primary="preload() function" data-type="indexterm">&#xA0;</a> <code>preload()</code>. A diferencia de <code>setup()</code>, <code>preload()</code>&#xA0;fuerza al programa a esperar hasta que todo est&#xE9; cargado antes de continuar. Es mejor hacer las llamadas para cargar archivos dentro de <code>preload()</code>, y hacer toda la configuraci&#xF3;n en <code>setup()</code>.</p>

<p>De forma alternativa, en vez de usar <code>preload()</code>,  puedes usar algo llamado <em>funci&#xF3;n callback</em> (retrollamada). Una <a contenteditable="false" data-primary="callback function" data-type="indexterm">&#xA0;</a>funci&#xF3;n callback es una funci&#xF3;n que se pasa como argumento a una segunda funci&#xF3;n, y que se ejecuta despu&#xE9;s de que la segunda funcion ha terminado. El siguiente ejemplo ilustra esta t&#xE9;cnica.</p>
</section>

<section data-type="sect2" id="ejemplo-7-8-cargar-con-callback-gn1ptWE">
<h2>Ejemplo 7-8: cargar con callback</h2>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  loadImage(&quot;lunar.jpg&quot;, drawImage);
  noLoop();
}

function draw() {
  background(200);
}

function drawImage(img) {
  image(img, 0, 0);
}</pre>

<p>En este ejemplo, a&#xF1;adimos un segundo argumento a <code>loadImage()</code>, que es la funci&#xF3;n que queremos que se ejecute despu&#xE9;s de que la carga finaliza. Una vez que la imagen ha cargado, la funci&#xF3;n <code>drawImage()</code> es llamada autom&#xE1;ticamente, con un argumento, la imagen que ha sido reci&#xE9;n cargada.</p>

<p>No hay necesidad de crear una variable global para guardar la imagen. La imagen es pasada directamente a la funci&#xF3;n callback, con el nombre del par&#xE1;metro escogido en la<a contenteditable="false" data-primary="media" data-secondary="and asynchronicity" data-secondary-sortas="asynchronicity" data-startref="m7a" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="asynchronicity" data-startref="async7" data-type="indexterm">&#xA0;</a>definici&#xF3;n de la funci&#xF3;n.</p>
</section>
</section>

<section data-type="sect1" id="fonts">
<h1>Tipos de letra</h1>

<p>p5.js puede<a contenteditable="false" data-primary="media" data-secondary="fonts" data-seealso="fonts" data-type="indexterm" id="m7f">&#xA0;</a><a contenteditable="false" data-primary="fonts" data-type="indexterm" id="f7">&#xA0;</a>mostrar texto en fuentes distintas que la por defecto. Puedes usar cualquier fuente que est&#xE9; en tu computador (son llamadas <a contenteditable="false" data-primary="system fonts" data-type="indexterm">&#xA0;</a><em>fuentes del sistema</em>). Ten en cuenta que si est&#xE1;s compartiendo esto en la web, otra gente necesitar&#xE1; a&#xF1;adir la fuente de sistema para poder ver el texto en la fuente que escogiste. Existe un n&#xFA;mero de fuentes que la mayor parte de los computadores y dispositivos tienen; estas incluyen &quot;Arial,&quot; &quot;Courier,&quot; &quot;Courier New,&quot; &quot;Georgia,&quot; &quot;Helvetica,&quot; &quot;Palatino,&quot; &quot;Times New Roman,&quot; &quot;Trebuchet MS,&quot; y &quot;Verdana.&quot;</p>

<section data-type="sect2" id="ejemplo-7-9-dibujando-con-tipos-de-letras-dEWrt7L">
<h2>Ejemplo 7-9: dibujando con tipos de letras</h2>

<p>Puedes usar la funci&#xF3;n<a contenteditable="false" data-primary="textFont() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="fonts" data-secondary="drawing with" data-type="indexterm">&#xA0;</a><code>textFont()</code> para configurar la fuente actual. Puedes dibujar letras en la pantalla con la funci&#xF3;n<a contenteditable="false" data-primary="text() function" data-type="indexterm">&#xA0;</a> <code>text()</code> y puedes cambiar el tama&#xF1;o<a contenteditable="false" data-primary="textSize() function" data-type="indexterm">&#xA0;</a>con la funci&#xF3;n <code>textSize()</code>:</p>

<figure><img alt="Ex 07 09" src="assets/images/gspj_07in09.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  textFont(&quot;Arial&quot;);
}

function draw() {
  background(102);
  textSize(32);
  text(&quot;one small step for man...&quot;, 25, 60);
  textSize(16);
  text(&quot;one small step for man...&quot;, 27, 90);
}</pre>

<p>El primer par&#xE1;metro de <code>text()</code> son los caracteres a ser dibujados en la pantalla. (Observa que los caracteres est&#xE1;n entre comillas). Los par&#xE1;metros segundo y tercero definen la ubicaci&#xF3;n horizontal y vertical. La ubicaci&#xF3;n es relativa a la base del texto (ver <a data-type="xref" href="#Fig_07_01">Figura 7-1</a>).</p>

<figure id="Fig_07_01"><img alt="Fig 07 01" src="assets/images/gspj_0701.png">
<figcaption><b>Figura 7-1. </b>Coordenadas de la tipograf&#xED;a</figcaption>
</figure>
</section>

<section data-type="sect2" id="example-7-10-use-a-w">
<h2>Ejemplo 7-10: usar una fuente de la web</h2>

<p>Si<a contenteditable="false" data-primary="webfonts" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="fonts" data-secondary="webfonts" data-type="indexterm">&#xA0;</a>no quieres estar limitado a esta peque&#xF1;a lista de fuentes, puedes usar una de la web. Dos sitios web que son buenos recursos para encontrar fuentes web con licencias abiertas para usar con p5.js son <a href="http://www.google.com/fonts">GoogleFonts</a>&#xA0;y la&#xA0;<a href="http://openfontlibrary.org">Open Font Library</a>.</p>

<p>Para usar una webfont en tu programa, deber&#xE1;s referenciarla en tu archivo <em>index.html</em>. Cuando escoges una fuente de cualquiera de estas bibliotecas mencionadas, te mostar&#xE1; una l&#xED;nea de c&#xF3;digo para a&#xF1;adir a tu archivo HTML. Cuando copias y pegas este c&#xF3;digo en cualquier parte dentro de la secci&#xF3;n <code>&lt;head&gt;</code> de tu HTML, tu archivo se ver&#xE1; parecido a esto:</p>

<pre data-code-language="html" data-type="programlisting">&lt;html&gt;
&lt;head&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../lib/p5.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;sketch.js&quot;&gt;&lt;/script&gt;
&lt;link href=&quot;http://fonts.googleapis.com/css?family=Source+Code<br>+Pro&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;&lt;/pre&gt;</pre>

<p>Despu&#xE9;s de que hayas enlazado la fuente, puedes usarla con <code>textFont()</code> igual que las fuentes de sistema:</p>

<figure><img alt="Ex 07 10" src="assets/images/gspj_07in10.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  textFont(&quot;Source Code Pro&quot;);
}

function draw() {
  background(102);
  textSize(28);
  text(&quot;one small step for man...&quot;, 25, 60);
  textSize(16);
  text(&quot;one small step for man...&quot;, 27, 90);
}</pre>
</section>

<section data-type="sect2" id="example-7-11-load-a">
<h2>Ejemplo 7-11: cargar una fuente personalizada</h2>

<p>p5.js tambi&#xE9;n puede<a contenteditable="false" data-primary="fonts" data-secondary="loading custom" data-type="indexterm">&#xA0;</a>mostrar texto usando tipograf&#xED;as<a contenteditable="false" data-primary="TrueType (.ttf) fonts" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="OpenType (.otf) fonts" data-type="indexterm">&#xA0;</a>TrueType (<em>.ttf</em>) y OpenType (<em>.otf</em>). En esta introducci&#xF3;n, cargaremos la fuente &#xA0;<em>SourceCodePro-Regular.ttf</em>&#xA0;TrueType (incluida en la carpeta <em>media</em> que descargaste) desde la carpeta <em>sketch</em>.</p>

<p>Estamos usando el mismo tipo de letra que usamos en el&#xA0;<a data-type="xref" href="#example-7-10-use-a-w">Ejemplo 7-10</a>, pero ahora el archivo est&#xE1; ubicado en la carpeta <em>sketch</em> en vez de ser cargado desde la web. El resultado del siguiente programa deber&#xED;a verse igual que el <a data-type="xref" href="#example-7-10-use-a-w">Ejemplo 7-10</a>. Aqu&#xED; est&#xE1;n los pasos que debes seguir para incluir una tipograf&#xED;a personalizada en tu programa:</p>

<ol>
	<li>
	<p>Agrega la tipograf&#xED;a a tu carpeta del bosquejo.</p>
	</li>
	<li>
	<p>Crea una variable para almacenar la tipograf&#xED;a.</p>
	</li>
	<li>
	<p>Carga la tipograf&#xED;a en la variable con <code>loadFont()</code>.</p>
	</li>
	<li>
	<p>Usa la funci&#xF3;n <code>textFont()</code> para definir la tipograf&#xED;a actual:</p>
	</li>
</ol>

	<pre data-code-language="p5js" data-type="programlisting">var font;

function preload() {
  font = loadFont(&quot;SourceCodePro-Regular.ttf&quot;);
}

function setup() {
  createCanvas(480, 120);
  textFont(font);
}

function draw() {
  background(102);
  textSize(28);
  text(&quot;one small step for man...&quot;, 25, 60);
  textSize(16);
  text(&quot;one small step for man...&quot;, 27, 90);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-7-12-define-el-trazo-y-el-relleno-del-texto-2nkQtaL">
<h2>Ejemplo 7-12: define el trazo y el relleno del texto</h2>

<p><a contenteditable="false" data-primary="fonts" data-secondary="setting test stroke and fill" data-type="indexterm"></a><a contenteditable="false" data-primary="text" data-see="fonts" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="noStroke() function" data-type="indexterm"></a>Tal como las figuras, el texto es afectado por las funciones<a contenteditable="false" data-primary="stroke() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="fill() function" data-type="indexterm"></a> <code>stroke()</code> y <code>fill()</code>. El siguiente ejemplo resulta en un texto negro con un trazo blanco:</p>

<figure><img alt="Ex 07 12" src="assets/images/gspj_07in11.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  textFont(&quot;Source Code Pro&quot;);
  fill(0);
  stroke(255);
}

function draw() {
  background(102);
  textSize(28);
  text(&quot;one small step for man...&quot;, 25, 60);
  textSize(16);
  text(&quot;one small step for man...&quot;, 27, 90);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-7-13-dibuja-el-texto-en-un-recuadro-DLXltZL">
<h2>Ejemplo 7-13: dibuja el texto en un recuadro</h2>

<p>Tambi&#xE9;n <a contenteditable="false" data-primary="fonts" data-secondary="drawing text in a box" data-type="indexterm">&#xA0;</a>puedes definir que el texto se dibuje dentro de un recuadro a&#xF1;adiendo los par&#xE1;metros cuarto y quinto para especificar el ancho y altura del recuadro:</p>

<figure><img alt="Ex 07 13" src="assets/images/gspj_07in12.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
  textFont(&quot;Source Code Pro&quot;);
  textSize(24);
}

function draw() {
  background(102);
  text(&quot;one small step for man...&quot;, 26, 24, 240, 100);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-7-13-almacenar-texto-en-una-variable-bEP1t5n">
<h2>Ejemplo 7-13: almacenar texto en una variable</h2>

<p>En<a contenteditable="false" data-primary="variables" data-secondary="storing text in" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="fonts" data-secondary="storing text in a variable" data-type="indexterm">&#xA0;</a>el ejemplo anterior, las palabras dentro de la funci&#xF3;n <code>text()</code> hacen que el codigo sea dif&#xED;cil de leer. Podemos almacenar estas palabras en una variable para hacer que el c&#xF3;digo sea m&#xE1;s modular. Aqu&#xED; hay una nueva versi&#xF3;n del ejemplo anterior que usa una variable:</p>

<pre data-code-language="p5js" data-type="programlisting">var quote = &quot;one small step for man...&quot;;

function setup() {
  createCanvas(480, 120);
  textFont(&quot;Source Code Pro&quot;);
  textSize(24);
}

function draw() {
  background(204);
  text(quote, 26, 24, 240, 100);
}</pre>

<p>Existe un conjunto de funciones adicionales que afectan la forma en que las letras son mostradas en la pantalla. Son explicadas, con ejemplos, en la categor&#xED;a Tipograf&#xED;a <a contenteditable="false" data-primary="media" data-secondary="fonts" data-seealso="fonts" data-startref="m7f" data-type="indexterm">&#xA0;</a>de<a contenteditable="false" data-primary="fonts" data-startref="f7" data-type="indexterm">&#xA0;</a>la <em>Referencia de p5.js</em>.</p>
</section>
</section>

<section data-type="sect1" id="robot-5-medios-QLJ7tmE">
<h1>Robot 5: medios</h1>

<figure><img alt="NRobot Media" src="assets/images/gspj_07in13.png">
<figcaption>
</figcaption></figure>

<p>A diferencia de <a contenteditable="false" data-primary="robot programs (examples)" data-secondary="loading images from SVG/PNG files" data-type="indexterm" id="rp7lifspf">&#xA0;</a>los robots creados con l&#xED;neas y rect&#xE1;ngulos dibujados en p5.js durante los cap&#xED;tulos anteriores, estos robots fueron creados con un programa de dibujo vectorial. Para algunas figuras, es m&#xE1;s f&#xE1;cil apuntar y hacer click con un software como Inkscape o Illustrator que definir las figuras con coordenadas en c&#xF3;digo.</p>

<p>Existe un compromiso al seleccionar una t&#xE9;cnica de creaci&#xF3;n de im&#xE1;genes por sobre otra. Cuando defines figuras en p5.js, existe mayor flexibilidad para modificarlas mientras el programa est&#xE1; corriendo. Si las figuras est&#xE1;n definidas en otro lugar y luego cargadas a p5.js, los cambios est&#xE1;n limitados a la posici&#xF3;n, &#xE1;ngulo y tama&#xF1;o. Cuando cargas cada robot desde un archivo SVG, como este ejemplo muestra, las variaciones destacadas en el Robot 2 (ver <a data-type="xref" href="#robot2">Robot 2: variables</a>) son imposibles.</p>

<p>Las im&#xE1;genes pueden ser cargadas en un programa para agregar visuales creadas en otros programas o capturadas con una c&#xE1;mara. Con esta imagen en el fondo, nuestros robots ahora est&#xE1;n buscando formas de vida en Noruega en el inicio del siglo 20.</p>

<p>Los archivos SVG y PNG usados en este ejemplo pueden ser descargados desde <a href="http://p5js.org/learn/books/media.zip"><em class="hyperlink">http://p5js.org/learn/books/media.zip</em></a>:</p>

<pre data-code-language="p5js" data-type="programlisting" class="pagebreak-before">var bot1;
var bot2;
var bot3;
var landscape;

var easing = 0.05;
var offset = 0;

// Precarga las im&#xE1;genes
function preload() {
  bot1 = loadImage(&quot;robot1.svg&quot;);
  bot2 = loadImage(&quot;robot2.svg&quot;);
  bot3 = loadImage(&quot;robot3.svg&quot;);
  landscape = loadImage(&quot;alpine.png&quot;);
}

function setup() {
  createCanvas(720, 480);
}

function draw() {
  // Define la imagen &quot;landscape&quot; como fondo; esta imagen
  // debe tener los mismos ancho y altura que el programa
  background(landscape);

  // Define el desfase izquierdo/derecho y aplica suavizado
	// para hacer una transici&#xF3;n suave
  var targetOffset = map(mouseY, 0, height, -40, 40);
  offset += (targetOffset - offset) * easing;

  // Dibuja el robot izquierdo
  image(bot1, 85 + offset, 65);

  // Dibuja el robot derecho m&#xE1;s peque&#xF1;o y con un desfase menor
  var smallerOffset = offset * 0.7;
  image(bot2, 510 + smallerOffset, 140, 78, 248);

  // Dibuja el robot m&#xE1;s peque&#xF1;o, con un desfase menor
  smallerOffset *= -0.5;
  image(bot3, 410 + smallerOffset, 225, 39, 124);
}</pre>
<a contenteditable="false" data-primary="media" data-startref="m7" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="robot programs (examples)" data-secondary="loading images from SVG/PNG files" data-startref="rp7lifspf" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="oAPnC51">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-08-tweening"><img src="assets/images/gspj_08in01.png"><figcaption></figcaption></figure>

</section>

<section data-type="chapter" id="motion" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Movimiento</h1>

<p class="lede">Al igual que en un<a contenteditable="false" data-primary="motion" data-see="animation" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="animation" data-type="indexterm" id="a8">&#xA0;</a>folioscopio, la animaci&#xF3;n en la pantalla es creada dibujando una imagen, luego otra, y as&#xED;. La ilusi&#xF3;n de movimiento fluido es creada por <a contenteditable="false" data-primary="persistence of vision" data-type="indexterm">&#xA0;</a><em> persistencia de visi&#xF3;n</em>. Cuando un conjunto de im&#xE1;genes similares es presentado a una tasa suficiente, nuestros cerebros interpretan estas im&#xE1;genes como movimiento.</p>

<section data-type="sect1" id="cuadros-2xL1hB9">
<h1>Cuadros</h1>

<p>Para<a contenteditable="false" data-primary="animation" data-secondary="frames/frame rates" data-type="indexterm" id="a8fr">&#xA0;</a><a contenteditable="false" data-primary="frames" data-type="indexterm">&#xA0;</a>crear un movimiento fluido, p5.js trata de ejecutar el c&#xF3;digo dentro de<a contenteditable="false" data-primary="draw() function" data-type="indexterm">&#xA0;</a> <code>draw()</code> a una tasa de 60 cuadros por segundo. Un <em>cuadro</em> es una ejecuci&#xF3;n de la funci&#xF3;n <code>draw()</code> y la <em>tasa de cuadros</em> equivale a cu&#xE1;ntos cuadros son dibujados por segundo. Entonces, un programa que dibuja 60 cuadros por segundo ejecuta todo el c&#xF3;digo dentro de la funci&#xF3;n <code>draw()</code> 60 veces por segundo.</p>

<section data-type="sect2" id="ex-8-1">
<h2>Ejemplo 8-1: ve la tasa de cuadros</h2>

<p>Para confirmar la<a contenteditable="false" data-primary="frame rates" data-type="indexterm" id="fr8">&#xA0;</a>tasa de cuadros, podemos usar la consola del navegador que aprendimos a usar en <a data-type="xref" href="#hello">1/Hola</a>. La funci&#xF3;n&#xA0;<code>frameRate()</code>&#xA0;<a contenteditable="false" data-primary="frameRate() function" data-type="indexterm">&#xA0;</a>indica la velocidad actual de tu programa.&#xA0;Abre la consola,&#xA0;ejecuta este programa y revisa los valores que imprime:</p>

<pre data-code-language="p5js" data-type="programlisting">function draw() {
  var fr = frameRate();
  print(fr);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-8-2-define-la-tasa-de-cuadros-5GA7hnx">
<h2>Ejemplo 8-2: define la tasa de cuadros</h2>

<p>La funci&#xF3;n <code>frameRate()</code> tambi&#xE9;n puede cambiar la velocidad a la que el programa corre. Cuando es ejecutada sin par&#xE1;metro (como en <a data-type="xref" href="#ex-8-1">Ejemplo 8-1</a>), retorna la tasa de cuadros actual. Sin embargo, cuando la funci&#xF3;n <code>frameRate()</code> es ejecutada con un par&#xE1;metro, define la tasa de cuadros a ese valor. Para ver el resultado, ejecuta las distintas versiones de <code>frameRate()</code> de este ejemplo, descoment&#xE1;ndolas:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  frameRate(30); // Treinta cuadros por segundo
  //frameRate(12); // Doce cuadros por segundo
  //frameRate(2); // Dos cuadros por segundo
  //frameRate(0.5); // Un cuadros cada dos segundos
}

function draw() {
  var fr = frameRate();
  print(fr);
}</pre>

<div data-type="note" id="gx1pTv0">
<p>p5.js <em>trata</em> de correr el c&#xF3;digo a una tasa de 60 cuadros por segundo, pero si tarda m&#xE1;s de de 1/60 segundos en ejecutar el m&#xE9;todo <code>draw()</code>, entonces la tasa decrecer&#xE1;. La funci&#xF3;n <code>frameRate()</code> solamente especifica la tasa m&#xE1;xima. La tasa de cualquier programa depende del computador ejecutando el<a contenteditable="false" data-primary="animation" data-secondary="frames/frame rates" data-startref="a8fr" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="frame rates" data-startref="fr8" data-type="indexterm">&#xA0;</a>c&#xF3;digo.</p>
</div>
</section>
</section>

<section data-type="sect1" id="velocidad-y-direccion-gx1Qhex">
<h1>Velocidad y direcci&#xF3;n</h1>

<p class="pagebreak-after">Para <a contenteditable="false" data-primary="animation" data-secondary="speed and direction" data-type="indexterm" id="a8sd">&#xA0;</a>crear ejemplos de movimiento fluido, creamos variables que almacenan n&#xFA;meros y los modifican un poco en cada cuadro.</p>

<section data-type="sect2" id="ex-8-3">
<h2>Ejemplo 8-3: mueve una figura</h2>

<p>El <a contenteditable="false" data-primary="shapes" data-secondary="moving" data-see="animation" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="animation" data-secondary="moving shapes" data-type="indexterm">&#xA0;</a>siguiente ejemplo mueve una figura de izquierda a derecha, actualizando la variable <em>x</em>:</p>

<figure><img alt="Ex 08 03" src="assets/images/gspj_08in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var radio = 40;
var x = -radio;
var velocidad = 0.5;

function setup() {
  createCanvas(240, 120);
  ellipseMode(RADIUS);
}

function draw() {
  background(0);
  x += velocidad;  // Aumenta el valor de x
  arc(x, 60, radio, radio, 0.52, 5.76);
}</pre>

<p class="pagebreak-after">Cuando ejecutas este c&#xF3;digo, observar&#xE1;s que la figura se mueve m&#xE1;s all&#xE1; del borde derecho de la pantalla cuando el valor de la variable <em>x</em> es mayor que el ancho de la ventana. El valor de <em>x</em> sigue aumentando, pero la figura ya no es visible.</p>
</section>

<section data-type="sect2" id="ejemplo-8-4-dar-la-vuelta-WxPehr9">
<h2>Ejemplo 8-4: dar la vuelta</h2>

<p>Existen<a contenteditable="false" data-primary="shapes" data-secondary="wrapping around screen" data-type="indexterm" id="s8was">&#xA0;</a><a contenteditable="false" data-primary="animation" data-secondary="wrapping shapes around screen" data-type="indexterm" id="a8wsas">&#xA0;</a>muchas alternativas a este comportamiento, que puedes escoger de acuerdo a tu preferencia. Primero, extenderemos el c&#xF3;digo para mostrar c&#xF3;mo mover la figura de vuelta al borde izquierdo de la pantalla despu&#xE9;s de que desaparece del borde derecho. En este caso, imagina la pantalla como un cilindro aplanado, con la figura movi&#xE9;ndose por fuera para volver al borde izquierdo:</p>

<figure><img alt="Ex 08 04" src="assets/images/gspj_08in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var radio = 40;
var x = -radio;
var velocidad = 0.5;

function setup() {
  createCanvas(240, 120);
  ellipseMode(RADIUS);
}

function draw() {
  background(0);
  x += velocidad;  // Aumenta el valor de x
  if (x &gt; width + radio) {  // Si la figura est&#xE1; fuera de la pantalla
    x = -radio;  // Mueve la figura al borde izquierdo
  }
  arc(x, 60, radio, radio, 0.52, 5.76);
}</pre>

<p>En cada viaje alrededor de <code>draw()</code>, el c&#xF3;digo prueba si el valor de <code>x</code> ha aumentado m&#xE1;s all&#xE1; del ancho de la pantalla (sumado al radio de la figura). Si lo ha hecho, hacemos que el valor de <code>x</code> sea negativo nuevamente, para que cuando siga aumentando, entre a la pantalla por la izquierda. Revisa la <a data-type="xref" href="#Fig_08_01">Figura 8-1</a> para ver un diagrama de c&#xF3;mo<a contenteditable="false" data-primary="shapes" data-secondary="wrapping around screen" data-startref="s8was" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="animation" data-secondary="wrapping shapes around screen" data-startref="a8wsas" data-type="indexterm">&#xA0;</a>funciona.</p>

<figure id="Fig_08_01"><img alt="Fig 08 01" src="assets/images/gspj_0801.png">
<figcaption><b>Figura 8-1. </b>Probando los bordes de la ventana</figcaption>
</figure>
</section>

<section data-type="sect2" id="ex-8-5">
<h2>Ejemplo 8-5: rebota contra la pared</h2>

<p>En este <a contenteditable="false" data-primary="animation" data-secondary="bouncing shapes off wall" data-type="indexterm"></a><a contenteditable="false" data-primary="shapes" data-secondary="bouncing off wall" data-type="indexterm"></a>ejemplo, extenderemos el <a data-type="xref" href="#ex-8-3">Ejemplo 8-3</a> para que la figura cambie de direcci&#xF3;n cuando llegue a un borde, en vez de volver a aparecer por la izquierda. Para lograr esto, a&#xF1;adimos una nueva variable para almacenar la direcci&#xF3;n de la figura. Un valor de direcci&#xF3;n de 1 mueve la figura hacia la derecha, mientras que un valor de -1 la mueve hacia la izquierda:</p>

<figure><img alt="Ex 08 05" src="assets/images/gspj_08in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var radio = 40;
var x = 110;
var velocidad = 0.5;
var direccion = 1;

function setup() {
  createCanvas(240, 120);
  ellipseMode(RADIUS);
}

function draw() {
  background(0);
  x += velocidad * direccion;
  if ((x &gt; width - radio) || (x &lt; radius)) {
    direccion = -direccion; // Cambiar direcci&#xF3;n
  }
  if (direction == 1) {
    arc(x, 60, radio, radio, 0.52, 5.76); // Hacia la derecha
  } else {
    arc(x, 60, radio, radio, 3.67, 8.9); // Hacia la izquierda
  }
}</pre>

<p>Cuando la figura llega a un borde, este c&#xF3;digo invierte la direcci&#xF3;n de la figura, cambiando el signo de la variable <code>direction</code>. Por ejemplo, si la variable <code>direction</code> es positiva cuando la figura llega a un borde, el c&#xF3;digo la invierte a <a contenteditable="false" data-primary="animation" data-secondary="speed and direction" data-startref="a8sd" data-type="indexterm">&#xA0;</a>negativa.</p>
</section>
</section>

<section data-type="sect1" id="posiciones-intermedias-tweening-a9dJhE0">
<h1>Posiciones intermedias (tweening)</h1>

<p>A veces<a contenteditable="false" data-primary="animation" data-secondary="tween positions" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="tweening, in animation" data-type="indexterm">&#xA0;</a>quieres animar una figura para ir de un punto de la pantalla a otro. Con unas pocas l&#xED;neas de c&#xF3;digo, puedes configurar la posici&#xF3;n inicial y final, y luego calcular las posiciones intermedias (<em>tween</em>) en cada cuadro.</p>

<section data-type="sect2" id="ejemplo-8-6-calcula-las-posiciones-intermedias-yx2oh79">
<h2>Ejemplo 8-6: calcula las posiciones intermedias</h2>

<p>Para hacer que el ejemplo de este c&#xF3;digo sea modular, hemos creado un grupo de variables en la parte superior. Ejecuta el c&#xF3;digo varias veces y cambia los valores para revisar c&#xF3;mo este c&#xF3;digo puede mover la figura desde cualquier ubicaci&#xF3;n a cualquier otra y en cualquier rango de velocidades. Modifica la variable <code>paso</code><a contenteditable="false" data-primary="step variable" data-type="indexterm">&#xA0;</a>para alterar la velocidad:</p>

<figure><img alt="Ex 08 06" src="assets/images/gspj_08in05.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var inicioX = 20; // Coordenada x inicial
var finX = 160;   // Coordenada x final
var inicioY = 30; // Coordenada y inicial
var finY = 80;    // Coordenada y final
var x = inicioX;  // Coordenada x actual
var y = inicioY;  // Coordenada y actual
var paso = 0.005; // createCanvas para cada paso (0.0 a 1.0)
var pct = 0.0;    // Porcentaje avanzado (0.0 a 1.0)

function setup() {
  createCanvas(240, 120);
}

function draw() {
  background(0);
  if (pct &lt; 1.0) {
    x = inicioX + ((finX - inicioX) * pct);
    y = inicioY + ((finY - inicioY) * pct);
    pct += paso;
  }
  ellipse(x, y, 20, 20);
}</pre>
</section>
</section>

<section data-type="sect1" id="random">
<h1>Aleatoreidad</h1>

<p>A diferencia<a contenteditable="false" data-primary="animation" data-secondary="random drawing/moving of shapes" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="shapes" data-secondary="random drawing/moving of" data-type="indexterm">&#xA0;</a>del movimiento linear y suave t&#xED;pico en las gr&#xE1;ficas por computadora, el movimiento en el mundo f&#xED;sico es usualmente idiosincr&#xE1;tico. Por ejemplo, una hoja cayendo hacia la tierra, o una hormiga caminando por un terreno rugoso. Podemos simular las cualidades impredecibles del mundo generando n&#xFA;meros aleatorios. La funci&#xF3;n <a contenteditable="false" data-primary="random() function" data-type="indexterm">&#xA0;</a> <code>random()</code> calcula estos valores; podemos definir un rango para afinar la cantidad de desorden en un programa.</p>

<section data-type="sect2" id="ex-8-7">
<h2>Ejemplo 8-7: genera valores aleatorios</h2>

<p>El siguiente ejemplo corto imprime valores aleatorios en la consola, con el rango limitado por la posici&#xF3;n del rat&#xF3;n:</p>

<pre data-code-language="p5js" data-type="programlisting">function draw() {
  var r = random(0, mouseX);
  print(r);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-8-8-dibuja-aleatoriamente-z0ldhg0">
<h2>Ejemplo 8-8: dibuja aleatoriamente</h2>

<p>Construyendo a partir del <a data-type="xref" href="#ex-8-7">Ejemplo 8-7</a>,<a contenteditable="false" data-primary="drawing" data-secondary="randomly" data-type="indexterm">&#xA0;</a>este ejemplo usa valores de la funci&#xF3;n <code>random()</code> para modificar la posici&#xF3;n de l&#xED;neas en el lienzo. Cuando el rat&#xF3;n est&#xE1; en la izquierda del lienzo, el cambio es peque&#xF1;o; si se mueve a la derecha, los valores de <code>random()</code> aumentan y el movimiento se torna m&#xE1;s exagerado. Como la funci&#xF3;n <code>random()</code> est&#xE1; dentro del bucle <code>for</code>, se calcula un nuevo valor aleatorio para cada punto de cada l&#xED;nea:</p>

<figure><img alt="Ex 08 08" src="assets/images/gspj_08in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(240, 120);
}

function draw() {
  background(204);
  for (var x = 20; x &lt; width; x += 20) {
    var mx = mouseX / 10;
    var desplazamientoA = random(-mx, mx);
    var desplazamientoB = random(-mx, mx);
    line(x + desplazamientoA, 20, x - desplazamientoB, 100);
  }
}</pre>
</section>

<section data-type="sect2" id="ex-8-9">
<h2>Ejemplo 8-9: mueve figuras aleatoriamente</h2>

<p>Cuando se usa para  mover figuras alrededor de la pantalla, los valores aleatorios pueden generar im&#xE1;genes que son en apariencia m&#xE1;s naturales. En el siguiente ejemplo, la posici&#xF3;n del c&#xED;rculo es modificada por valores aleatorios en cada ejecuci&#xF3;n de<a contenteditable="false" data-primary="draw() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="background() function" data-type="indexterm">&#xA0;</a> <code>draw()</code>. Como no se usa la funci&#xF3;n <code>background()</code>, las posiciones anteriores permanecen dibujadas:</p>

<figure><img alt="Ex 08 09" src="assets/images/gspj_08in07.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var velocidad = 2.5;
var diametro = 20;
var x;
var y;

function setup() {
  createCanvas(240, 120);
  x = width/2;
  y = height/2;
  background(204);
}

function draw() {
  x += random(-velocidad, velocidad);
  y += random(-velocidad, velocidad);
  ellipse(x, y, diametro, diametro);
}</pre>

<p>Si observas este ejemplo durante el tiempo suficiente, el c&#xED;rculo podr&#xED;a dejar la pantalla y volver. Esto depende del azar, pero podr&#xED;amos a&#xF1;adir unas estructuras <code>if</code> o usar la funci&#xF3;n <code>constrain()</code> <a contenteditable="false" data-primary="constrain() function" data-type="indexterm">&#xA0;</a>para evitar que el c&#xED;rculo deje la pantalla.</p>

<p>La funci&#xF3;n <code>constrain()</code> limita el valor a un rango espec&#xED;fico, el que puede ser usado para mantener <code>x</code> e <code>y</code> dentro de los l&#xED;mites del lienzo. Al reemplazar la funci&#xF3;n <code>draw()</code> anterior con el siguiente c&#xF3;digo, te asegurar&#xE1;s que la elipse permanezca en la pantalla:</p>

<pre data-code-language="p5js" data-type="programlisting">function draw() {
  x += random(-velocidad, velocidad);
  y += random(-velocidad, velocidad);
  x = constrain(x, 0, width);
  y = constrain(y, 0, height);
  ellipse(x, y, diametro, diametro);
}</pre>

<div data-type="note" id="W98wTMx">
<p>La funci&#xF3;n <code>randomSeed()</code><a contenteditable="false" data-primary="randomSeed() function" data-type="indexterm">&#xA0;</a>&#xA0;puede ser usada para forzar a <span class="keep-together"><code>random()</code></span> a producir la misma secuencia de n&#xFA;meros cada vez que un programa es ejecutado. Esto es descrito con mayor detalle en la  <em>Referencia de p5.js</em>.</p>
</div>
</section>
</section>

<section data-type="sect1" id="temporizadores-W98WhXx">
<h1>Temporizadores</h1>

<p>Cada programa de p5.js<a contenteditable="false" data-primary="timers, in animation" data-type="indexterm" id="t8ia">&#xA0;</a><a contenteditable="false" data-primary="animation" data-secondary="timers" data-type="indexterm" id="a8t">&#xA0;</a>cuenta la cantidad de tiempo que ha pasado desde que empez&#xF3;. Cuenta en milisegundos (mil&#xE9;simas de segundo), as&#xED; que despu&#xE9;s de 1 segundo el contador est&#xE1; en 1.000; despu&#xE9;s de 5 segundos est&#xE1; en 5.000 y despu&#xE9;s de un minuto en 60.000. Podemos usar este contador para gatillar animaciones en momentos espec&#xED;ficos. La funci&#xF3;n <a contenteditable="false" data-primary="millis() function" data-type="indexterm">&#xA0;</a><span class="keep-together"><code>millis()</code></span> retorna el valor del contador.</p>

<section data-type="sect2" id="ejemplo-8-10-el-tiempo-pasa-4xNAhm0">
<h2>Ejemplo 8-10: el tiempo pasa</h2>

<p>Puedes ver c&#xF3;mo el tiempo pasa cuando ejecutas este programa::</p>

<pre data-code-language="p5js" data-type="programlisting">function draw() {
  var timer = millis();
  print(timer);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-8-11-gatillando-eventos-temporizados-vxqBhV9">
<h2>Ejemplo 8-11: gatillando eventos temporizados</h2>

<p>Cuando se combinan con un bloque<a contenteditable="false" data-primary="if blocks" data-type="indexterm">&#xA0;</a> <code>if</code>, los valores de <code>millis()</code> pueden ser usados para secuenciar tanto animaciones como eventos en un programa. Por ejemplo, despu&#xE9;s de que han pasado dos segundos, el c&#xF3;digo dentro del bloque <code>if</code> puede gatillar un cambio. En este ejemplo, las variables llamadas <code>momento1</code> y <code>momento2</code> determinan cu&#xE1;ndo modificar el valor de la variable <code>x</code>:</p>

<pre data-code-language="p5js" data-type="programlisting">var momento1 = 2000;
var momento2 = 4000;
var x = 0;

function setup() {
  createCanvas(480, 120);
}

function draw() {
  var momentoActual = millis();
  background(204);
  if (momentoActual &gt; momento2) {
    x -= 0.5;
  } else if (momentoActual &gt; momento1) {
    x += 2;
  }
  ellipse(x, 60, 90, 90);
}</pre>
<a contenteditable="false" data-primary="animation" data-secondary="timers" data-startref="a8t" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="timers, in animation" data-startref="t8ia" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="circular-q9EPhnx">
<h1>Circular</h1>

<p>Si <a contenteditable="false" data-primary="animation" data-secondary="circular motion" data-type="indexterm" id="a8cm"></a><a contenteditable="false" data-primary="circular motion" data-type="indexterm" id="cm8"></a>eres un as de la trigonometr&#xED;a, ya sabes cu&#xE1;n incre&#xED;bles son las funciones <em>seno</em> y <em>coseno</em>. Si no lo eres, esperamos que los siguientes ejemplos pueden gatillar tu inter&#xE9;s. No discutiremos aqu&#xED; los detalles matem&#xE1;ticos, pero s&#xED; mostraremos unas pocas aplicaciones para generar movimiento fluido.</p>

<p>La <a data-type="xref" href="#Fig_08_02">Figura 8-2</a> muestra una visualizaci&#xF3;n de valores de la onda sinusoidal y c&#xF3;mo se relacionan con &#xE1;ngulos. En la parte superior e inferior de la onda, observa c&#xF3;mo la tasa de cambio (el cambio en el eje vertical) desacelera, se detiene y luego cambia de direcci&#xF3;n. Es esta cualidad de la curva lo que genera un movimiento interesante.</p>

<p>Las funciones <code>sin()</code> y <code>cos()</code><a contenteditable="false" data-primary="cos() and sin() functions" data-type="indexterm" id="csf8">&#xA0;</a><a contenteditable="false" data-primary="sin() and cos() functions" data-type="indexterm" id="sc8f">&#xA0;</a>de p5.js retornan valores entre -1 y 1 para la funci&#xF3;n seno y coseno del &#xE1;ngulo especificado. Tal como <code>arc()</code>, los &#xE1;ngulos deben ser escritos en radianes (revisar <a data-type="xref" href="#ex-3-7">Ejemplo 3-7</a> y <a data-type="xref" href="#ex-3-8">Ejemplo 3-8</a> para un recordatorio de c&#xF3;mo funcionan los radianes). Para ser &#xFA;til para dibujar, los valores <code>float</code> <a contenteditable="false" data-primary="float values" data-type="indexterm">&#xA0;</a>retornados por <code>sin()</code> y <code>cos()</code> son usualmente multiplicados por un valor m&#xE1;s grande.</p>

<figure id="Fig_08_02"><img alt="Fig 08 02" src="assets/images/gspj_0802.png">
<figcaption><b>Figura 8-2. </b>El trazado de los valores de seno de un &#xE1;ngulo que se mueve alrededor de un c&#xED;rculo resulta en una onda sinusoidal</figcaption>
</figure>

<section data-type="sect2" id="ejemplo-8-12-valores-de-la-onda-sinusoidal-gG5kh7x">
<h2>Ejemplo 8-12: valores de la onda sinusoidal</h2>

<p>Este<a contenteditable="false" data-primary="animation" data-secondary="sine wave values/movement" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="sine wave values/movement" data-type="indexterm">&#xA0;</a>ejemplo muestra c&#xF3;mo los valores de <code>sin()</code> oscilan entre -1 y 1 a medida que el &#xE1;ngulo aumenta. Con la funci&#xF3;n <code>map()</code><a contenteditable="false" data-primary="map() function" data-type="indexterm">&#xA0;</a>, la variable <code>valorSeno</code> es convertida desde este rango a valores de 0 a 255. Este nuevo valor es usado para definir el color del fondo del lienzo:</p>

<pre data-code-language="p5js" data-type="programlisting">var angulo = 0.0;

function draw() {
  var valorSeno = sin(angulo);
  print(valorSeno);
  var gris = map(valorSeno, -1, 1, 0, 255);
  background(gris);
  angulo += 0.1;
}</pre>
</section>

<section data-type="sect2" id="ejemplo-8-13-movimiento-de-una-onda-sinusoidal-OG4dhXG">
<h2>Ejemplo 8-13: movimiento de una onda sinusoidal</h2>

<p>Este ejemplo muestra c&#xF3;mo estos valores pueden ser convertidos en movimiento:</p>

<figure><img alt="Ex 08 13" src="assets/images/gspj_08in08.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var angulo = 0.0;
var desplazamiento = 60;
var escalar = 40;
var velocidad = 0.05;

function setup() {
  createCanvas(240, 120);
}

function draw() {
  background(0);
  var y1 = desplazamiento + sin(angulo) * escalar;
  var y2 = desplazamiento + sin(angulo + 0.4) * escalar;
  var y3 = desplazamiento + sin(angulo + 0.8) * escalar;
  ellipse( 80, y1, 40, 40);
  ellipse(120, y2, 40, 40);
  ellipse(160, y3, 40, 40);
  angulo += velocidad;
}</pre>
</section>

<section data-type="sect2" id="ejemplo-8-14-movimiento-circular-kxeyhax">
<h2>ejemplo 8-14: movimiento circular</h2>

<p>Cuando las funciones&#xA0;<code>sin()</code> y <code>cos()</code> son usadas en conjunto, pueden producir movimiento circular. Los valores de la funci&#xF3;n <code>cos()</code> proveen los valores de la coordenada <em>x</em> y los valores de la funci&#xF3;ne <code>sin()</code> &#xA0;&#xA0;proveen la coordenada <em>y</em>. Ambas son multiplicados por una variable llamada <code>escalar</code> &#xA0;para modificar el radio del movimiento y son sumadas con un valor offset (desfase) para situar el centro de un movimiento circular:</p>

<figure><img alt="Ex 08 14" src="assets/images/gspj_08in09.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var angulo = 0.0;
var desplazamiento = 60;
var escalar = 30;
var velocidad = 0.05;

function setup() {
  createCanvas(120, 120);
  background(204);
}

function draw() {
  var x = desplazamiento + cos(angulo) * escalar;
  var y = desplazamiento + sin(angulo) * escalar;
  ellipse(x, y, 40, 40);
  angulo += velocidad;
}</pre>
</section>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-8-15-espirales-oG66hrG">
<h2>Ejemplo 8-15: espirales</h2>

<p>Un <a contenteditable="false" data-primary="animation" data-secondary="spirals" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="spirals, creating" data-type="indexterm">&#xA0;</a>peque&#xF1;o cambio hecho para aumentar el valor <code>escalar</code> en cada cuadro produce una espiral en vez de un c&#xED;rculo:</p>

<figure><img alt="Ex 08 15" src="assets/images/gspj_08in10.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var angulo = 0.0;
var desplazamiento = 60;
var escalar = 2;
var velocidad = 0.05;

function setup() {
  createCanvas(120, 120);
  fill(0);
  background(204);
}

function draw() {
  var x = desplazamiento + cos(angulo) * escalar;
  var y = desplazamiento + sin(angulo) * escalar;
  ellipse(x, y, 2, 2);
  angulo += velocidad;
  escalar += velocidad;
}</pre>
<a contenteditable="false" data-primary="animation" data-secondary="circular motion" data-startref="a8cm" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="circular motion" data-startref="cm8" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="cos() and sin() functions" data-startref="csf8" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="sin() and cos() functions" data-startref="sc8f" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="robot-6-movimiento-Vxkrhe0">
<h1>Robot 6: movimiento</h1>

<figure><img alt="Robot 6" src="assets/images/gspj_08in11.png">
<figcaption>
</figcaption></figure>

<p>En <a contenteditable="false" data-primary="robot programs (examples)" data-secondary="random and circular motion" data-type="indexterm" id="rp8racm">&#xA0;</a>este ejemplo, las t&#xE9;cnicas para movimiento aleatorio y circular son aplicadas al robot. La funci&#xF3;n <code>background()</code> fue removida para ver m&#xE1;s claramente c&#xF3;mo cambian las posiciones del robot y de su cuerpo.</p>

<p>En cada cuadro, un n&#xFA;mero aleatorio entre -4 y 4 es sumado a la coordenada<em>x</em> y un n&#xFA;mero aleatorio entre -1 y 1 es sumado a la coordenada <em>y</em>. Esto causa que el robot se mueva m&#xE1;s de izquierda a derecha que de arriba a abajo. Los n&#xFA;meros calculados por la funci&#xF3;n <code>sin()</code> cambian la altura del cuello para que oscile entre 50 y 100 pixeles de altura:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = 180;           // Coordenada x
var y = 400;           // Coordenada y
var bodyHeight = 153;  // Altura del cuerpo
var neckHeight = 56;   // Altura del cuello
var radius = 45;       // Radio de la cabeza
var angle = 0.0;       // &#xC1;ngulo de movimiento

function setup() {
  createCanvas(360, 480);
  ellipseMode(RADIUS);
  background(204);
}
<!--Page Break--><br class="pagebreak-after">
function draw() {
  // Modifica la posici&#xF3;n en un monto aleatorio peque&#xF1;o
  x += random(-4, 4);
  y += random(-1, 1);

  // Modifica la altura del cuello
  neckHeight = 80 + sin(angle) * 30;
  angle += 0.05;

 // Ajusta la altura de la cabeza
 var ny = y - bodyHeight - neckHeight - radius;

 // Cuello
 stroke(102);
 line(x+2, y-bodyHeight, x+2, ny);
 line(x+12, y-bodyHeight, x+12, ny);
 line(x+22, y-bodyHeight, x+22, ny);

 // Antenas
 line(x+12, ny, x-18, ny-43);
 line(x+12, ny, x+42, ny-99);
 line(x+12, ny, x+78, ny+15);

 // Cuerpo
 noStroke();
 fill(102);
 ellipse(x, y-33, 33, 33);
 fill(0);
 rect(x-45, y-bodyHeight, 90, bodyHeight-33);
 fill(102);
 rect(x-45, y-bodyHeight+17, 90, 6);

 // Cabeza
 fill(0);
 ellipse(x+12, ny, radius, radius);
 fill(255);
 ellipse(x+24, ny-6, 14, 14);
 fill(0);
 ellipse(x+24, ny-6, 3, 3);
}</pre>
<a contenteditable="false" data-primary="animation" data-startref="a8" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="robot programs (examples)" data-secondary="random and circular motion" data-startref="rp8racm" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="8wj0HKW">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-09-function_LMedit"><img src="assets/images/gspj_09in01.png"><figcaption></figcaption></figure>


</section>

<section data-type="chapter" id="functions" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Funciones</h1>

<p class="lede">Las funciones <a contenteditable="false" data-primary="functions" data-type="indexterm" id="f9"></a>son los bloques fundamentales de los programas hechos en p5.js. Han aparecido en cada ejemplo que hemos presentado. Por ejemplo, hemos usado a menudo la funci&#xF3;n <span class="keep-together"><code class="codeLede">createCanvas()</code></span>, la funci&#xF3;n <code class="codeLede">line()</code>, y la funci&#xF3;n <code class="codeLede">fill()</code>. Este cap&#xED;tulo muestra c&#xF3;mo escribir nuevas funciones para extender las capacidades de p5.js m&#xE1;s all&#xE1; de sus caracter&#xED;sticas ya incorporadas.</p>

<p>El poder de las funciones es su modularidad. Las funciones son unidades de software independientes que son usadas para construir programas complejos - como bloques de LEGO, donde cada tipo de ladrillo sirve para un prop&#xF3;sito espec&#xED;fico y hacer un modelo complejo requiere usar las diferentes partes en conjunto. Al igual que las funciones, el verdadero poder de estos ladrillos es la capacidad de construir muchas formas distintas usando el mismo conjunto de elementos. El mismo grupo de LEGOs que forma una nave espacial puede ser reusado para construir un cami&#xF3;n, un rascacielos y muchos otros objetos.</p>

<p>Las funciones son &#xFA;tiles si quieres dibujar una forma m&#xE1;s compleja como un &#xE1;rbol, una y otra vez. La funci&#xF3;n para dibujar un &#xE1;rbol puede estar compuesta de funciones de p5.js, como <code>line()</code>, Despu&#xE9;s de que el c&#xF3;digo para dibujar el &#xE1;rbol es escrito, no necesitas pensar en los detalles para dibujar un &#xE1;rbol nuevamente - puedes simplemente escribir <code>arbol()</code> (o alg&#xFA;n otro nombre que le hayas puesto a la funci&#xF3;n) para dibujar la figura. Las funciones permiten que una secuencia compleja de declaraciones pueda ser abstra&#xED;da, para que te puedas enfocar en una meta de alto nivel (como dibujar un &#xE1;rbol), y no en los detalles de la implementaci&#xF3;n (las funciones <code>line()</code> que definen la forma del &#xE1;rbol). Una vez que una funci&#xF3;n es definida, el c&#xF3;digo dentro de la funci&#xF3;n no necesita ser repetido.</p>

<section data-type="sect1" id="fundamentos-de-funciones-rD8VS7b">
<h1>Fundamentos de funciones</h1>

<p>Un <a contenteditable="false" data-primary="functions" data-secondary="basics of" data-type="indexterm" id="f9bo">&#xA0;</a>computador ejecuta los programas una l&#xED;nea de c&#xF3;digo a la vez. Cuando una funci&#xF3;n es ejecutada, el computador salta a donde la funci&#xF3;n est&#xE1; definida y corre el c&#xF3;digo ah&#xED;, luego vuelve a donde estaba anteriormente.</p>

<section data-type="sect2" id="ex-9-1">
<h2>Ejemplo 9-1: lanza los dados</h2>

<p>Este comportamiento es ilustrado con la funci&#xF3;n <code>rollDice()</code> escrita para este ejemplo. Cuando el programa empieza, ejecuta el c&#xF3;digo en <code>setup()</code> y luego se detiene. El programa toma un desv&#xED;o y ejecuta el c&#xF3;digo dentro de <code>rollDice()</code> cada vez que aparece:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  print(&#xA1;Listo para lanzar los dados!&quot;);
  lanzarDado(20);
  lanzarDado(20);
  lanzarDado(6);
  print(&quot;Listo.&quot;);
}

function lanzarDado(numeroLados) {
  var d = 1 + int(random(numeroLados));
  print(&quot;Lanzando... &quot; + d);
}</pre>

<p>Las dos l&#xED;neas de c&#xF3;digo en <code>lanzarDado()</code> seleccionan un n&#xFA;mero aleatorio entre 1 y el n&#xFA;mero de caras del dado e imprime ese n&#xFA;mero a la consola. Como los n&#xFA;meros son aleatorios, ver&#xE1;s diferentes n&#xFA;meros cada vez que el prorgama es ejecutado:</p>

<pre data-type="programlisting">&#xA1;Listo para lanzar los dados!
Lanzando... 20
Lanzando... 11
Lanzando... 1
Listo.</pre>

<p>Cada vez que la funci&#xF3;n <code>lanzarDado()</code> es ejecutada dentro de <code>setup()</code>, el c&#xF3;digo dentro de la funci&#xF3;n se ejecuta de arriba a abajo, luego el programa contin&#xFA;a con la siguiente l&#xED;nea dentro de <code>setup()</code>.</p>

<p>La funci&#xF3;n<a contenteditable="false" data-primary="random() function" data-type="indexterm">&#xA0;</a><code>random()</code> (descrita en <a data-type="xref" href="#random">Aleatoreidad</a>) retorna un n&#xFA;mero entre 0 y hasta (pero sin incluir) el n&#xFA;mero especificado. Entonces <code>random(6)</code> entrega un n&#xFA;mero entre 0 y 5.99999. . . Como <code>random()</code> retorna un n&#xFA;mero con punto decimal, tambi&#xE9;n usamos la funci&#xF3;n <code>int()</code> para convertir el n&#xFA;mero a uno entero. Entonces <code>int(random(6))</code> retornar&#xE1; 0, 1, 2, 3, 4, o 5. Le sumamos 1 para que el n&#xFA;mero retornado est&#xE9; entre 1 y 6 (como en un dado).Como en muchas otros casos en este libro, contar desde 0 hace m&#xE1;s f&#xE1;cil usar los resultados de <code>random()</code> en conjunto con otros c&#xE1;lculos.</p>
</section>

<section data-type="sect2" id="ejemplo-9-2-otra-manera-de-tirar-los-dados-M0zzS60">
<h2>Ejemplo 9-2: otra manera de tirar los dados</h2>

<p>Si se hubiera hecho un programa equivalente, pero sin la funci&#xF3;n <code>lanzarDado()</code>, hubiera sido as&#xED;:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  print(&quot;&#xA1;Listo para lanzar los dados!&quot;);
  var d1 = 1 + int(random(20));
  print(&quot;Lanzando... &quot; + d1);
  var d2 = 1 + int(random(20));
  print(&quot;Lanzando... &quot; + d2);
  var d3 = 1 + int(random(6));
  print(&quot;Lanzando... &quot; + d3);
  print(&quot;Listo.&quot;);
}</pre>

<p>La funci&#xF3;n <code>lanzarDado()</code> en el <a data-type="xref" href="#ex-9-1">Ejemplo 9-1</a> hace que el c&#xF3;digo sea m&#xE1;s f&#xE1;cil de leer y mantener. El programa es m&#xE1;s claro, porque el nombre de la funci&#xF3;n claramente determina su prop&#xF3;sito. En este ejemplo, podemos ver la funci&#xF3;n <code>random()</code> en <code>setup()</code>, pero su uso no es tan obvio. El n&#xFA;mero de lados en un dado es m&#xE1;s claro con una funci&#xF3;n: cuando el c&#xF3;digo dice <code>lanzarDado(6)</code>, es obvio que est&#xE1; simulando el lanzamiento de un dado de seis caras. Adem&#xE1;s, el <a data-type="xref" href="#ex-9-1">Ejemplo 9-1</a> es f&#xE1;cil de mantener, porque la informaci&#xF3;n no est&#xE1; repetida. La frase <code>Lanzando...</code> se repite tres veces en este caso. Si quieres cambiar el texto a algo distinto, tienes que actualizar el c&#xF3;digo en tres lugares, en vez de hacer una sola edici&#xF3;n dentro de la funci&#xF3;n <code>rollDice()</code>. Adem&#xE1;s, como ver&#xE1;s en el <a data-type="xref" href="#ex-9-5">Ejemplo 9-5</a>, una funci&#xF3;n puede hacer un programa mucho m&#xE1;s corto (y por lo tanto m&#xE1;s f&#xE1;cil de mantener y leer), lo que ayuda a reducir el potencial n&#xFA;mero de<a contenteditable="false" data-primary="functions" data-secondary="basics of" data-startref="f9bo" data-type="indexterm">&#xA0;</a>errores.</p>
</section>
</section>

<section data-type="sect1" id="construye-una-funcion-709VSnD">
<h1>Construye una funci&#xF3;n</h1>

<p>En esta secci&#xF3;n, dibujaremos una lechuza para explicar los pasos necesarios para hacer una funci&#xF3;n.</p>

<section data-type="sect2" id="ex-9-3">
<h2>Ejemplo 9-3: dibuja la lechuza</h2>

<p>Primero,<a contenteditable="false" data-primary="functions" data-secondary="creating" data-type="indexterm" id="f9c">&#xA0;</a>dibujaremos la lechuza sin usar una funci&#xF3;n:</p>

<figure><img alt="Ex 09 03" src="assets/images/gspj_09in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  translate(110, 110);
  stroke(0);
  strokeWeight(70);
  line(0, -35, 0, -65); // Cuerpo
  noStroke();
  fill(204);
  ellipse(-17.5, -65, 35, 35);  // Pupila izquierda
  ellipse(17.5, -65, 35, 35);   // Pupila derecha
  arc(0, -65, 70, 70, 0, PI);   // Barbilla
  fill(0);
  ellipse(-14, -65, 8, 8);  // Ojo izquierdo
  ellipse(14, -65, 8, 8);   // Ojo derecho
  quad(0, -58, 4, -51, 0, -44, -4, -51); // Pico
}</pre>

<p>Observa que la funci&#xF3;n<a contenteditable="false" data-primary="translate() function" data-type="indexterm">&#xA0;</a><code>translate()</code> es usada para mover el origen (0, 0) 110 pixeles a la derecha y 110 pixeles hacia abajo. Luego la lechuza es dibujada relativa al (0,0), con sus coordenadas algunas veces positivas y otras negativas, centradas alrededor del nuevo punto (0,0). (Ver <a data-type="xref" href="#Fig_09_01">Figura 9-1</a>.)</p>

<figure id="Fig_09_01"><img alt="Fig 09 01" src="assets/images/gspj_0901.png">
<figcaption><b>Figura 9-1. </b>Las coordenadas de las lechuzas</figcaption>
</figure>
</section>

<section data-type="sect2" id="ex-9-4">
<h2>Ejemplo 9-4: dos son compa&#xF1;&#xED;a</h2>

<p>El c&#xF3;digo del <a data-type="xref" href="#ex-9-3">Ejemplo 9-3</a> adimos una segunda, el largo del c&#xF3;digo es casi el doble:</p>

<figure><img alt="Ex 09 04" src="assets/images/gspj_09in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);

  // Lechuza izquierda
  translate(110, 110);
  stroke(0);
  strokeWeight(70);
  line(0, -35, 0, -65); // Cuerpo
  noStroke();
  fill(204);
  ellipse(-17.5, -65, 35, 35);  // Pupila izquierda
  ellipse(17.5, -65, 35, 35);   // Pupila derecha
  arc(0, -65, 70, 70, 0, PI);   // Barbilla
  fill(0);
  ellipse(-14, -65, 8, 8);  // Ojo izquierdo
  ellipse(14, -65, 8, 8);   // Ojo derecho
  quad(0, -58, 4, -51, 0, -44, -4, -51); // Pico

  // Lechuza derecha
  translate(70, 0);
  stroke(0);
  strokeWeight(70);
  line(0, -35, 0, -65); // Cuerpo
  noStroke();
  fill(255);
  ellipse(-17.5, -65, 35, 35);  // Pupila izquierda
  ellipse(17.5, -65, 35, 35);   // Pupila derecha
  arc(0, -65, 70, 70, 0, PI);   // Barbilla
  fill(0);
  ellipse(-14, -65, 8, 8);  // Ojo izquierdo
  ellipse(14, -65, 8, 8);   // Ojo derecho
  quad(0, -58, 4, -51, 0, -44, -4, -51); // Pico
}</pre>

<p>El programa crece de 21 l&#xED;neas de c&#xF3;digo a 34, el c&#xF3;digo para dibujar la primera lechuza fue copiado y pegado en el programa y una funci&#xF3;n <code>translate()</code> fue insertada para moverla 70 pixeles a la derecha. Esto es una manera tediosa e ineficiente de dibujar la segunda lechuza, sin mencionar el dolor de cabeza que ser&#xE1; a&#xF1;adir una tercera lechuza con este m&#xE9;todo. Duplicar el c&#xF3;digo es innecesario, porque este es el tipo de situaci&#xF3;n donde una funci&#xF3;n puede llegar al rescate.</p>
</section>

<section data-type="sect2" id="ex-9-5">
<h2>Ejemplo 9-5: una funci&#xF3;n lechuza</h2>

<p>En este ejemplo, se introduce una funci&#xF3;n para dibujar dos lechuzas con el mismo c&#xF3;digo. Si hacemos que el c&#xF3;digo que dibuja una lechuza en la pantalla sea una nueva funci&#xF3;n, entonces el c&#xF3;digo solamente necesita aparecer una vez en el programa:</p>

<figure><img alt="Ex 09 05" src="assets/images/gspj_09in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  lechuza(110, 110);
  lechuza(180, 110);
}

function lechuza(x, y) {
  push();
  translate(x, y);
  stroke(0);
  strokeWeight(70);
  line(0, -35, 0, -65); // Cuerpo
  noStroke();
  fill(255);
  ellipse(-17.5, -65, 35, 35); // Pupila izquierda
  ellipse(17.5, -65, 35, 35);  // Pupila derecha
  arc(0, -65, 70, 70, 0, PI);  // Barbilla
  fill(0);
  ellipse(-14, -65, 8, 8); // Ojo izquierdo
  ellipse(14, -65, 8, 8);  // Ojo derecho
  quad(0, -58, 4, -51, 0, -44, -4, -51); // Pico
  pop();
}</pre>

<p>Puedes ver por las ilustraciones de este ejemplo y del <a data-type="xref" href="#ex-9-4">Ejemplo 9-4</a> que tienen el mismo resultado, pero que este ejemplo es m&#xE1;s corto, porque el c&#xF3;digo para dibujar la lechuza aparece solamente una vez, dentro de la funci&#xF3;n llamada <code>lechuza()</code>. Este c&#xF3;digo es ejecutado dos veces, porque es llamado dos veces dentro de <code>draw()</code>. La lechuza es dibujada en dos ubicaciones distintas porque los par&#xE1;metros pasados a la funci&#xF3;n determinan las coordenadas <em>x</em> e <em>y</em>.</p>

<p>Los par&#xE1;metros son una parte importante de las funciones, porque proveen flexibilidad. Vimos otro ejemplo de esto en la funci&#xF3;n <code>lanzarDado()</code>; el par&#xE1;metro &#xFA;nico <code>numeroLados</code> hizo posible simular un dado de 6 caras, uno de 20 y cualquier otro n&#xFA;mero de caras.  Esto es parecido al caso de otras funciones de p5.js. Por ejemplo, los par&#xE1;metros de la funci&#xF3;n <code>line()</code> permiten dibujar una l&#xED;nea de un pixel a otro en el lienzo. Sin los par&#xE1;metros, la funci&#xF3;n solo ser&#xED;a capaz de dibujar una l&#xED;nea desde un punto fijo a otro fijo.</p>

<p>Cada par&#xE1;metro es una variable que es creada cada vez que la funci&#xF3;n se ejecuta. Cuando este ejemplo se ejecuta, la primera vez que se llama a la funci&#xF3;n <code>y</code>, el valor del par&#xE1;metro <code>x</code> es 110, y el par&#xE1;metro <code>y</code> tambi&#xE9;n es 110. En el segundo uso de la funci&#xF3;n, el valor de <code>x</code> es 180 e <code>y</code> nuevamente es 110. Cada valor es pasado a la funci&#xF3;n y luego cada vez que el nombre de la variable aparece dentro de la funci&#xF3;n, es reemplazado con el valor.</p>
</section>

<section data-type="sect2" id="ejemplo-9-6-aumentando-la-poblacion-extra-aAJeSRD">
<h2>Ejemplo 9-6: aumentando la poblaci&#xF3;n extra</h2>

<p>Ahora que tenemos una funci&#xF3;n b&#xE1;sica para dibujar la lechuza en cualquier ubicaci&#xF3;n, podemos ahora dibujar eficientemente muchas lechuzas  poniendo la funci&#xF3;n dentro de un bucle <code>for</code> y cambiando el primer par&#xE1;metro cada vez que corre el bucle:</p>

<figure><img alt="Ex 09 06" src="assets/images/gspj_09in05.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  for (var x = 35; x &lt; width + 70; x += 70) {
    lechuza(x, 110);
  }
}

// Insertar la funci&#xF3;n lechuza() del Ejemplo 9-5</pre>

<p>Es posible seguir a&#xF1;adiendo m&#xE1;s y m&#xE1;s par&#xE1;metros a la funci&#xF3;n para cambiar diferentes aspectos de c&#xF3;mo la lechuza es dibujada. Se pasan valores a la funci&#xF3;n para cambiar el color de la lechuza, la rotaci&#xF3;n, la escala o el di&#xE1;metro de los ojos.</p>
</section>

<section data-type="sect2" id="ejemplo-9-7-lechuzas-de-tamanos-diferentes-KAyqSBA">
<h2>Ejemplo 9-7: lechuzas de tama&#xF1;os diferentes</h2>

<p>En este ejemplo, hemos a&#xF1;adido dos par&#xE1;metros para cambiar el valor de gris y el tama&#xF1;o de cada lechuza:</p>

<figure><img alt="Ex 09 07" src="assets/images/gspj_09in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 120);
}

function draw() {
  background(204);
  randomSeed(0);
  for (var i = 35; i &lt; width + 40; i += 40) {
    var gris = int(random(0, 102));
    var escalar = random(0.25, 1.0);
    lechuza(i, 110, gris, escalar);
  }
}

function lechuza(x, y, g, s) {
  push();
  translate(x, y);
  scale(s);  // Define la escala
  stroke(g); // Define el valor de gris
  strokeWeight(70);
  line(0, -35, 0, -65); // Cuerpo
  noStroke();
  fill(255-g);
  ellipse(-17.5, -65, 35, 35); // Pupila izquierda
  ellipse(17.5, -65, 35, 35);  // Pupila derecha
  arc(0, -65, 70, 70, 0, PI);  // Barbilla
  fill(g);
  ellipse(-14, -65, 8, 8);  // Ojo izquierdo
  ellipse(14, -65, 8, 8);   // Ojo derecho
  quad(0, -58, 4, -51, 0, -44, -4, -51); // Pico
  pop();
}</pre>
<a contenteditable="false" data-primary="functions" data-secondary="creating" data-startref="f9c" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="valores-de-retorno-7DkVSO0">
<h1>Valores de retorno</h1>

<p>Las funciones <a contenteditable="false" data-primary="functions" data-secondary="return values" data-type="indexterm"></a>pueden hacer un c&#xE1;lculo y luego retornar un valor al programa principal. Ya hemos usado funciones de este tipo, incluyendo <code>random()</code> y <code>sin()</code>. Observa que cuando esta funci&#xF3;n aparece, el valor de retorno es usualmente asignado a una variable:</p>

<pre data-code-language="p5js" data-type="programlisting">var r = random(1, 10);</pre>

<p>En este caso, la funci&#xF3;n <code>random()</code> retorna un <a contenteditable="false" data-primary="random() function" data-type="indexterm"></a>valor entre 1 y 10, el que luego es asignado a la variable <code>r</code>.</p>

<p>Las funciones que retornan un valor son frecuentemente usadas como un par&#xE1;metro de otra funci&#xF3;n, como por ejemplo:</p>

<pre data-code-language="p5js" data-type="programlisting">point(random(width), random(height));</pre>

<p>En este caso, los valores de <code>random()</code> no son asignados a una variable - son pasados como par&#xE1;metros a la funci&#xF3;n <code>point()</code> y<a contenteditable="false" data-primary="point() function" data-type="indexterm">&#xA0;</a>son usados para posicionar el punto dentro del lienzo.</p>

<section data-type="sect2" id="ejemplo-9-8-retorna-un-valor-o0YZSJD">
<h2>Ejemplo 9-8: retorna un valor</h2>

<p>Para hacer que una funci&#xF3;n retorne un valor, especifica el dato a ser pasado de vuelta con la palabra clave <code>return</code>. En este ejemplo se incluye una funci&#xF3;n llamada <code>pesoMarte()</code> que calcula el peso de una persona u objeto en nuestro planeta vecino Marte:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  var tuPeso = 60;
  var pesoMarte = calcularMarte(tuPeso);
  print(pesoMarte);
}

function calculateMars(p) {
  var pesoNuevo = p * 0.38;
  return pesoNuevo;
}</pre>

<p>Revisa la &#xFA;ltima l&#xED;nea del c&#xF3;digo del bloque, que retorna la variable <span class="keep-together"><code>pesoNuevo</code></span>. En la segunda l&#xED;nea de <code>setup()</code>, el valor es asignado a la variable <code>pesoMarte</code>. (Para ver tu propio peso en Marte, cambia el valor asignado a la variable <code>tuPeso</code> por tu peso.)</p>
</section>
</section>

<section data-type="sect1" id="robot-7-funciones-9DE5S4D">
<h1>Robot 7: funciones</h1>

<figure><img alt="Robot 7" src="assets/images/gspj_09in07.png">
<figcaption>
</figcaption></figure>

<p>En <a contenteditable="false" data-primary="robot programs (examples)" data-secondary="drawRobot function" data-type="indexterm" id="rp9drf">&#xA0;</a>contraste con el Robot 2 (revisar <a data-type="xref" href="#robot2">Robot 2: variables</a>), este ejemplo usa una funci&#xF3;n para dibujar cuatro variaciones del robot dentro del mismo programa. Como la funci&#xF3;n <code>dibujarRobot()</code> aparece cuatro veces dentro de la funci&#xF3;n <code>draw()</code>, el c&#xF3;digo dentro del bloque <code>dibujarRobot()</code> es ejecutado cuatro veces, cada vez con un diferente conjunto de par&#xE1;metros para cambiar la posici&#xF3;n y la altura del cuerpo del robot.</p>

<p>Observa c&#xF3;mo las variables globales en Robot 2 ahora han sido aisladas dentro de la funci&#xF3;n <code>dibujarRobot()</code>. Como estas variables aplican solamente al dibujo del robot, tienen que estar dentro de las llaves que definen el bloque de la funci&#xF3;n <code>dibujarRobot()</code>. Como el valor de la variable <code>radius</code> no cambia, no necesita ser un par&#xE1;metro. En cambio, es definida al principio de <span class="keep-together"><code>dibujarRobot()</code></span>:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(720, 480);
  strokeWeight(2);
  ellipseMode(RADIUS);
}

function draw() {
  background(204);
  dibujarRobot(120, 420, 110, 140);
  dibujarRobot(270, 460, 260, 95);
  dibujarRobot(420, 310, 80, 10);
  dibujarRobot(570, 390, 180, 40);
}

function dibujarRobot(x, y, alturaCuerpo, alturaCuello) {

  var radius = 45;
  var ny = y - alturaCuerpo - alturaCuello - radius;

  // Cuello
  stroke(102);
  line(x+2, y - alturaCuerpo, x+2, ny);
  line(x+12, y - alturaCuerpo, x+12, ny);
  line(x+22, y - alturaCuerpo, x+22, ny);

  // Antenas
  line(x+12, ny, x-18, ny-43);
  line(x+12, ny, x+42, ny-99);
  line(x+12, ny, x+78, ny+15);

  // Cuerpo
  noStroke();
  fill(102);
  ellipse(x, y-33, 33, 33);
  fill(0);
  rect(x-45, y - alturaCuerpo, 90, alturaCuerpo - 33);
  fill(102);
  rect(x-45, y - alturaCuerpo + 17, 90, 6);

  // Cabeza
  fill(0);
  ellipse(x+12, ny, radius, radius);
  fill(255);
  ellipse(x+24, ny-6, 14, 14);
  fill(0);
  ellipse(x+24, ny-6, 3, 3);
  fill(153);
  ellipse(x, ny-8, 5, 5);
  ellipse(x+30, ny-26, 4, 4);
  ellipse(x+41, ny+6, 3, 3);
}</pre>
<a contenteditable="false" data-primary="functions" data-startref="f9" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="robot programs (examples)" data-secondary="drawRobot function" data-startref="rp9drf" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="vamGH7P">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-10-create-some-creatures"><img src="assets/images/gspj_10in01.png"><figcaption></figcaption></figure>

</section>

<section data-type="chapter" id="objects" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Objetos</h1>

<p class="lede">La <em>programaci&#xF3;n orientada a objetos</em> (OOP)<a contenteditable="false" data-primary="object-oriented programming (OOP)" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="objects" data-type="indexterm" id="o10">&#xA0;</a>es una manera diferente de pensar tus programas. Los <em>objetos</em> son tambi&#xE9;n una manera de agrupar variables con funciones relacionadas. Como ya sabes c&#xF3;mo trabajar con variables y funciones, los objetos simplemente combinan lo que ya has aprendido en un paquete m&#xE1;s f&#xE1;cil de entender.</p>

<p>Los objetos son importantes, porque permiten dividir las ideas en bloques m&#xE1;s peque&#xF1;os. Esto se parece al mundo real donde, por ejemplo, los &#xF3;rganos est&#xE1;n hechos de tejido, el tejido est&#xE1; hecho de c&#xE9;lulas y as&#xED;. Similarmente, a medida que tu c&#xF3;digo se va volviendo m&#xE1;s complejo, tienes que pensar en t&#xE9;rminos de estructuras m&#xE1;s peque&#xF1;as que forman estructuras m&#xE1;s complicadas. Es m&#xE1;s f&#xE1;cil escribir y mantener secciones de c&#xF3;digo m&#xE1;s peque&#xF1;as y f&#xE1;ciles de entender, que trabajan en conjunto con otras, que escribir una gran secci&#xF3;n de c&#xF3;digo que hace todo al mismo tiempo.</p>

<section data-type="sect1" id="propiedades-y-metodos-d7pAh9g">
<h1>Propiedades y m&#xE9;todos</h1>

<p>Un<a contenteditable="false" data-primary="objects" data-secondary="properties and methods" data-type="indexterm" id="o10pm">&#xA0;</a><a contenteditable="false" data-primary="properties" data-type="indexterm" id="p10">&#xA0;</a><a contenteditable="false" data-primary="methods" data-type="indexterm" id="m10">&#xA0;</a>objeto es un conjunto de variables y funciones relacionadas. En el contexto de los objetos, una variable se llama <em>propiedad</em> (o <em>variable de instancia</em>) y una funci&#xF3;n se llama <em> m&#xE9;todo</em>. Las propiedades y los m&#xE9;todos funcionan tal como las variables y las funciones vistas en los cap&#xED;tulos anteriores, pero usaremos estos nuevos t&#xE9;rminos para enfatizar que son parte de un objeto. Para decirlo de otra manera, un objeto combina datos relacionados (propiedades) con acciones y comportamientos relacionados (m&#xE9;todos). La idea es agrupar datos y m&#xE9;todos relacionados que pueden operar sobre datos.</p>

<p class="pagebreak-before">Por ejemplo, para hacer un modelo de una radio, piensa en los par&#xE1;metros que pueden ser ajustados y las acciones que pueden afectar estos par&#xE1;metros:</p>

<dl>
	<dt>Propiedades</dt>
	<dd><code>volumem</code>, <code>frecuencia</code>, <code>banda</code>(FM, AM), <code>poder</code>(encendido, apagado)</dd>
	<dt>M&#xE9;todos</dt>
	<dd><code>definirVolumen</code>, <code>definirFrecuencia</code>, <code>definirBanda</code></dd>
</dl>

<p>Modelar un dispostivo mec&#xE1;nico simple es f&#xE1;cil comparado a modelar un organismo como una hormiga o una persona. No es posible reducir un organismo complejo a unas pocas propiedades y m&#xE9;todos, pero es posible modelarlo suficientemente bien como para crear una simulaci&#xF3;n interesante. El video juego <em>The Sims</em>  es un ejemplo claro. Este juego consiste en administrar las actividades diarias de personas simuladas. Los personajes tienen la suficiente personalidad como para hacer adictivo el juego, pero no m&#xE1;s que eso. De hecho, ellos solo tienen cinco atributos de personalidad: ordenado, extrovertido, activo, juguet&#xF3;n y simp&#xE1;tico. Con el conocimiento de que es posible hacer un modelo altamente simplificado de organismos complejos, podr&#xED;amos empezar a programar una hormiga con unas pocas propiedades y m&#xE9;todos:</p>

<dl>
	<dt>Propiedades</dt>
	<dd><code>tipo</code>(trabajador, soldado), <code>peso</code>, <code>altura</code></dd>
	<dt>M&#xE9;todos</dt>
	<dd><code>caminar</code>, <code>pellizcar</code>, <code>liberarFeromonas</code>, <code>comer</code></dd>
</dl>

<p>Si hicieras una lista de las propiedades y m&#xE9;todos de una hormiga, podr&#xED;as escoger enfocarte en modelar diferentes aspectos de la hormiga. No existe una manera correcta de hacer un modelo, mientras sea apropiado para lograr las metas de tu<a contenteditable="false" data-primary="properties" data-startref="p10" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="objects" data-secondary="properties and methods" data-startref="o10pm" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="methods" data-startref="m10" data-type="indexterm">&#xA0;</a>programa.</p>
</section>

<section data-type="sect1" id="define-un-constructor-D7kNh0W">
<h1>Define un constructor</h1>

<p>Para crear un objeto, empieza por definir una funci&#xF3;n constructor. Una<a contenteditable="false" data-primary="objects" data-secondary="constructor functions" data-type="indexterm" id="o10cf">&#xA0;</a><a contenteditable="false" data-primary="constructor functions" data-type="indexterm" id="cf10">&#xA0;</a><em>funci&#xF3;n constructor</em> es la especificaci&#xF3;n de un objeto. Usando una analog&#xED;a arquitect&#xF3;nica, una funci&#xF3;n constructor es como el plano de una casa, y un objeto es como la casa en s&#xED; misma. Cada casa construida con el mismo plano puede tener variaciones, y el plano es la &#xFA;nica especificaci&#xF3;n, no una estructura fija. Por ejemplo, una casa puede ser azul y otra roja, una casa puede tener una chimenea y la otra no. Tal como los objetos, el constructor define los tipos de datos y comportamientos, pero cada objeto (casa) hecho a partir de la misma funci&#xF3;n constructor (plano) tiene variables (color, chimenea) que tienen distintos valores. Para usar un t&#xE9;rmino m&#xE1;s t&#xE9;cnico, cada objeto es una instancia y cada instancia tiene su propio conjunto de propiedades y m&#xE9;todos.</p>

<p>Antes de que escribas una funci&#xF3;n constructor, recomendamos un poco de planificaci&#xF3;n. Piensa en cu&#xE1;les propiedades y m&#xE9;todos deber&#xED;an tener tus objetos. Haz una lluvia de ideas para imaginar todas las opciones posibles y luego prioriza y haz tu mejor conjetura sobre qu&#xE9; funcionar&#xE1;. Har&#xE1;s cambios durante el proceso de programaci&#xF3;n, pero es importante empezar bien.</p>

<p>Elige nombres claros para tus propiedades. Las propiedades de un objeto pueden almacenar cualquier tipo de datos. Un objeto puede almacenar al mismo tiempo muchos booleans, n&#xFA;meros, imagenes, strings, etc. Ten en cuenta que una raz&#xF3;n para construir un objeto es agrupar elementos relacionados. Para tus m&#xE9;todos, selecciona nombres claros y decide los valores de retorno (si tienen). Los m&#xE9;todos son usados para modificar los valores de las propiedades y para realizar acciones basadas en los valores de las propiedades.</p>

<p>Para nuestra primera funci&#xF3;n constructor, convertiremos el <a data-type="xref" href="#ex-8-9">Ejemplo 8-9</a> del libro. Empezamos por hacer una lista de las propiedades del ejemplo:</p>

<pre data-code-language="p5js" data-type="programlisting">var x
var y
var diametro
var velocidad</pre>

<p>El siguiente paso es resolver cu&#xE1;les m&#xE9;todos pueden ser &#xFA;tiles para el objeto. Revisando la funci&#xF3;n <code>draw()</code> del ejemplo que estamos adaptando, vemos dos componentes principales. La posici&#xF3;n de la figura es actualizada y dibujada en la pantalla. Creamos dos m&#xE9;todos para nuestro objeto, uno para cada tarea:</p>

<pre data-code-language="p5js" data-type="programlisting">function mover()
function mostrar()</pre>

<p>Ninguno de nuestros m&#xE9;todos retorna un valor. Una vez que hemos determinado las propiedades y m&#xE9;todos que el objeto deber&#xED;a tener, escribiremos nuestra funci&#xF3;n constructor para asignarlos a cada instancia del objeto que crearemos (<a data-type="xref" href="#Fig_10_01">Figura 10-1</a>).</p>

<figure id="Fig_10_01"><img alt="Fig 10 01" src="assets/images/gspj_1001.png">
<figcaption><b>Figura 10-1. </b>Pasar valores al constructor para que defina los valores de las propiedades de un objeto</figcaption>
</figure>

<p class="pagebreak-before">El c&#xF3;digo dentro la funci&#xF3;n constructor es ejecutado una vez cuando el objeto es creado. Para crear la funci&#xF3;n constructor, seguiremos tres pasos:</p>


<ol>
	<li>
	<p>Crear un bloque de funci&#xF3;n.</p>
	</li>
	<li>
	<p>A&#xF1;adir las propiedades y asignarles valores.</p>
	</li>
	<li>
	<p>A&#xF1;adir los m&#xE9;todos.</p>
	</li>
</ol>

<p>Primero, creamos un bloque de funci&#xF3;n para nuestro constructor:</p>

<pre data-code-language="p5js" data-type="programlisting">function JitterBug() {

}</pre>

<p>Observa que el nombre <code>JitterBug</code> empieza con may&#xFA;scula. No es necesario nombrar la funci&#xF3;n constructor con letra may&#xFA;scula, pero es una convenci&#xF3;n (que recomendamos encarecidamente) usada para denotar que es un constructor. (La palabra clave <code>function</code>, sin embargo, debe ser <span class="keep-together">min&#xFA;scula</span> porque es una regla del lenguaje de programaci&#xF3;n.)</p>

<p>En segundo lugar, a&#xF1;adimos las propiedades. JavaScript posee una palabra reservada especial, <code>this</code>, <a contenteditable="false" data-primary="this keyword" data-type="indexterm">&#xA0;</a>que puedes usar dentro la funci&#xF3;n constructor para referirte al objeto actual. Cuando declaras una propiedad de un objeto, dejamos fuera el s&#xED;mbolo <code>var</code>, y en vez de eso anteponemos el nombre de la variable con <code>this.</code> para indicar que estamos asignando una propiedad, una variable del objeto. Podemos declarar y asignar la propiedad <code>velocidad</code> de la siguiente manera:</p>

<pre data-code-language="p5js" data-type="programlisting">function JitterBug() {
  this.velocidad = 0.5;
}</pre>

<p>Mientras estamos haciendo esto, tenemos que decidir qu&#xE9; propiedades tendr&#xE1;n sus valores pasados a trav&#xE9;s del <em>constructor</em>. Como regla general, los valores de las propiedades que quieres que sean diferentes para cada instancia son pasados a trav&#xE9;s del constructor, y los otros valores de propiedades pueden ser definidos dentro del constructor, como <code>velocidad</code> en este caso. Para el objeto <code>JitterBug</code>, hemos decidido que los valores de <code>x</code>, <code>y</code>, y <code>diametro</code> ser&#xE1;n ingresados. Cada uno de los valores pasados es asignado a una variable temporal que existe solo mientras el c&#xF3;digo es ejecutado. Para aclarar esto, hemos a&#xF1;adido el nombre <code>temp</code> a cada una de estas variables, pero pueden ser nombradas con cualquier nombre que prefieras. Ser&#xE1;n usadas solo para asignar los valores de las propiedades que son parte del objeto. As&#xED; que a&#xF1;adimos <code>tempX</code>, <code>tempY</code>, y <code>tempDiametro</code> como par&#xE1;metros de la funci&#xF3;n, y las propiedades son declaradas y asignadas as&#xED;:</p>

<pre data-code-language="p5js" data-type="programlisting">function JitterBug(tempX, tempY, tempDiametro) {
  this.x = tempX;
  this.y = tempY;
  this.diametro = tempDiametro;
  this.velocidad = 0.5; // El mismo valor para cada instancia
}</pre>

<p>El &#xFA;ltimo paso es a&#xF1;adir los <a contenteditable="false" data-primary="methods" data-type="indexterm">&#xA0;</a>m&#xE9;todos. Esto es igual que escribir funciones, pero aqu&#xED; est&#xE1;n contenidas dentro de la funci&#xF3;n constructor, y la primera l&#xED;nea es escrita un poco distinta. Normalmente, una funci&#xF3;n para actualizar variables se escribe as&#xED;:</p>

<pre data-code-language="p5js" data-type="programlisting">function mover() {
  x += random(-velocidad, velocidad);
  y += random(-velocidad, velocidad);
}</pre>

<p>Como queremos hacer que esta funci&#xF3;n sea un m&#xE9;todo del objeto, nuevamente necesitamos usar la palabra reservada <code>this</code>. La funci&#xF3;n anterior puede ser convertida en un m&#xE9;todo as&#xED;:</p>

<pre data-code-language="p5js" data-type="programlisting">this.mover = function() {
  this.x += random(-this.velocidad, this.velocidad);
  this.y += random(-this.velocidad, this.velocidad);
};</pre>

<p>La primera l&#xED;nea se ve un poco extra&#xF1;a, pero la manera de interpretarla es &quot;crea una variable de instancia (propiedad) llamada <code>move</code>, y luego as&#xED;gnale como valor esta funci&#xF3;n.&quot; Luego, cada vez que nos referimos a las propiedades del objeto, podemos nuevamente usar <code>this.</code>, tal como lo hacemos cuando est&#xE1;n inicialmente declaradas. Juntando todo en el constructor el resultado es este:</p>

<pre data-code-language="p5js" data-type="programlisting">function JitterBug(tempX, tempY, tempDiametro) {

  this.x = tempX;
  this.y = tempY;
  this.diametro = tempDiametro;
  this.velocidad = 2.5;

  this.mover = function() {
    this.x += random(-this.velocidad, this.velocidad);
    this.y += random(-this.velocidad, this.velocidad);
  };

  this.mostrar = function() {
    ellipse(this.x, this.y, this.diametro, this.diametro);
  };

}</pre>

<p>Tambi&#xE9;n observa el espaciado en el c&#xF3;digo. Cada l&#xED;nea dentro del constructor est&#xE1; indentada unos pocos espacios para indicar lo que est&#xE1; dentro del bloque. Dentro de estos m&#xE9;todos, el c&#xF3;digo est&#xE1; espaciado nuevamente para mostrar claramente la<a contenteditable="false" data-primary="constructor functions" data-startref="cf10" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="objects" data-secondary="constructor functions" data-startref="o10cf" data-type="indexterm"></a>jerarqu&#xED;a.</p>
</section>

<section data-type="sect1" id="crea-objetos-VWe6hq7">
<h1>Crea objetos</h1>

<p>Ahora <a contenteditable="false" data-primary="objects" data-secondary="creating" data-type="indexterm" id="o10c">&#xA0;</a>que has definido una funci&#xF3;n constructor, para usarla en un programa debes crear un instancia de objeto con ese constructor. Existen dos pasos para crear un objeto:</p>

<ol>
	<li>
	<p>Declara la variable de objeto.</p>
	</li>
	<li>
	<p>Crea (inicializa) el objeto con la palabra clave <code>new</code>.</p>
	</li>
</ol>

<section data-type="sect2" id="ex-10-1">
<h2>Ejemplo 10-1: crea un objeto</h2>

<p>Para crear tu primer objeto, empezaremos mostrando c&#xF3;mo esto funciona en un bosquejo de p5.js y luego explicaremos cada parte en profundidad:</p>

<figure><img alt="Ex 10 01" src="assets/images/gspj_10in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var bug;

function setup() {
  createCanvas(480, 120);
  background(204);
  // Crea un objeto y pasa los par&#xE1;metros
  bug = new JitterBug(width/2, height/2, 20);
}

function draw() {
  bug.mover();
  bug.mostrar();
}

// Copia aqu&#xED; el c&#xF3;digo del constructor de Jitterbug</pre>

<p>Declaramos variables de objeto de la misma manera que todas las otras variables - el objeto es declarado escribiendo la palabra reservada <code>var</code> seguida <a contenteditable="false" data-primary="var keyword" data-type="indexterm">&#xA0;</a> del nombre de la variable:</p>

<pre data-code-language="p5js" data-type="programlisting">var bug;</pre>

<p>El segundo paso es inicializar el objeto con la <a contenteditable="false" data-primary="new keyword" data-type="indexterm">&#xA0;</a>palabra reservada <code>new</code>. Reserva espacio en la memoria para el objeto con todas sus propiedades y m&#xE9;todos. El nombre del constructor es escrito a la derecha de la palabra reservada <code>new</code>, seguido de los par&#xE1;metros dentro del constructor, si es que tiene alguno:</p>

<pre data-code-language="p5js" data-type="programlisting">bug = new JitterBug(width/2, height/2, 20);</pre>

<p>
Los tres n&#xFA;meros dentro de los par&#xE9;ntesis son los par&#xE1;metros pasados a la funci&#xF3;n constructor <code>JitterBug</code>. El n&#xFA;mero y orden de estos par&#xE1;metros deben corresponder con los del constructor.</p>
</section>

<section data-type="sect2" id="ejemplo-10-2-crea-multiples-objetos-N7YNh9g">
<h2>Ejemplo 10-2: crea m&#xFA;ltiples objetos</h2>

<p>En el <a data-type="xref" href="#ex-10-1">Ejemplo 10-1</a>,<a contenteditable="false" data-primary="objects" data-secondary="multiple" data-type="indexterm" id="o10m">&#xA0;</a>vimos algo nuevo: el punto que es usado para acceder a los m&#xE9;todos del objeto dentro de <code>draw()</code>. El operador punto es usado para unir el nombre del objeto con sus propiedades y m&#xE9;todos. Es an&#xE1;logo a la manera en que usamos<a contenteditable="false" data-primary="this keyword" data-type="indexterm">&#xA0;</a><code>this.</code> dentro de la funci&#xF3;n constructor, pero cuando nos referimos a esto fuera del constructor, <code>this</code> es reemplazado por el nombre de la variable.</p>

<p>Esto se vuelve m&#xE1;s claro en este ejemplo, donde se hacen dos objetos a partir del mismo constructor. La funci&#xF3;n <code>jit.mover()</code> se refiere al m&#xE9;todo <code>mover()</code> que pertenece al objeto <code>jit</code>, y <code>bug.mover()</code> se refiere al m&#xE9;todo <code>mover()</code> que pertenece al objeto llamado <code>bug</code>:</p>

<figure><img alt="Ex 10 02" src="assets/images/gspj_10in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var jit;
var bug;

function setup() {
  createCanvas(480, 120);
  background(204);
  jit = new JitterBug(width * 0.33, height/2, 50);
  bug = new JitterBug(width * 0.66, height/2, 10);
}

function draw() {
  jit.mover();
  jit.mostrar();
  bug.mover();
  bug.mostrar();
}

// Copia aqu&#xED; el c&#xF3;digo del constructor de JitterBug</pre>

<p>Ahora que la funci&#xF3;n constructor existe como su propio m&#xF3;dulo de c&#xF3;digo, cualquier cambio modificar&#xE1; los objetos hechos con &#xE9;lla. Por ejemplo, podr&#xED;as a&#xF1;adir una propiedad al constructor <code>JitterBug</code> que controla el color, u otra que determina su tama&#xF1;o. Estos valores pueden ser pasados usando el constructor o usando m&#xE9;todos adicionales, como <code>setColor()</code> o <code>setSize()</code>. Y como es una unidad auto-contenida, tambi&#xE9;n puedes usar el constructor <code>JitterBug</code> en otro bosquejo.</p>

<p>Ahora es un buen momento para aprender a usar m&#xFA;ltiples archivos en JavaScript. Repartir tu c&#xF3;digo en m&#xE1;s de un archivo hace que un c&#xF3;digo largo sea m&#xE1;s f&#xE1;cil de editar y m&#xE1;s manejable en general. Usualmente se crea un nuevo archivo por cada constructor, lo que refuerza la modularidad de trabajar con objetos y hace que el c&#xF3;digo sea m&#xE1;s f&#xE1;cil de encontrar.</p>

<p>Crea un nuevo archivo en el mismo directorio que tu actual archivo <em>sketch.js</em>. Puedes nombrarlo como quieras, pero es una buena idea nombrarlo <em>JitterBug.js</em>&#xA0;por conceptos de organizaci&#xF3;n. Mueve la funci&#xF3;n constructor JitterBug a este nuevo archivo. Enlaza el archivo <em>JitterBug.js</em> en tu archivo HTML a&#xF1;adiendo una l&#xED;nea dentro de <code>HEAD</code> debajo de la l&#xED;nea donde enlazas el archivo <em>sketch.js</em>:</p>

<pre data-code-language="html" data-type="programlisting">&lt;script type=&quot;text/javascript&quot; src=&quot;sketch.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;JitterBug.js&quot;&gt;&lt;/script&gt;</pre>
<a contenteditable="false" data-primary="objects" data-secondary="creating" data-startref="o10c" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="objects" data-secondary="multiple" data-startref="o10m" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="robot8">
<h1>Robot 8: objetos</h1>

<figure><img alt="Robot 8" src="assets/images/gspj_10in04.png">
<figcaption>
</figcaption></figure>

<p>Un <a contenteditable="false" data-primary="robot programs (examples)" data-secondary="objects" data-type="indexterm" id="rp10o">&#xA0;</a>objeto en software puede combinar m&#xE9;todos (funciones) y propiedades (variables) en una unidad. La funci&#xF3;n constructor <code>Robot</code> en este ejemplo define todos los objetos robot que ser&#xE1;n creados a partir de ella. Cada objeto <code>Robot</code> posee su propio conjunto de propiedades para almacenar una posici&#xF3;n y la ilustraci&#xF3;n que dibujar&#xE1; en la pantalla. Cada uno tiene m&#xE9;todos para actualizar la posici&#xF3;n y mostrar la ilustraci&#xF3;n.</p>

<p>Los par&#xE1;metros de <code>bot1</code> y <code>bot2</code> en <code>setup()</code> definen las coordenadas <em>x</em> e <em>y</em> y el archivo <em>.svg</em> que ser&#xE1; usado para dibujar el robot. Los par&#xE1;metros <code>tempX</code> y <code>tempY</code>  son pasados al constructor y asignados a las propiedades <code>xpos</code> y <code>ypos</code>. El par&#xE1;metro <code>imgPath</code> es usado para cargar la ilustraci&#xF3;n asociada. Los objetos (<code>bot1</code> y <code>bot2</code>) dibujan en su propia ubicaci&#xF3;n con una ilustraci&#xF3;n distinta porque cada uno tienen valores distintos pasados a los objetos a trav&#xE9;s de sus constructores:</p>

<pre data-code-language="p5js" data-type="programlisting">var img1;
var img2;

var bot1;
var bot2;

function preload() {
  img1 = loadImage(&quot;robot1.svg&quot;);
  img2 = loadImage(&quot;robot2.svg&quot;);
}

function setup() {
  createCanvas(720, 480);
  bot1 = new Robot(img1, 90, 80);
  bot2 = new Robot(img2, 440, 30);
}

function draw() {
  background(204);

  // Actualiza y muestra el primer robot
  bot1.actualizar();
  bot1.mostrar();

  // Actualiza y muestra el segundo robot
  bot2.actualizar();
  bot2.mostrar();
}

function Robot(img, tempX, tempY) {
  // Define los valores iniciales de las propiedades
  this.xpos = tempX;
  this.ypos = tempY;
  this.angle = random(0, TWO_PI);
  this.botImage = img;
  this.ydesplazo = 0.0;

  // Actualiza las propiedades
  this.actualizar = function() {
    this.angle += 0.05;
    this.ydesplazamiento = sin(this.angle) * 20;
  }

  // Dibuja el robot en la pantallla
  this.mostrar = function() {
    image(this.botImage, this.xpos, this.ypos + this.ydesplazamiento);
  }
}</pre>
<a contenteditable="false" data-primary="objects" data-startref="o10" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="robot programs (examples)" data-secondary="objects" data-startref="rp10o" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="8WPoszd">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-11-array"><img src="assets/images/gspj_11in01.png"><figcaption></figcaption></figure>

</section>

this.angulo<section data-type="chapter" id="arrays" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Arreglos</h1>

<p class="lede">Un<a contenteditable="false" data-primary="arrays" data-type="indexterm" id="a11">&#xA0;</a><em>arreglo</em> es una lista de variables que comparten el mismo nombre. Los arreglos son &#xFA;tiles porque hacen posible trabajar con m&#xE1;s variables sin crear un nombre nuevo para cada una. Esto hace que el c&#xF3;digo sea m&#xE1;s corto, m&#xE1;s f&#xE1;cil de leer y de actualizar.</p>

<section data-type="sect1" id="de-variables-a-arreglos-p2reh6a">
<h1>De variables a arreglos</h1>

<p><span style="letter-spacing: 0.01em; line-height: 1.3em;">Cuando <a contenteditable="false" data-primary="variables" data-secondary="arrays versus" data-type="indexterm" id="v11av">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="variables versus" data-type="indexterm" id="a11vv"></a>un programa necesita</span><span style="letter-spacing: 0.01em; line-height: 1.3em;"> mantener registro de una o dos cosas, no es necesario crear un arreglo. De hecho, usar un arreglo podria hacer que el programa sea m&#xE1;s complicado de lo necesario. Sin embargo, cuando un programa posee muchos elementos (por ejemplo, un campo de estrellas en un juego sobre el espacio o m&#xFA;ltiples puntos de datos en una visualizaci&#xF3;n), los arreglos hacen que el c&#xF3;digo sea m&#xE1;s f&#xE1;cil de escribir..</span></p>

<section data-type="sect2" id="ex-11-1">
<h2>Ejemplo 11-1: Muchas variables</h2>

<p>Para entender lo que esto significa, revisa el <a data-type="xref" href="#ex-8-3">Ejemplo 8-3</a>. Este c&#xF3;digo funciona bien si estamos moviendo una sola figura, &#xBF;pero qu&#xE9; pasa si queremos tener dos? Necesitamos crear una nueva variable <code>x</code> y actualizarla dentro de <code>draw()</code>:</p>

<figure><img alt="Ex 11 01" src="assets/images/gspj_11in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var x1 = -20;
var x2 = 20;

function setup() {
  createCanvas(240, 120);
  noStroke();
}

function draw() {
  background(0);
  x1 += 0.5;
  x2 += 0.5;
  arc(x1, 30, 40, 40, 0.52, 5.76);
  arc(x2, 90, 40, 40, 0.52, 5.76);
}</pre>
</section>

<section data-type="sect2" id="ejemplo-11-2-demasiadas-variables-kY60hba">
<h2>Ejemplo 11-2: demasiadas variables</h2>

<p>El c&#xF3;digo del ejemplo anterior todav&#xED;a es manejable, &#xBF;pero qu&#xE9; pasa si queremos tener cinco c&#xED;rculos? Necesitamos a&#xF1;adir tres otras variables a las dos que ya tenemos:</p>

<figure><img alt="Ex 11 02" src="assets/images/gspj_11in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var x1 = -10;
var x2 = 10;
var x3 = 35;
var x4 = 18;
var x5 = 30;

function setup() {
  createCanvas(240, 120);
  noStroke();
}

function draw() {
  background(0);
  x1 += 0.5;
  x2 += 0.5;
  x3 += 0.5;
  x4 += 0.5;
  x5 += 0.5;
  arc(x1, 20, 20, 20, 0.52, 5.76);
  arc(x2, 40, 20, 20, 0.52, 5.76);
  arc(x3, 60, 20, 20, 0.52, 5.76);
  arc(x4, 80, 20, 20, 0.52, 5.76);
  arc(x5, 100, 20, 20, 0.52, 5.76);
}</pre>

<p>&#xA1;Este c&#xF3;digo est&#xE1; empezando a salirse de control!</p>
</section>

<section data-type="sect2" id="ex-11-3">
<h2>Ejemplo 11-3: arreglos, no variables</h2>

<p>Imagina lo que pasar&#xED;a si quisieras tener 3.000 c&#xED;rculos. Esto significar&#xED;a crear 3.000 variables individuales y luego actualizar cada una de ellas por separado. &#xBF;Podr&#xED;as mantener registro de esta cantidad de variables? &#xBF;Quieres hacerlo? En vez de eso, usemos un arreglo:</p>

<figure><img alt="Ex 11 03" src="assets/images/gspj_11in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var x = [];

function setup() {
  createCanvas(240, 120);
  noStroke();
  fill(255, 200);
  for (var i = 0; i &lt; 3000; i++) {
    x[i] = random(-1000, 200);
  }
}

function draw() {
  background(0);
  for (var i = 0; i &lt; x.length; i++) {
    x[i] += 0.5;
    var y = i * 0.4;
    arc(x[i], y, 12, 12, 0.52, 5.76);
  }
}</pre>

<p>Durante el resto de este cap&#xED;tulo revisaremos los detalles que hacen que este ejemplo sea posible.<a contenteditable="false" data-primary="arrays" data-secondary="variables versus" data-startref="a11vv" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="variables" data-secondary="arrays versus" data-startref="v11av" data-type="indexterm">&#xA0;</a></p>
</section>
</section>

<section data-type="sect1" id="construir-un-arreglo-5Y1lh62">
<h1>Construir un arreglo</h1>

<p>Cada<a contenteditable="false" data-primary="arrays" data-secondary="creating" data-type="indexterm" id="a11cr">&#xA0;</a>&#xED;tem en el arreglo es llamado<a contenteditable="false" data-primary="elements, in arrays" data-type="indexterm">&#xA0;</a>un <em>elemento</em>, y cada uno tiene un valor de<a contenteditable="false" data-primary="index values" data-type="indexterm">&#xA0;</a><em>&#xED;ndice</em> para se&#xF1;alar su posici&#xF3;n dentro del arreglo. Al igual que las coordenadas en el lienzo, los valores de &#xED;ndice de un arreglo se cuentan desde 0. Por ejemplo, el primer elemento en el arreglo tiene un &#xED;ndice con valor 0, el segundo elemento del arreglo tiene un &#xED;ndice con valor 1, y as&#xED;. Si hay 20 valores en el arreglo, el valor del &#xED;ndice del &#xFA;ltimo elemento es 19. <a data-type="xref" href="#Fig_11_01">Figura 11-1</a> muestra la estructura conceptual de un arreglo.</p>

<figure id="Fig_11_01"><img alt="Fig 11 01" src="assets/images/gspj_1101.png">
<figcaption><b>Figura 11-1. </b>Un arreglo es una lista de una o m&#xE1;s variables que comparten el mismo nombre</figcaption>
</figure>

<p>Usar arreglos es similar a trabajar con variables &#xFA;nicas, sigue los mismos patrones. Como ya sabes, con este c&#xF3;digo puedes crear una sola variable llamada <code>x</code>:</p>

<pre data-code-language="p5js" data-type="programlisting">var x;</pre>

<p>Para crear un arreglo, basta con definir que el valor de la variable sea un par de corchetes vac&#xED;os:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = [];</pre>

<p>Observa que no es necesario declarar por adelantado la longitud del arreglo, la longitud es determinada por el n&#xFA;mero de elementos que t&#xFA; pones en &#xE9;l.</p>

<div data-type="note" id="MY3PSxW">
<p>Un arreglo puede almacenar todos los diferentes tipos de datos (<code>boolean</code>, <code>number</code>, <code>string</code>, etc.). Puedes mezclar y combinar diferentes tipos de datos en un mismo arreglo.</p>
</div>

<p>Antes de que nos adelantemos, paremos y hablemos en mayor detalle sobre el trabajo con arreglos. Existen dos pasos cuando se trabaja con arreglos:</p>

<ol>
	<li>
	<p>Declarar el arreglo.</p>
	</li>
	<li>
	<p>Asignar valores a cada elemento.</p>
	</li>
</ol>

<p>Cada paso puede ocurrir en una l&#xED;nea distinta, o se pueden combinar los dos pasos en uno. Cada uno de los dos siguientes ejemplos muestra una t&#xE9;cnica diferente para crear un arreglo llamado <code>x</code> que almacena dos n&#xFA;meros, 12 y 2. Presta mucha atenci&#xF3;n a lo que ocurre antes de <code>setup()</code> <a contenteditable="false" data-primary="setup() function" data-type="indexterm">&#xA0;</a>y a lo que ocurre dentro de <code>setup()</code>.</p>

<section data-type="sect2" id="ejemplo-11-4-declara-y-asigna-un-arreglo-MY3jhn2">
<h2>Ejemplo 11-4: declara y asigna un arreglo</h2>

<p>Primero,<a contenteditable="false" data-primary="arrays" data-secondary="declaring and assigning" data-type="indexterm" id="a11dc">&#xA0;</a>declaramos un arreglo fuera de <code>setup()</code> y luego creamos y asignamos valores dentro. La sintaxis <code>x[0]</code> se refiere al primer elemento del arreglo y <code>x[1]</code> al segundo:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = [];        // Declara el arreglo

function setup() {
  createCanvas(200, 200);
  x[0] = 12;       // Asigna el primer valor
  x[1] = 2;        // Asigna el segundo valor
}</pre>
</section>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-11-5-asigna-valores-en-un-arreglo-en-una-pasada-Va8Ehk2">
<h2>Ejemplo 11-5: asigna valores en un arreglo en una pasada</h2>

<p>Tambi&#xE9;n puedes asignar valores a un arreglo cuando es creado, cuando todo es parte de la misma instrucci&#xF3;n:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = [12, 2]; // Declara y asigna

function setup() {
  createCanvas(200, 200);
}</pre>

<div data-type="note" id="y2OGSD2">
<p>Evita crear arreglos dentro de <code>draw()</code>, porque crear un nuevo arreglo en cada cuadro har&#xE1; disminuir la tasa de cuadros.</p>
</div>
</section>

<section data-type="sect2" id="ejemplo-11-6-revisitando-el-primer-ejemplo-y2O4hOY">
<h2>Ejemplo 11-6: revisitando el primer ejemplo</h2>

<p>Como un ejemplo completo de c&#xF3;mo usar arreglos, hemos reescrito el <a data-type="xref" href="#ex-11-1">Ejemplo 11-1</a> aqu&#xED;. A pesar de que no vemos todav&#xED;a todos los beneficios revelados en el <a data-type="xref" href="#ex-11-3">Ejemplo 11-3</a>, s&#xED; vemos algunos detalles importantes de c&#xF3;mo funcionan los arreglos:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = [-20, 20];

function setup() {
  createCanvas(240, 120);
  noStroke();
}

function draw() {
  background(0);
  x[0] += 0.5;  // Incrementa el primer elemento
  x[1] += 0.5;  // Incrementa el segundo elemento
  arc(x[0], 30, 40, 40, 0.52, 5.76);
  arc(x[1], 90, 40, 40, 0.52, 5.76);
}</pre>
<a contenteditable="false" data-primary="arrays" data-secondary="creating" data-startref="a11cr" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="declaring and assigning" data-startref="a11dc" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="sect1" id="repeticion-y-arreglos-1aebh62">
<h1>Repetici&#xF3;n y arreglos</h1>

<p>El bucle<a contenteditable="false" data-primary="for loops" data-type="indexterm">&#xA0;</a><code>for</code>, <a contenteditable="false" data-primary="arrays" data-secondary="repetition and" data-type="indexterm" id="a11ra">&#xA0;</a>introducido en <a data-type="xref" href="#repetition">Repeticio&#x301;n</a>, har&#xE1; m&#xE1;s f&#xE1;cil trabajar con arreglos grandes mientras el c&#xF3;digo se mantiene conciso. La idea es escribir un bucle para recorrer cada elemento del arreglo, uno a uno. Para hacerlo, necesitar&#xE1;s saber el largo del arreglo. La propiedad <code>length</code><a contenteditable="false" data-primary="length property" data-type="indexterm">&#xA0;</a>asociada con cada arreglo almacena el n&#xFA;mero de elementos. Usamos el nombre del arreglo con el operador punto (un punto) para acceder a este valor. Por ejemplo:</p>

<pre data-code-language="p5js" data-type="programlisting">var x = [12, 20];         // Declara y asigna valores al arreglo
print(x.length);          // Imprime 2 en la consola

var y = [&quot;gato&quot;, 10, false, 50]; // Declara y asigna valores al arreglo
print(y.length);          // Imprime 4 en la consola

var z = [];               // Declara un arreglo vac&#xED;o
print(z.length);          // Imprime 0 en la consola
z[0] = 20;                // Asigna un elemento al arreglo
print(z.length);          // Imprime 1 en la consola
z[1] = 4;                 // Asigna un elemento al arreglo
print(z.length);          // Imprime 2 en la consola
</pre>

<section data-type="sect2" id="ex-11-7">
<h2>Ejemplo 11-7: llenando un arreglo con un bucle for</h2>

<p>Un bucle <code>for</code> <a contenteditable="false" data-primary="arrays" data-secondary="filling in a for loop" data-type="indexterm">&#xA0;</a>puede ser usado para llenar un arreglo con valores, o para leer los valores. En este ejemplo, primero el arreglo es llenado con n&#xFA;meros aleatorios dentro de <code>setup()</code>, y luego esos n&#xFA;meros son usados para definir el trazado dentro de <code>draw()</code>. Cada vez que el programa se ejecuta, un nuevo conjunto de valores aleatorios es ingresado en el arreglo:</p>

<figure class="left-align"><img alt="Ex 11 07" src="assets/images/gspj_11in05.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var gris = [];

function setup() {
  createCanvas(240, 120);
  for (var i = 0; i &lt; width; i++) {
    gris[i] = random(0, 255);
  }
}

function draw() {
&#xA0; background(204);
  for (var i = 0; i &lt; gris.length; i++) {
    stroke(gris[i]);
    line(i, 0, i, height);
  }
}</pre>

<p>En <code>setup()</code>, insertamos tantos elementos como el ancho del lienzo. Esto es un n&#xFA;mero arbitrario, lo hemos elegido para que al dibujar una l&#xED;nea vertical por cada elemento, se llene el ancho del lienzo. Puedes probar cambiando <code>width</code> a cualquier n&#xFA;mero. Una vez que los elementos son asignados al arreglo, somos capaces de iterar a trav&#xE9;s de ellos en <code>draw()</code> usando la propiedad <code>length</code>. No podemos iterar a trav&#xE9;s del arreglo en <code>setup()</code> porque antes de que se ingrese un elemento, el largo del arreglo <code>gris</code> es 0.</p>
</section>

<section data-type="sect2" id="ejemplo-11-8-sigue-la-trayectoria-del-raton-ZW7jhJY">
<h2>Ejemplo 11-8: sigue la trayectoria del rat&#xF3;n</h2>

<p>En este<a contenteditable="false" data-primary="mouse movement tracking, with arrays" data-type="indexterm" id="m11tmwa">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="tracking mouse movements with" data-type="indexterm" id="a11tmmw">&#xA0;</a>ejemplo, existen dos arreglos para almacenar la posici&#xF3;n del rat&#xF3;n - uno para la coordenada <em>x</em> y uno para la coordenada <em>y</em>. Estos arreglos almacenan la posici&#xF3;n del rat&#xF3;n durante los &#xFA;ltimos 60 cuadros. En cada nuevo cuadro, los valores de las coordenadas <em>x</em> e <em>y</em> m&#xE1;s antiguas son removidas y reemplazadas con los valores actuales de <code>mouseX</code> y <code>mouseY</code>. Los nuevos valores son a&#xF1;adidos a la primera posici&#xF3;n del arreglo, pero antes de que esto ocurra, cada valor del arreglo es movido una posici&#xF3;n a la derecha (desde el &#xFA;ltimo hasta el primero) para hacer lugar a los n&#xFA;meros nuevos. (Revisa <a data-type="xref" href="#Fig_11_02">Figura 11-2</a> para ver un diagrama que ilustra este proceso). Este ejemplo visualiza esta acci&#xF3;n. Adem&#xE1;s, en cada cuadro, las 60 coordenadas son usadas para dibujar una serie de elipses en la pantalla:</p>

<figure><img alt="Ex 11 08" src="assets/images/gspj_11in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var num = 60;
var x = [];
var y = [];

function setup() {
  createCanvas(240, 120);
  noStroke();

  for (var i = 0; i &lt; num; i++) {
    x[i] = 0;
    y[i] = 0;
  }
}

function draw() {
  background(0);
  // Copia los valores del arreglo de atr&#xE1;s hacia adelante
  for (var i = num-1; i &gt; 0; i--) {
    x[i] = x[i-1];
    y[i] = y[i-1];
  }
  x[0] = mouseX; // Define el primer elemento
  y[0] = mouseY; // Define el primer elemento
  for (var i = 0; i &lt; num; i++) {
    fill(i * 4);
    ellipse(x[i], y[i], 40, 40);
  }
}</pre>

<figure id="Fig_11_02"><img alt="Fig 11 02" src="assets/images/gspj_1102.png">
<figcaption><b>Figura 11-2. </b>Trasladando los valores de un arreglo un lugar hacia la derecha</figcaption>
</figure>
</section>
</section>

<section data-type="sect1" id="arreglos-de-objetos-QWzJhXW">
<h1>Arreglos de objetos</h1>

<p>Los<a contenteditable="false" data-primary="objects" data-secondary="arrays of" data-type="indexterm" id="o11ao">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="of objects" data-type="indexterm" id="a11oo">&#xA0;</a><a contenteditable="false" data-primary="mouse movement tracking, with arrays" data-startref="m11tmwa" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="tracking mouse movements with" data-startref="a11tmmw" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="repetition and" data-startref="a11ra" data-type="indexterm">&#xA0;</a>dos ejemplos cortos de esta secci&#xF3;n juntan cada gran concepto de programaci&#xF3;n en este libro: iteraci&#xF3;n, condicionales, funciones, objetos y arreglos. Hacer un arreglo de objetos es casi lo mismo que construir los arreglos que introducimos en las p&#xE1;ginas anteriores, pero existe una consideraci&#xF3;n inicial: como cada elemento es un objeto, primero debe ser creado con la palabra reservada <code>new</code> (tal como cualquier otro objeto) antes de ser asignado a un arreglo. Con un objeto construido por el usuario como <code>JitterBug</code> (revisar <a data-type="xref" href="#objects">10/Objetos</a>), esto significa que <code>new</code> definir&#xE1; cada elemento antes de ser asignado al arreglo.</p>

<section data-type="sect2" id="ex-11-9">
<h2>Ejemplo 11-9: administrando varios objetos</h2>

<p>Este ejemplo crea un arreglo de 33 objetos <code>JitterBug</code> y luego actualiza y muestra cada uno dentro de <code>draw()</code>. Para que este ejemplo funcione, necesitas a&#xF1;adir la funci&#xF3;n constructor <code>JitterBug</code> al c&#xF3;digo:</p>

<figure><img alt="Ex 11 9" src="assets/images/gspj_11in07.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var bichos = [];

function setup() {
  createCanvas(240, 120);
  background(204);
  for (var i = 0; i &lt; 33; i++) {
    var x = random(width);
    var y = random(height);
    var r = i + 2;
    bichos[i] = new JitterBug(x, y, r);
  }
}

function draw() {
  for (var i = 0; i &lt; bugs.length; i++) {
    bichos[i].mover();
    bichos[i].mostrar();
  }
}

// Copia aqu&#xED; el c&#xF3;digo de la funci&#xF3;n constructor de Jitterbug</pre>

<p>El ejemplo final de arreglos carga una secuencia de im&#xE1;genes y almacena cada elemento dentro de un arreglo.</p>
</section>

<section class="pagebreak-before" data-type="sect2" id="ejemplo-11-10-secuencias-de-imagenes-EYlLhzY">
<h2>Ejemplo 11-10: secuencias de im&#xE1;genes</h2>

<p>Para ejecutar<a contenteditable="false" data-primary="images" data-secondary="sequences of" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="sequences of images stored in" data-type="indexterm" id="a11soi">&#xA0;</a>este ejemplo, obt&#xE9;n las im&#xE1;genes del archivo <em>media.zip</em> tal como fue descrito en el cap&#xED;tulo <a data-type="xref" href="#media">7/Medios</a>. Las im&#xE1;genes tienen nombres secuenciales (<em>frame-0000.png</em>, <em>frame-0001.png</em>, etc.), lo que hace posible crear el nombre de cada archivo dentro de un bucle <code>for</code>, tal como vemos en la s&#xE9;ptima l&#xED;nea del programa:</p>

<figure><img alt="Ex 11 10" src="assets/images/gspj_11in08.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var numeroCuadros = 12; // El n&#xFA;mero de cuadros
var imagenes = []; // Crea el arreglo
var cuadroActual = 0;

function preload() {
  for (var i = 0; i &lt; numeroCuadros; i++) {
    var nombreImagen = &quot;frame-&quot; + nf(i, 4) + &quot;.png&quot;;
    imagenes[i] = loadImage(nombreImagen); // Carga cada imagen
  }
}

function setup() {
  createCanvas(240, 120);
  frameRate(24);
}

function draw() {
  image(imagenes[cuadroActual], 0, 0);
  cuadroActual++; // Siguiente cuadro
  if (cuadroActual == imagenes.length) {
    cuadroActual = 0;  // Retorna al primer cuadro
  }
}</pre>

<p> La funci&#xF3;n <code>nf()</code> <a contenteditable="false" data-primary="nf() function" data-type="indexterm">&#xA0;</a>define el formato de n&#xFA;meros de modo que <code>nf(1, 4)</code> retorna el string &quot;0001&quot; y <code>nf(11, 4)</code> retorna &quot;0011&quot;. Estos valores est&#xE1;n concatenados con el inicio del nombre del archivo (<em>frame-</em>) y la terminaci&#xF3;n (<em>.png</em>) para crear el nombre completo del archivo almacenado en una variable. Los archivos son cargados en un arreglo en la siguiente l&#xED;nea. Las im&#xE1;genes son mostradas en la pantalla una a la vez en <code>draw()</code>. Cuando la &#xFA;ltima imagen del arreglo es mostrada, el programa vuelve al principio del arreglo y muestra de nuevo las im&#xE1;genes en<a contenteditable="false" data-primary="objects" data-secondary="arrays of" data-startref="o11ao" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="sequences of images stored in" data-startref="a11soi" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="of objects" data-startref="a11oo" data-type="indexterm">&#xA0;</a>secuencia.</p>
</section>
</section>

<section data-type="sect1" id="robot-9-arreglos-w2njhk2">
<h1>Robot 9: arreglos</h1>

<figure><img alt="Robot 9" src="assets/images/gspj_11in09.png">
<figcaption>
</figcaption></figure>

<p>Los arreglos <a contenteditable="false" data-primary="robot programs (examples)" data-secondary="arrays of objects" data-type="indexterm" id="rp11aoo">&#xA0;</a>hacen m&#xE1;s f&#xE1;cil que un programa trabaje con muchos elementos. En este ejemplo, un arreglo de objetos <code>Robot</code> es declarado al principio. El arreglo es luego posicionado dentro de <code>setup()</code>, y cada objeto <code>Robot</code> es creado dentro del bucle <code>for</code>. Dentro de <code>draw()</code>, otro bucle <code>for</code> es usado para actualizar y mostrar cada elemento del arreglo <code>bots</code>.</p>

<p>El bucle <code>for</code> con un arreglo son una combinaci&#xF3;n poderosa. Observa las diferencias sutiles entre el c&#xF3;digo de este ejemplo y Robot 8 (revisa <a data-type="xref" href="#robot8">Robot 8: objetos</a>) en contraste con los cambios extremos en el resultado visual. Una vez que el arreglo es creado y se incluye un bucle <code>for</code>, es igualmente f&#xE1;cil trabajar con 3 elementos que con 3.000.</p>

<pre data-code-language="p5js" data-type="programlisting">var imagenRobot;
var bots = [];  // Declara un arreglo para almacenar objetos Robot

function preload() {
  imagenRobot = loadImage(&quot;robot1.svg&quot;);
}

function setup() {
  createCanvas(720, 480);

  var numRobots = 20;

  // Crea cada objeto
  for (var i = 0; i &lt; numRobots; i++) {
    // Crea una coordenada x aleatoria
    var x = random(-40, width-40);
    // Asigna la coordenada y basada en el orden
    var y = map(i, 0, numRobots, -100, height-200);
    bots[i] = new Robot(imagenRobot, x, y);
  }
}

function draw() {
  background(204);
  // Actualiza y muestra cada bot en el arreglo
  for (var i = 0; i &lt; bots.length; i++) {
    bots[i].actualizar();
    bots[i].mostrar();
  }
}

function Robot(img, tempX, tempY) {
  // Define los valores iniciales de las propiedades
  this.xpos = tempX;
  this.ypos = tempY;
  this.angulo = random(0, TWO_PI);
  this.botImagen= img;
  this.desplazamiento = 0.0;

 // Actualiza las propiedades
  this.actualizar = function() {
    this.angulo += 0.05;
    this.desplazamiento = sin(this.angulo) * 20;
  }

  // Dibuja el robot en la pantalla
  this.mostrar = function() {
    image(this.botImagen, this.xpos, this.ypos + this.desplazamiento);
  }
}</pre>
<a contenteditable="false" data-primary="arrays" data-startref="a11a11" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="robot programs (examples)" data-startref="rp11aoo" data-type="indexterm">&#xA0;</a></section>
</section>

<section data-type="introduction" class="opener notoc" id="N9qMIQ9">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-12-scan24"><img src="assets/images/gspj_12in01.png"><figcaption></figcaption></figure>

</section>

<section data-type="chapter" id="data" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Datos</h1>

<p class="lede">La<a contenteditable="false" data-primary="data" data-type="indexterm" id="d12">&#xA0;</a>visualizaci&#xF3;n de datos es una de las &#xE1;reas m&#xE1;s activas en la intersecci&#xF3;n entre la programaci&#xF3;n y las gr&#xE1;ficas y tambi&#xE9;n uno de los usos m&#xE1;s populares de p5.js. Este cap&#xED;tulo expande lo que se ha discutido en el libro sobre almacenamiento y carga de datos e introduce  caracter&#xED;sticas adicionales relevantes a conjuntos de datos que pueden ser usadas para visualizaci&#xF3;n.</p>

<p>Existe un gran rango de software que puede producir visualizaciones est&#xE1;ndar como gr&#xE1;ficos de barras y gr&#xE1;ficos de dispersi&#xF3;n. Sin embargo, escribir c&#xF3;digo desde cero para crear visualizaci&#xF3;n nos brinda mayor control sobre el resultado y anima a los usuarios a imaginar, explorar y crear representaciones &#xFA;nicas de datos. Para nosotros, esta es la raz&#xF3;n para programar y usar software como p5.js, y encontramos mucho m&#xE1;s interesante esto que estar limitado por m&#xE9;todos prefabricados o herramientas ya disponibles.</p>

<section data-type="sect1" id="resumen-de-datos-VPyoSV2">
<h1>Resumen de datos</h1>

<p>Es un<a contenteditable="false" data-primary="data" data-secondary="overview" data-type="indexterm">&#xA0;</a>buen momento para rebobinar y discutir sobre c&#xF3;mo los datos fueron introducidos a trav&#xE9;s de este libro. Una variable en un bosquejo de p5.js es usada para almacenar datos. Empezamos con variables primitivas. En este caso, la palabra<a contenteditable="false" data-primary="primitives" data-type="indexterm">&#xA0;</a><em>primitiva</em> significa un solo trozo de informaci&#xF3;n. Por ejemplo, una variable puede almacenar un n&#xFA;mero o un string.</p>

<p>Un arreglo es creado para almacenar una lista de elementos dentro de un &#xFA;nico nombre de variable. Por ejemplo, el <a data-type="xref" href="#ex-11-7">Ejemplo 11-7</a> almacena cientos de n&#xFA;meros usados para definir el valor del trazo de las l&#xED;neas. Un objeto es una variable que almacena un conjunto de variables y funciones relacionadas.</p>

<p>Las variables y los objetos pueden ser definidos dentro del c&#xF3;digo, pero tambi&#xE9;n pueden ser cargados dentro de un archivo en el directorio del <em>bosquejo</em>. Los siguientes ejemplos en este cap&#xED;tulo lo demuestran.</p>
</section>

<section data-type="sect1" id="tablas-AP8LSgP">
<h1>Tablas</h1>

<p>Muchos<a contenteditable="false" data-primary="data" data-secondary="tables" data-type="indexterm" id="d12t">&#xA0;</a>conjuntos de datos son almacenados como filas y columnas (ver <a data-type="xref" href="#Fig_12_01">Figura 12-1</a>), as&#xED; que p5.js incluye un objeto tabla <a contenteditable="false" data-primary="table data" data-type="indexterm" id="td12">&#xA0;</a>para hacer m&#xE1;s f&#xE1;cil trabajar con ellos. Si has trabajado con hojas de c&#xE1;lculo, tienes una ventaja al momento de trabajar con tablas y c&#xF3;digo. p5.js puede leer una tabla desde un archivo, o crear directamente una nueva con c&#xF3;digo. Tambi&#xE9;n es posible leer y escribir cualquier fila y columna y modificar celdas individuales dentro de la tabla. En este cap&#xED;tulo, nos enfocaremos en trabajar con datos en tablas.</p>

<figure id="Fig_12_01"><img alt="Fig 12 01" src="assets/images/gspj_1201.png">
<figcaption><b>Figura 12-1. </b>Las tables son matrices de celdas. Las filas son elementos verticales y las columnas son horizontales. Los datos pueden ser le&#xED;dos desde celdas individuales, filas y columnas.</figcaption>
</figure>

<p>Los datos en tablas son usualmente almacenados en archivos de texto planos con columnas usando comas o tabulaci&#xF3;n. Un archivo del tipo <a contenteditable="false" data-primary="archivo CSV (valores separados por comas)" data-type="indexterm">&#xA0;</a><em>CSV</em> usa la extensi&#xF3;n de archivo <em>.csv</em>. Cuando se usa tabulaci&#xF3;n, se puede usar la extensi&#xF3;n <em>.tsv</em>.</p>

<p>Para cargar un archivo CSV o <a contenteditable="false" data-primary="TSV (tab-separated values) file" data-type="indexterm">&#xA0;</a>TSV, primero ponlo en el directorio del bosquejo tal como se describe en el inicio del cap&#xED;tulo <a data-type="xref" href="#media">7/Medios</a>, y luego usa la funci&#xF3;n <span class="keep-together"><code>loadTable()</code></span> para obtener los datos y almacenarlos en un objeto.</p>

<div data-type="note" id="bMKLsV2">
<p>Solamente las primeras l&#xED;neas de cada conjunto de datos son mostradas en estos ejemplos. Si est&#xE1;s escribiendo manualmente el c&#xF3;digo, necesitar&#xE1;s el archivo <em>.csv</em>, <em>.json</em>, o <em>.tsv</em> completo para replicar las visualizaciones mostradas en las figuras. Puedes encontrarlos en el archivo <em>media.zip</em>.</p>
</div>

<p>Los datos para el siguiente ejemplo son una versi&#xF3;n simplificada de las estad&#xED;sticas del jugador David Ortiz del equipo Red Sox, entre 1997 y 2014. De izquierda a derecha, est&#xE1; el a&#xF1;o, el n&#xFA;mero de home runs, carreras remolcadas (RBIs), y promedio de bateo. Cuando el archivo es abierto en un editor de texto, las primeras cinco l&#xED;neas del archivo se ven as&#xED;:</p>

<pre data-type="programlisting">1997,1,6,0.327
1998,9,46,0.277
1999,0,0,0
2000,10,63,0.282
2001,18,48,0.234</pre>

<section data-type="sect2" id="ejemplo-12-1-lee-la-tabla-bMKASbr">
<h2>Ejemplo 12-1: lee la tabla</h2>

<p>Para cargar los datos en p5.js, se crea un objeto usando el constructor <code>p5.Table</code>. El objeto en este ejemplo es llamado <code>estadisticas</code>. La funci&#xF3;n loadTable() <code>loadTable()</code> <a contenteditable="false" data-primary="loadTable() function" data-type="indexterm">&#xA0;</a> carga el archivo <em>ortiz.csv</em>&#xA0;desde el directorio de tu <em>bosquejo</em>. La funci&#xF3;n se encuentra<a contenteditable="false" data-primary="preload() function" data-type="indexterm">&#xA0;</a> dentro de <code>preload()</code> para asegurar que est&#xE9; completamente cargada antes de que los datos sean usados en <code>setup()</code>.</p>

<p>En <code>setup()</code>, el bucle <code>for</code> <a contenteditable="false" data-primary="for loops" data-type="indexterm">&#xA0;</a>lee cada fila de la tabla en secuencia. Obtiene los datos desde la tabla y los almacena en variables. El m&#xE9;todo <code>getRowCount()</code> <a contenteditable="false" data-primary="getRowCount() function" data-type="indexterm">&#xA0;</a>es usado para contar el n&#xFA;mero de filas en cada archivo de datos. Como los datos sobre las estad&#xED;sticas de Ortiz van de 1997 a 2014, hay 18 filas que leer:</p>

<pre data-code-language="p5js" data-type="programlisting">var estadisticas;

function preload() {
  estadisticas = loadTable(&quot;ortiz.csv&quot;);
}

function setup() {
  for (var i = 0; i &lt; estadisticas.getRowCount(); i++) {
    // Obtiene el valor de la fila i, columna 0 del archivo
    var periodo = estadisticas.get(i, 0);
    // Obtiene el valor de la fila i, columna 1
    var homeRuns = estadisticas.get(i, 1);
    var rbi = estadisticas.get(i, 2);
    var promedio = estadisticas.get(i, 3);
    print(periodo, homeRuns, rbi, promedio);
  }
}</pre>

<p>Dentro del bucle <code>for</code>, el m&#xE9;todo <code>get()</code><a contenteditable="false" data-primary="get() function" data-type="indexterm">&#xA0;</a>es usado para acceder a los datos de la tabla. Este m&#xE9;todo posee dos par&#xE1;metros: el primero es la fila a leer y el segundo es la columna.</p>
</section>

<section data-type="sect2" id="ejemplo-12-2-dibuja-la-tabla-mP5DS0r">
<h2>Ejemplo 12-2: dibuja la tabla</h2>

<p>El <a contenteditable="false" data-primary="drawing" data-secondary="tables" data-type="indexterm" id="dr12t">&#xA0;</a>siguiente ejemplo se basa en el anterior. Crea un arreglo llamado <code>homeRuns</code> para almacenar los datos despu&#xE9;s de ser cargados dentro de <code>setup()</code> y los datos del arreglo son usados dentro de <code>draw()</code>. El largo del arreglo es usado dos veces con el c&#xF3;digo <code>homeRuns.length</code>, para contar el n&#xFA;mero de iteraciones de un bucle <code>for</code>. Primero es usado para poner una marca vertical por cada elemento en el arreglo. Luego es usado para leer cada elemento del arreglo uno por uno y parar de leer del arreglo cuando termina. Despu&#xE9;s de que los datos son cargados dentro de  <code>preload()</code> y le&#xED;dos desde el arreglo en <code>setup()</code>, el resto de este programa aplica lo que aprendimos en el cap&#xED;tulo <a data-type="xref" href="#arrays">11/Arreglos</a>. La funci&#xF3;n <code>getNum()</code> es usada en vez de <code>get()</code> para asegurar que el valor sea entendido como un n&#xFA;mero a usar en el gr&#xE1;fico.</p>

<p>Este ejemplo es la visualizaci&#xF3;n de una versi&#xF3;n simplificada de las estad&#xED;sticas de bateo entre 1997 y 2014 del jugador David Ortiz de los Boston Red Sox, dibujados con los datos de una tabla:</p>

<figure id="Fig_ex-12-2"><img alt="Ex 12 02" src="assets/images/gspj_12in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var estadisticas;
var homeRuns = [];

function preload() {
  estadisticas = loadTable(&quot;ortiz.csv&quot;);
}

function setup() {
  createCanvas(480, 120);
  var numeroFilas = estadisticas.getRowCount();
  homeRuns = [];
  for (var i = 0; i &lt; numeroFilas; i++) {
    homeRuns[i] = estadisticas.getNum(i, 1);
  }
}

function draw() {
  background(204);
  // Dibuja la matriz de fondo para los datos
  stroke(153);
  line(20, 100, 20, 20);
  line(20, 100, 460, 100);
  for (var i = 0; i &lt; homeRuns.length; i++) {
    var x = map(i, 0, homeRuns.length-1, 20, 460);
    line(x, 20, x, 100);
  }
  // Dibuja l&#xED;neas basadas en los datos de home run
  noFill();
  stroke(0);
  beginShape();
  for (var i = 0; i &lt; homeRuns.length; i++) {
    var x = map(i, 0, homeRuns.length-1, 20, 460);
    var y = map(homeRuns[i], 0, 60, 100, 20);
    vertex(x, y);
  }
  endShape();
}</pre>

<p>Este ejemplo es tan minimalista que no es necesario guardar estos datos en un arreglo, pero la idea puede ser aplicada a ejemplos m&#xE1;s complejos que podr&#xED;as querer hacer en el futuro. Adicionalmente, puedes ver c&#xF3;mo este ejemplo puede ser expandido con m&#xE1;s informaci&#xF3;n - por ejemplo, la informaci&#xF3;n en el eje vertical puede definir el n&#xFA;mero de home runs y en el horizontal definir el<a contenteditable="false" data-primary="drawing" data-secondary="tables" data-startref="dr12t" data-type="indexterm">&#xA0;</a>a&#xF1;o.</p>
</section>

<section data-type="sect2" id="ejemplo-12-3-29740-ciudades-bPX8SxP">
<h2>Ejemplo 12-3: 29.740 ciudades</h2>

<p>Para tener una mejor idea del potencial de trabajar con tablas de datos, el siguiente ejemplo usa un conjunto de datos m&#xE1;s grande e introduce una caracter&#xED;stica conveniente.&#xA0;Esta tabla de datos es diferente, porque la primera fila, la primera l&#xED;nea en el archivo, es un <a contenteditable="false" data-primary="headers" data-type="indexterm">&#xA0;</a><em>encabezado</em>. El encabezado define una etiqueta por columna para clarificar el contexto. Estas son las primeras cinco l&#xED;neas de nuestro archivo de datos llamado <em>cities.csv</em>:</p>

<pre data-type="programlisting">zip,state,city,lat,lng
35004,AL,Acmar,33.584132,-86.51557
35005,AL,Adamsville,33.588437,-86.959727
35006,AL,Adger,33.434277,-87.167455
35007,AL,Keystone,33.236868,-86.812861
</pre>

<p>El encabezado hace m&#xE1;s f&#xE1;cil leer el c&#xF3;digo - por ejemplo, la segunda l&#xED;nea del archivo establece que el c&#xF3;digo zip de Acmar, Alabama es 35004 y define la latitud de la ciudad como 33.584132 y la longitud como -86.51557. En total, el archivo tiene un largo de 29.741 l&#xED;neas y define la ubicaci&#xF3;n y los c&#xF3;digos zip de 29.740 ciudades en Estados Unidos. El siguiente ejemplo carga estos datos dentro la funci&#xF3;n <code>preload()</code>y luego los dibuja en la pantalla con un bucle <code>for</code> dentro de <code>draw()</code>. La funci&#xF3;n <code>setXY()</code> <a contenteditable="false" data-primary="setXY() function" data-type="indexterm">&#xA0;</a>convierte la latitud y la longitud de un archivo en una elipse en la pantalla:</p>

<figure><img alt="Ex 12 03" src="assets/images/gspj_12in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var ciudades;

function preload() {
  ciudades = loadTable(&quot;cities.csv&quot;, &quot;header&quot;);
}

function setup() {
  createCanvas(480, 240);
  fill(255, 150);
  noStroke();
}

function draw() {
  background(0);
  var xdesplazamiento = map(mouseX, 0, width, -width*3, -width);
  translate(xdesplazamiento, -600);
  scale(10);
  for (var i = 0; i &lt; ciudades.getRowCount(); i++) {
    var latitud = ciudades.getNum(i, &quot;lat&quot;);
    var longitud = ciudades.getNum(i, &quot;lng&quot;);
    definirXY(latitud, longitud);
  }
}

function definirXY(lat, lng) {
  var x = map(lng, -180, 180, 0, width);
  var y = map(lat, 90, -90, 0, height);
  ellipse(x, y, 0.25, 0.25);
}</pre>

<p>Dentro de la funci&#xF3;n <code>preload()</code>, observa que hay un segundo par&#xE1;metro &quot;header&quot; a&#xF1;adido a la funci&#xF3;n <code>loadTable()</code>. Si esto no es realizado, el c&#xF3;digo tratar&#xE1; la primera l&#xED;nea del archivo CSV como datos y no como el t&#xED;tulo de cada columna.</p>

<p><code>p5.Table</code> posee docenas de m&#xE9;todos para lograr a&#xF1;adir y remover columnas y filas, obtener una lista de entradas &#xFA;nicas en una columna, o ordenar la tabla. Una lista m&#xE1;s completa de m&#xE9;todos y ejemplos cortos son incluidos en la<a contenteditable="false" data-primary="table data" data-startref="td12" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="data" data-secondary="tables" data-startref="d12t" data-type="indexterm">&#xA0;</a><em>Referencia de p5.js</em>.</p>
</section>
</section>

<section data-type="sect1" id="json-ErZ0SlM">
<h1>JSON</h1>

<p>El formato JSON (JavaScript Object Notation)<a contenteditable="false" data-primary="data" data-secondary="JSON" data-type="indexterm" id="d12json">&#xA0;</a><a contenteditable="false" data-primary="JSON files" data-type="indexterm" id="jsonf12">&#xA0;</a>es otro sistema com&#xFA;n para almacenar datos. Tal como los formatos HTML y XML, los elementos tienen etiquetas asociadas a ellos. Por ejemplo, los datos de una pel&#xED;cula pueden incluir etiquetas para el t&#xED;tulo, director, a&#xF1;o de lanzamiento, calificaci&#xF3;n y m&#xE1;s. Estas etiquetas ser&#xE1;n emparejadas con datos de la siguiente manera:</p>

<pre class="de1" data-code-language="json" data-type="programlisting">&quot;title&quot;: &quot;Alphaville&quot;
&quot;director&quot;: &quot;Jean-Luc Godard&quot;
&quot;year&quot;: 1964
&quot;rating&quot;: 9.1
</pre>

<p>Para funcionar como un archivo JSON, se necesita un poco de puntuaci&#xF3;n para separar los elementos. Se usan comas entre cada par de datos y llaves para encapsular. Los datos definidos dentro de las llaves son un<a contenteditable="false" data-primary="JSON objects" data-type="indexterm">&#xA0;</a><em>objeto</em> JSON. Con estos cambios nuestro archivo de datos JSON con un formato v&#xE1;lido luce as&#xED;:</p>

<pre class="de1" data-code-language="json" data-type="programlisting">{
  &quot;title&quot;: &quot;Alphaville&quot;,
  &quot;director&quot;: &quot;Jean-Luc Godard&quot;,
  &quot;year&quot;: 1964,
  &quot;rating&quot;: 9.1
}
</pre>

<p>Existe otro detalle interesante en este corto ejemplo JSON relacionado a los tipos de datos: te dar&#xE1;s cuenta que los datos de t&#xED;tulo y director est&#xE1;n encerrados en comillas para demarcarlos como datos de tipo string, mientras que el a&#xF1;o y la calificaci&#xF3;n no tienen comillas para definirlos como n&#xFA;meros. Esta distinci&#xF3;n se hace importante despu&#xE9;s de cargar los datos en un bosquejo.</p>

<p>Para a&#xF1;adir otra pel&#xED;cula a la lista, se usa un par de corchetes en el comienzo y el final del archivo JSON para significar que los datos son<a contenteditable="false" data-primary="JSONArray" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="data" data-secondary="JSONArray" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="arrays" data-secondary="JSONArray" data-type="indexterm">&#xA0;</a>un <code>arreglo</code> de objetos JSON. Cada objeto es separado por una coma. Poniendo todo esto en pr&#xE1;ctica, se ve as&#xED;:</p>

<pre class="de1" data-code-language="json" data-type="programlisting">[
  {
    &quot;title&quot;: &quot;Alphaville&quot;,
    &quot;director&quot;: &quot;Jean-Luc Godard&quot;,
    &quot;year&quot;: 1965,
    &quot;rating&quot;: 9.1
  },
  {
    &quot;title&quot;: &quot;Pierrot le Fou&quot;,
    &quot;director&quot;: &quot;Jean-Luc Godard&quot;,
    &quot;year&quot;: 1965,
    &quot;rating&quot;: 7.3
  }
]
</pre>

<p>Este patr&#xF3;n puede ser repetido para incluir m&#xE1;s pel&#xED;culas. En este punto, es interesante comparar esta notaci&#xF3;n JSON a la representaci&#xF3;n de tabla correspondiente a los mismos datos. Como un archivo CSV, los datos hubieran lucido as&#xED;:</p>

<pre class="de1" data-type="programlisting">title, director, year, rating
Alphaville, Jean-Luc Godard, 1965, 9.1
Pierrot le Fou, Jean-Luc Godard, 1965, 7.3
</pre>

<p>Observa que la notaci&#xF3;n CSV usa menos caracteres, lo que puede ser importante al momento de trabajar con conjuntos enormes de datos. Por otro lado, la versi&#xF3;n JSON es usualmente m&#xE1;s f&#xE1;cil de leer porque cada trozo de informaci&#xF3;n est&#xE1; etiquetado.</p>

<p>Ahora que se han introducido las nociones b&#xE1;sicas de JSON y su relaci&#xF3;n con las tablas, revisemos el c&#xF3;digo necesario para cargar un archivo JSON a un bosquejo de p5.js.</p>

<section data-type="sect2" id="ex-12-4">
<h2>Ejemplo 12-4: leer un archivo JSON</h2>

<p>Este bosquejo carga el archivo JSON visto al principio de esta secci&#xF3;n, el archivo que incluye solamente los datos de la pel&#xED;cula <em>Alphaville</em>:</p>

<pre data-code-language="p5js" data-type="programlisting">var pelicula;

function preload() {
  pelicula = loadJSON(&quot;film.json&quot;);
}

function setup() {
  var titulo = pelicula.title;
  var dir = pelicula.director;
  var periodo = pelicula.year;
  var calificacion = pelicula.rating;
  print(titulo + &quot; por &quot; + dir + &quot;, &quot; + periodo + <br>&quot;. Calificaci&#xF3;n: &quot; + calificacion);
}</pre>

<p>Los datos del archivo son cargados en la variable. Los valores individuales pueden ser accesados usando el operador punto, de forma similar a como accedemos a las propiedades dentro de un objeto.</p>
</section>

<section data-type="sect2" id="ejemplo-12-5-visualiza-datos-a-partir-de-un-archivo-json-VP6ZSQP">
<h2>Ejemplo 12-5: visualiza datos a partir de un archivo JSON</h2>

<p>Tambi&#xE9;n podemos trabajar con un archivo JSON que contiene m&#xE1;s de una pel&#xED;cula. Aqu&#xED;, el archivo de datos comenzado en el ejemplo previo ha sido actualizado para incluir todas las pel&#xED;culas del director entre 1960 y 1966. El nombre de cada pel&#xED;cula es posicionado en orden en la pantalla seg&#xFA;n el a&#xF1;o de lanzamiento y es asignado un valor en la escala de grises seg&#xFA;n su calificaci&#xF3;n.</p>

<p>Existen varias diferencias entre este ejemplo y el <a data-type="xref" href="#ex-12-4">Ejemplo 12-4</a>. La m&#xE1;s importante es la manera en que el archivo JSON es cargado en los objetos <code>Pelicula</code>. El archivo JSON es cargado dentro de <code>preload()</code>, poblando la variable <code>datosPelicula</code> con un arreglo que tiene la misma estructura que los datos en el archivo. En <code>setup()</code>, se usa un bucle <code>for</code> para iterar a trav&#xE9;s del arreglo de datos de las pel&#xED;culas y crear un objeto basado en cada elemento en el arreglo, usando el constructor <code>Pelicula</code> definido aqu&#xED;. El constructor accede a porciones de la informaci&#xF3;n y las asigna a propiedades dentro de cada objeto. El constructor <code>Pelicula</code> tambi&#xE9;n define un m&#xE9;todo para mostrar el nombre de la pel&#xED;cula:</p>

<figure><img alt="Ex 12 05" src="assets/images/gspj_12in04.png">
<figcaption>
</figcaption></figure>

<!--
<div data-nickname="akaziuna" data-type="comment">
<div class="comment-identifier" contenteditable="false"><img src="https://secure.gravatar.com/avatar/e0080a854a5c1d5b8feb7567ee1b2eb2" />
<div spellcheck="false">akaziuna</div>
<i class="delete_comment glyphicons remove_2">&nbsp;</i></div>

<p>Note to Production: This may not matter at all, but a line in the code below keeps converting to:&nbsp;function Film {</p>

<p>Spelled out, it should read:<br />
function Film "open parenthesis" "f"&nbsp;"close parenthesis" {</p>

<p>It builds properly in the PDF, but this seems weird. Is this normal? &nbsp;</p>
</div>
-->

<pre data-code-language="p5js" data-type="programlisting">var peliculas = [];
var datosPelicula;

function preload() {
  datosPelicula = loadJSON(&quot;films.json&quot;);
}

function setup() {
  createCanvas(480, 120);
  for (var i = 0; i &lt; datosPelicula.length; i++) {
    var o = datosPelicula[i];
    peliculas[i] = new Pelicula(o);
  }
  noStroke();
}

function draw() {
  background(0);
  for (var i = 0; i &lt; peliculas.length; i++) {
    var x = i*32 + 32;
    peliculas[i].mostrar(x, 105);
  }
}

function Film(f) {
  this.titulo = f.title;
  this.director = f.director;
  this.periodo = f.year;
  this.calificacion = f.rating;

  this.mostrar = function(x, y) {
    var calificacionGris = map(this.calificacion, 6.5, 8.1, 102, 255);
    push();
    translate(x, y);
    rotate(-QUARTER_PI);
    fill(calificacionGris);
    text(this.titulo, 0, 0);
    pop();
  };
}</pre>

<p>Este ejemplo es un esbozo de la visualizaci&#xF3;n de los datos de las pel&#xED;culas. Muestra c&#xF3;mo cargar los datos y c&#xF3;mo dibujar seg&#xFA;n los valores de los datos, pero queda como desaf&#xED;o tuyo darle un formato y acentuar lo que t&#xFA; encuentras m&#xE1;s interesante en los datos. Por ejemplo, &#xBF;es m&#xE1;s interesante mostrar el n&#xFA;mero de peliculas que Godard hizo cada a&#xF1;o? &#xBF;Es m&#xE1;s interesante comparar y contrastar estos datos con las pel&#xED;culas de otro director? &#xBF;Ser&#xE1; esto m&#xE1;s facil de leer con una tipograf&#xED;a distinta, con otro tama&#xF1;o del bosquejo o relaci&#xF3;n de aspecto? Las habilidades presentadas en los ejemplos anteriores de este libro pueden ser aplicadas para llevar este bosquejo al siguiente nivel de<a contenteditable="false" data-primary="JSON files" data-startref="jsonf12" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="data" data-secondary="JSON" data-startref="json12" data-type="indexterm">&#xA0;</a>refinamiento.</p>
</section>
</section>

<section data-type="sect1" id="datos-de-redes-y-apis-yrLaS6P">
<h1>Datos de redes y APIs</h1>

<p>El acceso<a contenteditable="false" data-primary="data" data-secondary="network" data-see="APIs (application programming interfaces)" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="APIs (application programming interfaces)" data-type="indexterm" id="api12">&#xA0;</a><a contenteditable="false" data-primary="data" data-secondary="and APIs" data-type="indexterm" id="d12api">&#xA0;</a>p&#xFA;blico a cantidades gigantes de datos recolectados por gobiernos, corporaciones, organizaciones e individuos est&#xE1; cambiando nuestra cultura, desde la manera en que socializamos hasta c&#xF3;mo pensamos ideas intangibles como la privacidad. Estos datos son muy frecuentemente accesados a trav&#xE9;s de estructuras de software llamadas <em>APIs</em>.</p>

<p>El acr&#xF3;nimo <em>API</em> es misterioso y su significado &#x2014; interfaz de programaci&#xF3;n de aplicaciones &#x2014; no es mucho m&#xE1;s clara. Sin embargo, las APIs son esenciales para trabajar con datos y no son necesariamente dif&#xED;ciles de entender. Esencialmente, son requerimientos de datos hechos a un servicio. Cuando los conjuntos de datos son enormes, no es pr&#xE1;ctico ni deseable copiar la totalidad de los datos. Una API le permite a un programador pedir solamente los datos que son relevante dentro de este gran oc&#xE9;ano.</p>

<p>El concepto puede ser ilustrado de manera m&#xE1;s clara con un ejemplo hipot&#xE9;tico. Asumamos que existe una organizaci&#xF3;n que mantiene una base de datos de rangos de temperatura para cada ciudad dentro de un pa&#xED;s. La API para este conjunto de datos le permite a un programador pedir las temperaturas m&#xE1;xima y m&#xED;nimas de cualquier ciudad durante el mes de octubre del a&#xF1;o 1972. Para requerir estos datos, la petici&#xF3;n debe ser hecha mediante una l&#xED;nea o l&#xED;neas de c&#xF3;digo espec&#xED;ficas, en el formato requerido por el servicio de datos.&#xA0;</p>

<p>Algunas APIs son completamente p&#xFA;blicas, pero muchas requieren autentificaci&#xF3;n, lo que corresponde t&#xED;picamente a una identidad  de usuario (ID) o llave para que el servicio de datos pueda mantener registro de sus usuarios. La mayor&#xED;a de las APIs posee reglas sobre cu&#xE1;ntos y cu&#xE1;n frecuentemente se pueden hacer peticiones. Por ejemplo, puede ser posible hacer solamente 1.000 peticiones al mes, o no m&#xE1;s de una petici&#xF3;n por segundo.</p>

<!-- <div data-nickname="akaziuna" data-type="comment">
<p>PRODUCTION: I didn't put the URL below (http://api.openweathermap.org/data/2.5/find?q=Cincinnati&amp;units=imperial&nbsp;)in italics because it's an example that's meant to be read and "decoded". Ideally we can keep it from wrapping in print, so it's easy to read, but that's probably not possible.</p>
</div> -->

<p>p5.js puede solicitar datos a trav&#xE9;s de Internet cuando el computador est&#xE1; corriendo el programa en l&#xED;nea. Los archivos CSV, TSV, JSON y XML pueden ser cargados usando la funci&#xF3;n correspondiente de carga usando la URL como par&#xE1;metro. Por ejemplo, el clima actual en Cincinnati est&#xE1; disponible en formato JSON en esta URL: <a href="http://api.openweathermap.org/data/2.5/find?q=Cincinnati&amp;units=imperial"><em>http://api.openweathermap.org/data/2.5/find?q=Cincinnati&amp;units=imperial</em></a>.</p>

<p>Lee la URL detenidamente para decodificarla:</p>

<ol>
	<li>Pide datos al subdominio <em>api</em> del sitio <em>openweathermap.org</em>.</li>
	<li>Especifica una ciudad a buscar (<em>q</em> es una abreviaci&#xF3;n de <em>query</em> (b&#xFA;squeda), lo que es usado frecuentemente en URLs para especificar b&#xFA;squedas).</li>
	<li>Tambi&#xE9;n indica que los datos deben ser retornados en formato imperial, lo que significa que la temperatura estar&#xE1; en Fahrenheit. Reemplazando <em>imperial</em> por <em>metric</em> se obtendr&#xE1; la temperatura en grados Celsius.</li>
</ol>

<p>Revisar estos datos de OpenWeatherMap es un ejemplo m&#xE1;s realista de trabajo con datos encontrados que los conjuntos anteriores de datos simplificados. Al momento de escribir, el archivo retornado por la URL es el siguiente:</p>

<pre>{&quot;message&quot;:&quot;accurate&quot;,&quot;cod&quot;:&quot;200&quot;,&quot;count&quot;:1,&quot;list&quot;:[{&quot;id&quot;:<br>4508722,&quot;name&quot;:&quot;Cincinnati&quot;,&quot;coord&quot;:{&quot;lon&quot;:-84.456886,&quot;lat&quot;:<br>39.161999},&quot;main&quot;:{&quot;temp&quot;:34.16,&quot;temp_min&quot;:34.16,&quot;temp_max&quot;:<br>34.16,&quot;pressure&quot;:999.98,&quot;sea_level&quot;:1028.34,&quot;grnd_level&quot;:<br>999.98,&quot;humidity&quot;:77},&quot;dt&quot;:1423501526,&quot;wind&quot;:{&quot;speed&quot;:<br>9.48,&quot;deg&quot;:354.002},&quot;sys&quot;:{&quot;country&quot;:&quot;US&quot;},&quot;clouds&quot;:{&quot;all&quot;:<br>80},&quot;weather&quot;:[{&quot;id&quot;:803,&quot;main&quot;:&quot;Clouds&quot;,&quot;description&quot;:<br>&quot;broken clouds&quot;,&quot;icon&quot;:&quot;04d&quot;}]}]}
</pre>

<p>Este archivo es mucho m&#xE1;s f&#xE1;cil de leer cuando es retornado con saltos de l&#xED;nea, y cuando el objeto JSON y las estructuras del arreglo est&#xE1;n definidas con llaves y corchetes:</p>

<pre data-code-language="json" data-type="programlisting">{
  &quot;message&quot;: &quot;accurate&quot;,
  &quot;count&quot;: 1,
  &quot;cod&quot;: &quot;200&quot;,
  &quot;list&quot;: [{
    &quot;clouds&quot;: {&quot;all&quot;: 80},
    &quot;dt&quot;: 1423501526,
    &quot;coord&quot;: {
      &quot;lon&quot;: -84.456886,
      &quot;lat&quot;: 39.161999
    },
    &quot;id&quot;: 4508722,
    &quot;wind&quot;: {
      &quot;speed&quot;: 9.48,
      &quot;deg&quot;: 354.002
    },
    &quot;sys&quot;: {&quot;country&quot;: &quot;US&quot;},
    &quot;name&quot;: &quot;Cincinnati&quot;,
    &quot;weather&quot;: [{
      &quot;id&quot;: 803,
      &quot;icon&quot;: &quot;04d&quot;,
      &quot;description&quot;: &quot;broken clouds&quot;,
      &quot;main&quot;: &quot;Clouds&quot;
    }],
    &quot;main&quot;: {
      &quot;humidity&quot;: 77,
      &quot;pressure&quot;: 999.98,
      &quot;temp_max&quot;: 34.16,
      &quot;sea_level&quot;: 1028.34,
      &quot;temp_min&quot;: 34.16,
      &quot;temp&quot;: 34.16,
      &quot;grnd_level&quot;: 999.98
    }
  }]
}</pre>

<p>Observa que los corchetes en las secciones de <code>&quot;list&quot;</code> y <code>&quot;weather&quot;</code>, indican un arreglo de objetos JSON. Aunque el arreglo en este ejemplo solamente contiene un &#xED;tem, en otros casos, la API podr&#xED;a retornar varios d&#xED;as o varaciones de m&#xFA;ltiples estaciones metereol&#xF3;igicas.</p>

<section data-type="sect2" id="ex-12-6">
<h2>Ejemplo 12-6: procesando la informaci&#xF3;n del clima</h2>

<p>El primer paso cuando se trabaja con estos datos es estudiarlos y luego escribir un poco de c&#xF3;digo para extraer los datos deseados. En este caso, queremos saber la temperatura actual. Podemos ver que nuestro dato de temperatura es 34.16. Est&#xE1; etiquetado como <code>temp</code> y est&#xE1; dentro del objeto <code>main</code>,que est&#xE1; adentro del arreglo <code>list</code>. Una funci&#xF3;n llamada <code>getTemp()</code> fue escrita espec&#xED;ficamente para que este c&#xF3;digo funcione con el formato de esta organizaci&#xF3;n de archivos JSON espec&#xED;fica:</p>

<pre data-code-language="p5js" data-type="programlisting">var datosClima;

function preload() {
  datosClima = loadJSON(&quot;cincinnati.json&quot;);
}

function setup() {
  var temp = obtenerTemp(datosClima);
  print(temp);
}

function obtenerTemp(datos) {
  var lista = datos.list;
  var item = lista[0];
  var principal = item.main;
  var temperature = principal.temp;
  return temperature;
}</pre>

<p>Los datos del archivo JSON son cargados en <code>preload()</code> y son pasados a la funci&#xF3;n <code>obtenerTemp()</code> dentro de <code>setup()</code>. Luego, por el formato del archivo JSON, una serie de variables es usada para ir m&#xE1;s y m&#xE1;s profundo dentro de la estructura de los datos para finalmente llegar al n&#xFA;mero que deseamos. Este n&#xFA;mero es almacenado en la variable <span class="keep-together"><code>temperature</code></span> y luego es retornada por la funci&#xF3;n para ser asignada a la variable <code>temp</code> en <code>setup()</code> donde es impresa en la consola.</p>
</section>

<section data-type="sect2" class="pagebreak-before" id="ejemplo-12-7-concatenando-metodos-or3mSYM">
<h2>Ejemplo 12-7: concatenando m&#xE9;todos</h2>

<p>La<a contenteditable="false" data-primary="data" data-secondary="chaining methods" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="chaining methods" data-type="indexterm">&#xA0;</a> secuencia de variables JSON creada en sucesi&#xF3;n en el ejemplo anterior puede ser realizada de ujna forma distinta concatenando accesores. Este ejemplo funciona como el <a data-type="xref" href="#ex-12-6">Ejemplo 12-6</a>, pero los m&#xE9;todos est&#xE1;n conectadas con el operador punto, en vez de ser calculados uno a la vez y asignados a variables intermedias:</p>

<pre data-code-language="p5js" data-type="programlisting">var datosClima;

function preload() {
  datosClima = loadJSON(&quot;cincinnati.json&quot;);
}

function setup() {
  var temp = obtenerTemp(datosClima);
  print(temp);
}

function obtenerTemp(datos) {
  return datos.list[0].main.temp;
}</pre>

<p>Adem&#xE1;s observa c&#xF3;mo la temperatura final es retornada por la funci&#xF3;n <code>obtenerTemp()</code>. En el <a data-type="xref" href="#ex-12-6">Ejemplo 12-6</a>, se crea una variable para almacenar el valor y luego ese valor es retornado. Aqu&#xED;, el valor de la temperatura es retornado directamente, sin una variable intermedia.</p>

<p>Este ejemplo puede ser modificado para acceder a m&#xE1;s datos de la organizaci&#xF3;n y para construir un bosquejo que muestre los datos en la pantalla en vez de solamente escribirlos en la consola. Tambi&#xE9;n puedes modificarlo para que lea datos de otra API - te encontrar&#xE1;s con que los datos retornados por muchas APIs comparten un formato<a contenteditable="false" data-primary="APIs (application programming interfaces)" data-startref="api12" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="data" data-secondary="and APIs" data-startref="d12api" data-type="indexterm">&#xA0;</a>similar.</p>
</section>
</section>

<section data-type="sect1" id="robot-10-datos-G2mBSqr">
<h1>Robot 10: datos</h1>

<figure><img alt="Robot 10" src="assets/images/gspj_12in05.png">
<figcaption>
</figcaption></figure>

<p>El ejemplo final<a contenteditable="false" data-primary="robot programs (examples)" data-secondary="generating and reading data files" data-type="indexterm" id="rp12grdf">&#xA0;</a> de robot en este libro es diferente del resto porque tiene dos partes. La primera parte genera un archivo usando valores aleatorios y bucles <code>for</code> y la segunda parte lee ese archivo de datos para dibujar un ej&#xE9;rcito de robots en la pantalla.</p>

<p>El primer bosquejo usa dos nuevos elementos de c&#xF3;digo, la clase <code>PrintWriter</code> <a contenteditable="false" data-primary="PrintWriter class" data-type="indexterm">&#xA0;</a>y la funci&#xF3;n <code>createWriter()</code><a contenteditable="false" data-primary="createWriter() function" data-type="indexterm">&#xA0;</a>. Usadas en conjunto, crean y abren un archivo en el directorio del bosquejo para almacenar los datos generados por el bosquejo. En este ejemplo, el objeto creado con <code>PrintWriter</code> es llamado <code>salida</code> y el archivo es llamado <em>ejercitoBot.tsv</em>. En los bucles, los datos son escritos en el archivo al ejecutar el m&#xE9;todo <code>println() </code> en el objeto de salida. Aqu&#xED;, los valores aleatorios son usados para definir cu&#xE1;l de las tres im&#xE1;genes del robot ser&#xE1;n dibujadas por cada coordenada. Para que el archivo se cree correctamente, el m&#xE9;todo <code>close()</code>  debe ser ejecutado antes de que el programa se detenga. El c&#xF3;digo que dibuja una elipse es un adelanto visual para revelar la posici&#xF3;n de la coordenada en la pantalla, pero observa que la elipse no est&#xE1; grabada en el archivo:</p>

<pre data-code-language="p5js" data-type="programlisting">var salida;

function setup() {
  createCanvas(720, 480);
  // Crea el archivo nuevo
  salida = createWriter(&quot;ejercitoBots.tsv&quot;);
  // Escribe una l&#xED;nea de encabezado con los t&#xED;tulos de las columnas
  salida.println(&quot;tipo\tx\ty&quot;);
  for (var y = 0; y &lt;= height; y += 60) {
    for (var x = 0; x &lt;= width; x += 20) {
      var tipoRobot = int(random(1, 4));
      salida.println(tipoRobot + &quot;\t&quot; + x + &quot;\t&quot; + y);
      ellipse(x, y, 12, 12);
    }
  }
  salida.close();  // Cierra el archivo
}
</pre>

<p>Despu&#xE9;s que el programa es ejecutado, el archivo <em>ejercitoBot.tsv</em> es creado dentro el directorio del <em>bosquejo</em>. &#xC1;brelo para revisar c&#xF3;mo se escribieron los datos. Las primeras cinco l&#xED;neas de c&#xF3;digo de este archivo ser&#xE1;n similares a esto:</p>

<pre data-type="programlisting">tipo&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;x	 y
3	 0	 0
1	 20	0
2	 40	0
1	 60	0
3	 80	0
</pre>

<p>La primera columna es usada para definir la imagen de robot a usar, la segunda columna es la coordenada <em>x</em>, y la tercera columna es la coordenada <em>y</em>. El siguiente bosquejo carga este archivo <em>ejercitoBot.tsv</em> y usa los datos para estos prop&#xF3;sitos:</p>

<pre data-code-language="p5js" data-type="programlisting">var robots;
var bot1;
var bot2;
var bot3;

function preload() {
  bot1 = loadImage(&quot;robot1.png&quot;);
  bot2 = loadImage(&quot;robot2.png&quot;);
  bot3 = loadImage(&quot;robot3.png&quot;);
  robots = loadTable(&quot;ejercitoBot.tsv&quot;, &quot;header&quot;);
}

function setup() {
  createCanvas(720, 480);
  imageMode(CENTER);
  for (var i = 0; i &lt; robots.getRowCount(); i++) {
    var bot = robots.getNum(i, &quot;tipo&quot;);
    var x = robots.getNum(i, &quot;x&quot;);
    var y = robots.getNum(i, &quot;y&quot;);
    var escala = 0.15;
    if (bot == 1) {
      image(bot1, x, y, bot1.width * escala, bot1.height * escala);
    } else if (bot == 2) {
      image(bot2, x, y, bot2.width * escala, bot2.height * escala);
    } else {
      image(bot3, x, y, bot3.width * escala, bot3.height * escala);
    }
  }
}
</pre>

<p>Una variaci&#xF3;n m&#xE1;s concisa (y flexible) de este bosquejo usa arreglos como un enfoque m&#xE1;s avanzado:</p>

<pre data-code-language="p5js" data-type="programlisting">var numeroTiposRobot = 3;
var imagenes = [];
var escala = 0.15;
var ejercitoBot;

function preload() {
  for (var i = 0; i &lt; numeroTiposRobot; i++) {
    imagenes[i] = loadImage(&quot;robot&quot; + (i+1) + &quot;.png&quot;);
  }
  ejercitoBot = loadTable(&quot;ejercitoBot.tsv&quot;, &quot;header&quot;);
}

function setup() {
  createCanvas(720, 480);
  imageMode(CENTER);
  for (var i = 0; i &lt; ejercitoBot.getRowCount(); i++) {
    var robotType = ejercitoBot.getNum(i, &quot;type&quot;);
    var x = ejercitoBot.getNum(i, &quot;x&quot;);
    var y = ejercitoBot.getNum(i, &quot;y&quot;);
    var bot = imagenes[robotType - 1];
    image(bot, x, y, bot.width * escala, bot.height * escala);
  }
}</pre>
<a contenteditable="false" data-primary="data" data-startref="d12" data-type="indexterm"></a><a contenteditable="false" data-primary="robot programs (examples)" data-secondary="generating and reading data files" data-startref="rp12grdf" data-type="indexterm"></a>


</section>
</section>
<!--End chapter-->

<section data-type="introduction" class="opener notoc" id="1xY4IDl">
<!--
<h1 class="chapterhead">Esto es un encabezado</h1>
-->
    
<figure id="TChoi-13-DomTree"><img src="assets/images/gspj_13in01.png"><figcaption></figcaption></figure>

</section>

<section data-type="chapter" id="extend" xmlns="http://www.w3.org/1999/xhtml">
<h1 class="chapterhead">Extensi&#xF3;n</h1>

<p class="lede">Este libro se enfoca en usar p5.js para realizar gr&#xE1;ficas interactivas, porque eso es lo principal que p5.js hace. Sin embargo, este software puede realizar mucho m&#xE1;s que esto, y est&#xE1; siendo extendido a&#xFA;n m&#xE1;s a cada momento.</p>

<p>Una <em> biblioteca</em> de p5.js es un<a contenteditable="false" data-primary="libraries" data-type="indexterm" id="lib13">&#xA0;</a>&#xA0;conjunto de c&#xF3;digo que extiende el software m&#xE1;s all&#xE1; de sus funciones principales. Las bibliotecas han sido importantes para el crecimiento de este proyecto, porque le permite a los desarrolladores a&#xF1;adir nuevas funciones r&#xE1;pidamente. Como proyectos autocontenidos y m&#xE1;s peque&#xF1;os, las bibliotecas son m&#xE1;s f&#xE1;ciles de manejar que si sus caracter&#xED;sticas estuvieran integradas al software principal.</p>

<p>El archivo <em>.zip</em> completo de p5.js incluye las bibliotecas p5.dom y p5.sound. Tambi&#xE9;n puedes descargar otras bibliotecas desde <a href="http://p5js.org/es/libraries/"><em class="hyperlink">http://p5js.org/es/libraries/</em></a>. Para usar una de estas bibliotecas, primero aseg&#xFA;rate de que est&#xE1; dentro del directorio que contiene tus archivos HTML y JavaScript. En segundo lugar, a&#xF1;ade una l&#xED;nea de c&#xF3;digo a tu archivo HTML para indicar que la biblioteca ser&#xE1; usada en el bosquejo actual. Esta l&#xED;nea deber&#xED;a verse as&#xED;:</p>

<pre data-code-language="html" data-type="programlisting">&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; <br>src=&quot;ruta/relativa/a/p5.nombreBiblioteca.js&quot;&gt;&lt;/script&gt;</pre>

<p><em>ruta/relativa/a</em> deber&#xED;a ser reemplazado por la ubicaci&#xF3;n requerida para ubicar el archivo de biblioteca relativo al archivo HTML. Si necesitas subir un directorio, inserta &quot;..&quot;. Por ejemplo, si est&#xE1;s trabajando con el ejemplo vac&#xED;o y con <em>p5.sound.js</em> de la descarga de p5.js completo, la l&#xED;nea ser&#xED;a as&#xED;.</p>

<pre data-code-language="html" data-type="programlisting">&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;../<br>p5.sound.js&quot;&gt;&lt;/script&gt;</pre>

<section data-type="sect1" id="p5sound-kYNpSgK">
<h1 class="pagebreak-before">p5.sound</h1>

<p>La biblioteca de audio p5.sound<a contenteditable="false" data-primary="p5.sound audio library" data-type="indexterm" id="p5sal13">&#xA0;</a><a contenteditable="false" data-primary="sound" data-see="p5.sound audio library" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="libraries" data-secondary="p5.sound audio library" data-type="indexterm" id="lib13pdsal">&#xA0;</a>tiene la habilidad de reproducir, analizar y generar (sintetizar) sonido. A continuaci&#xF3;n se presentan unas pocas funciones clave; consulta la <em>Referencia de p5.js</em> para conocer m&#xE1;s objetos que pueden ser creados y funciones que pueden ser llamadas: <a href="http://p5js.org/es/reference/#/libraries/p5.sound"><em class="hyperlink">http://p5js.org/es/reference/#/libraries/p5.sound</em></a>.</p>

<p>Al igual que las im&#xE1;genes, los archivos JSON, y los archivos de texto introducidos en el cap&#xED;tulo <a data-type="xref" href="#media">7/Medios</a>, un archivo de sonido es otro tipo de medio capaz de extender un bosquejo de p5.js. Sigue las instrucciones en ese cap&#xED;tulo para aprender c&#xF3;mo cargar un archivo de sonido en el directorio de un bosquejo. La biblioteca p5.sound puede cargar un gran rango de formatos de archivos de audio incluyendo WAV, AIFF y MP3. Una vez que un archivo es cargado, puede ser reproducido, detenido y repetido, adem&#xE1;s de ser distorsionado con funciones de efecto.</p>

<section data-type="sect2" id="ejemplo-13-1-reproduce-un-archivo-nDvQSbY">
<h2>Ejemplo 13-1: reproduce un archivo</h2>

<p>El <a contenteditable="false" data-primary="p5.sound audio library" data-secondary="playing samples" data-type="indexterm" id="p5sal13ps">&#xA0;</a>uso m&#xE1;s com&#xFA;n de la biblioteca p5.sound es reproducir un sonido cuando un evento ocurre en la pantalla o como m&#xFA;sica de fondo. Este ejemplo se basa en el <a data-type="xref" href="#ex-8-5">Ejemplo 8-5</a> para reproducir un sonido cuando la figura llega a los bordes de la pantalla. El archivo <em>blip.wav</em> es incluido en la carpeta <em>media</em> que puede ser descargada siguiendo las instrucciones del cap&#xED;tulo <a data-type="xref" href="#media">7/Medios</a>. As&#xED; como con otros archivos, en la parte superior del bosquejo se define una variable para almacenar un objeto <code>p5.SoundFile</code> (lo que la funci&#xF3;n <code>loadSound()</code> retorna), es cargada dentro de <code>preload()</code>, y despu&#xE9;s de eso, puede ser usada en cualquier parte del programa:</p>

<pre data-code-language="p5js" data-type="programlisting">var blip;

var radio = 120;
var x = 0;
var velocidad = 1.0;
var direccion = 1;

function preload() {
  blip = loadSound(&quot;blip.wav&quot;);
}

function setup() {
  createCanvas(440, 440);
  ellipseMode(RADIUS);
  x = width/2; // Parte en el centro
}

function draw() {
  background(0);
  x += velocidad * direccion;
  if ((x &gt; width - radio) || (x &lt; radio)) {
    direccion = -direccion; // Invertir direccion
    blip.play();
  }
  if (direccion == 1) {
    arc(x, 220, radio, radio, 0.52, 5.76); // Hacia la derecha
  } else {
    arc(x, 220, radio, radio, 3.67, 8.9); // Hacia la izquierda
  }
}</pre>

<p>El sonido es reproducido cada vez que se ejecuta el m&#xE9;todo <code>play()</code>. Este ejemplo funciona bien porque el sonido solamente se reproduce cuando el valor de la variable <code>x</code> est&#xE1; dentro de los bordes de la pantalla. Si el sonido fuera reproducido en cada ejecuci&#xF3;n de <code>draw()</code>, el sonido se reiniciar&#xED;a 60 veces por segundo y no tendr&#xED;a tiempo de terminar de reproducirse. El resultado ser&#xED;a un sonido distorsionando r&#xE1;pidamente. Para reproducir un archivo m&#xE1;s largo mientras se ejecuta un programa, llama a los m&#xE9;todos <code>play()</code> o <code>loop()</code> del sonido dentro de <code>setup()</code> para que as&#xED; el sonido se accione una sola vez.</p>

<div data-type="note" id="G16ltdD">
<p>El objeto <code>p5.SoundFile</code> posee muchos m&#xE9;todos para controlar c&#xF3;mo un sonido es reproducido. Los m&#xE1;s esenciales son <code>play()</code> para reproducir la muestra una sola vez, <code>loop()</code> para reproducirlo de principio a fin una y otra vez, <code>stop()</code> para detener la reproducci&#xF3;n, y <code>jump()</code> para saltar a un momento espec&#xED;fico<a contenteditable="false" data-primary="p5.sound audio library" data-secondary="playing samples" data-startref="p5sal13ps" data-type="indexterm">&#xA0;</a>dentro del archivo.</p>
</div>
</section>

<section data-type="sect2" id="ejemplo-13-2-escucha-un-microfono-G16XS0D">
<h2>Ejemplo 13-2: escucha un micr&#xF3;fono</h2>

<p>Adem&#xE1;s <a contenteditable="false" data-primary="p5.sound audio library" data-secondary="listening through microphone" data-type="indexterm" id="p5sal13ltm"></a>de reproducir sonidos, p5.js puede escuchar. Si tu computador posee un micr&#xF3;fono incorporado o conectado, la biblioteca p5.sound puede escuchar audio en vivo a trav&#xE9;s de &#xE9;l. Una vez que los datos del micr&#xF3;fono est&#xE1;n conectados al software, los puedes analizar, modificar o reproducir:</p>

<figure><img alt="Ex 13 02" src="assets/images/gspj_13in02.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var mic;
var amp;

var escala = 1.0;

function setup() {
  createCanvas(440, 440);
  background(0);
  // Crea una entrada de audio y empieza a escuchar
  mic = new p5.AudioIn();
  mic.start();
  // Crea un nuevo analizador de amplitud y con&#xE9;ctalo a la entrada
  amp = new p5.Amplitude();
  amp.setInput(mic);
}


function draw() {
  // Dibuja un fondo que se vaya a negro
  noStroke();
  fill(0, 10);
  rect(0, 0, width, height);
  // El m&#xE9;todo getLevel() retorna valores entre 0 y 1,
  // as&#xED; que map() es usado para convertir los valores
  // a n&#xFA;meros mayores
  escala = map(amp.getLevel(), 0, 1.0, 10, width);
  // Dibuja el c&#xED;rculo basado en el volumen
  fill(255);
  ellipse(width/2, height/2, escala, escala);
}
</pre>

<p>Hay dos partes que est&#xE1;n obteniendo la amplitud (volumen) del micr&#xF3;fono conectado. El objeto <code>p5.AudioIn</code> es usado para obtener la se&#xF1;al del micr&#xF3;fono y el objeto <code>p5.Amplitude</code> es usado para medir la se&#xF1;al.</p>

<p>Las variables para almacenar ambos objetos est&#xE1; definidas en la parte superior del c&#xF3;digo y creadas dentro de <code>setup()</code>. Despu&#xE9;s del objeto <code>p5.Amplitude</code> (en este programa se llama <code>amp</code>), el objeto <code>p5.AudioIn</code>, llamado <code>mic</code>, es conectado al objeto <code>amp</code> on el m&#xE9;todo <code>setInput()</code>. Despu&#xE9;s de eso, el m&#xE9;todo <code>getLevel()</code> del objeto <code>amp</code> puede ser ejecutado en cualquier momento para leer la amplitud de los datos de micr&#xF3;fono dentro del programa. En este ejemplo, esto es realizado en cada ejecuci&#xF3;n de <code>draw()</code> y el valor es usado para definir el tama&#xF1;o del c&#xED;rculo.</p>

<p>Adem&#xE1;s de reproducir un sonido y analizar un sonido como fue demostrado en los &#xFA;ltimos dos ejemplos, p5.js puede directamente sintetizar sonido. Los bloques fundamentales de la s&#xED;ntesis de sonido son ondas, entre las que se incluyen <em>ondas sinusoidales</em>, <em>ondas triangulares</em> y <em>ondas cuadradas</em>. Una onda sinusoidal tiene un sonido agradable, una onda cuadrada es m&#xE1;s dura y una onda triangular est&#xE1; entre medio. Cada onda tiene un n&#xFA;mero de propiedades. La <em>frecuencia</em>, medida en Hertz, determina la altura, cu&#xE1;n grave o agudo es el tono. La <em>amplitud</em> de la onda determina el volumen, el nivel de<a contenteditable="false" data-primary="p5.sound audio library" data-secondary="listening through microphone" data-startref="p5sal13ltm" data-type="indexterm">&#xA0;</a>intensidad.</p>
</section>

<section data-type="sect2" id="ejemplo-13-3-crea-una-onda-sinusoidal-VKP9SP1">
<h2>Ejemplo 13-3: crea una onda sinusoidal</h2>

<p>En <a contenteditable="false" data-primary="p5.sound audio library" data-secondary="creating sine waves" data-type="indexterm" id="p5sal13csw">&#xA0;</a><a contenteditable="false" data-primary="sine wave frequencies" data-type="indexterm" id="swf13">&#xA0;</a>el siguiente ejemplo, el valor de <code>mouseX</code> determina la frecuencia de una onda sinusoidal. A medida que el rat&#xF3;n se mueve hacia izquierda y derecha, la frecuencia audible y la correspondiente visualizaci&#xF3;n de la onda aumenta y decae:</p>

<figure><img alt="Ex 13 03" src="assets/images/gspj_13in03.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var sinusoide;

function setup() {
  createCanvas(440, 440);
  // Crea e inicializa el oscilador sinusoidal
  sinusoide = new p5.SinOsc();
  sinusoide.start();
}

function draw() {
  background(0);
  // Mapea el valor de mouseX entre 20 Hz y 440 Hz para la frecuencia
  var hertz = map(mouseX, 0, width, 20.0, 440.0);
  sinusoide.freq(hertz);
  // Dibuja una onda para visualizar la frecuencia del sonido
  stroke(204);
  for (var x = 0; x &lt; width; x++) {
    var angulo = map(x, 0, width, 0, TWO_PI * hertz);
    var valorSinusoide = sin(angulo) * 120;
    line(x, 0, x, height/2 + valorSinusoide);
  }
}
</pre>

<p>El objeto <code>sine</code>, creado a partir del constructor <code>p5.SinOsc</code>, es definido al principio del c&#xF3;digo y luego creado dentro de <code>setup()</code>. El m&#xE9;todo <code>start()</code> causa que la onda empiece a generar sonido. Dentro de <code>draw()</code>, el m&#xE9;todo <code>freq()</code>  define continuamente la frecuencia de la onda, bas&#xE1;ndose en la posici&#xF3;n izquierda y derecha del<a contenteditable="false" data-primary="p5.sound audio library" data-secondary="creating sine waves" data-startref="p5sal13csw" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="p5.sound audio library" data-startref="p5sal13" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="sine wave frequencies" data-startref="swf13" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="libraries" data-secondary="p5.sound audio library" data-startref="lib13pdsal" data-type="indexterm">&#xA0;</a>rat&#xF3;n.</p>
</section>
</section>

<section data-type="sect1" id="p5dom-MDBGSxK">
<h1>p5.dom</h1>

<p>La<a contenteditable="false" data-primary="p5.dom library" data-type="indexterm" id="p5doml13">&#xA0;</a><a contenteditable="false" data-primary="libraries" data-secondary="p5.dom library" data-type="indexterm" id="l13p5doml">&#xA0;</a>biblioteca p5.dom posee la habilidad de crear e interactuar con <a contenteditable="false" data-primary="HTML elements, external" data-see="p5.dom library" data-type="indexterm">&#xA0;</a>elementos HTML fuera del lienzo gr&#xE1;fico.<a contenteditable="false" data-primary="Document Object Model (DOM) library" data-see="revisar biblioteca p5.dom" data-type="indexterm">&#xA0;</a><em>DOM</em> proviene de <em>Document Object Model</em>, que se refiere a un conjunto de m&#xE9;todos para interactuar program&#xE1;ticamente con la p&#xE1;gina HTML. Los siguientes ejemplos presentan unas pocas funciones clave. Revisa la <em>Referencia de p5.js</em> para ver muchos m&#xE1;s elementos que pueden ser creados y funciones que pueden ser llamadas: <a href="http://p5js.org/es/reference/#/libraries/p5.dom"><em class="hyperlink">http://p5js.org/es/reference/#/libraries/p5.dom</em></a>.</p>

<p>Tal como <code>createCanvas()</code> crea un lienzo gr&#xE1;fico en la p&#xE1;gina, p5.dom incluye un n&#xFA;mero de otros m&#xE9;todos <code>create</code> para a&#xF1;adir otros elementos HTML a la p&#xE1;gina. Entre los ejemplos se incluyen video, enlaces URL, cuadros para ingresar texto y barras deslizadoras.</p>

<section data-type="sect2" id="example-13-4-accede-a-la-webcam-aDqgS01">
<h2>Example 13-4: accede a la webcam</h2>

<p><code>createCapture()</code><a contenteditable="false" data-primary="p5.dom library" data-secondary="webcam access" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="webcam" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="createCapture() function" data-type="indexterm">&#xA0;</a>accede a la webcam de tu computador y crea un elemento HTML que muestra su audio y video. Una vez que el elemento de captura es creado, puede ser dibujado en el lienzo y manipulado:</p>

<figure class="left-align"><img alt="Ex 13 04" src="assets/images/gspj_13in04.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var captura;

function setup() {
  createCanvas(480, 120);
  captura = createCapture();
  captura.hide();
}

function draw() {
  var relacionDeAspecto = capture.height/capture.width;
  var h = width * relacionDeAspecto;
  image(captura, 0, 0, width, h);
  filter(INVERT);
}
</pre>

<p>El objeto captura est&#xE1; definido en la parte superior del c&#xF3;digo y luego es creado dentro de <code>setup()</code>. <code>createCapture()</code> de hecho adjunta un nuevo elemento a la p&#xE1;gina, pero como queremos dibujarlo en el lienzo, se usa el m&#xE9;todo <code>hide()</code> <a contenteditable="false" data-primary="hide() function" data-type="indexterm">&#xA0;</a>para esconder el objeto de captura. Revisa lo que pasa cuando descomentas esta l&#xED;nea de c&#xF3;digo.</p>

<p>Deber&#xED;as ver dos copias del video, una invertida y una normal.</p>

<p>Los datos del objeto captura son dibujados en el lienzo en la funci&#xF3;n <code>draw()</code> e invertidos usando el m&#xE9;todo <code>filter()</code> <a contenteditable="false" data-primary="filter() function" data-type="indexterm">&#xA0;</a>.</p>
</section>

<section data-type="sect2" id="ejemplo-13-5-crea-una-barra-deslizadora-RKaoSNY">
<h2>Ejemplo 13-5: crea una barra deslizadora</h2>

<p><code>createSlider()</code><a contenteditable="false" data-primary="p5.dom library" data-secondary="create a slider" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="createSlider() function" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="slider, creating" data-type="indexterm">&#xA0;</a>crea una barra deslizadora que puede ser usada para manipular aspectos del bosquejo. Acepta tres argumentos - el valor m&#xED;nimo, el valor m&#xE1;ximo y el valor inicial:</p>

<figure class="left-align"><img alt="Ex 13 05" src="assets/images/gspj_13in05.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var barra;

function setup() {
  createCanvas(480, 120);
  barra = createSlider(0, 255, 100);
  barra.position(20, 20);
}

function draw() {
  var gris = barra.value();
  background(gris);
}
</pre>

<p>El objeto barra es definido en la parte superior del c&#xF3;digo y luego creado dentro de <code>setup()</code>. Por defecto, el elemento ser&#xE1; adjuntado a la p&#xE1;gina, justo despu&#xE9;s del elemento m&#xE1;s recientemente creado en la p&#xE1;gina. El m&#xE9;todo <code>position()</code> <a contenteditable="false" data-primary="position() function" data-type="indexterm">&#xA0;</a>permite darle una posici&#xF3;n relativa a la esquina superior izquierda. El m&#xE9;todo <code>value()</code> <a contenteditable="false" data-primary="value() function" data-type="indexterm">&#xA0;</a>retorna el valor actual de la barra deslizadora, el cual est&#xE1; siendo usado para definir el color del fondo del lienzo en <code>draw()</code>.</p>
</section>

<section data-type="sect2" id="ejemplo-13-6-crea-un-recuadro-de-ingreso-de-texto-7DWLSrK">
<h2>Ejemplo 13-6: crea un recuadro de ingreso de texto</h2>

<p><code>createInput()</code>a&#xF1;ade<a contenteditable="false" data-primary="input box, creating" data-type="indexterm" id="ibc13">&#xA0;</a><a contenteditable="false" data-primary="p5.dom library" data-secondary="create an input box" data-type="indexterm" id="p5doml13cib">&#xA0;</a><a contenteditable="false" data-primary="createInput() function" data-type="indexterm">&#xA0;</a>un recuadro que puede ser usado para ingresar texto a tu programa. <code>createButton()</code> <a contenteditable="false" data-primary="createButton() function" data-type="indexterm">&#xA0;</a>a&#xF1;ade un bot&#xF3;n que puede gatillar cualquier funci&#xF3;n que escojas. En este caso, el bot&#xF3;n es usado para ingresar el texto dentro del recuadro de entrada al programa:</p>

<figure class="left-align"><img alt="Ex 13 06" src="assets/images/gspj_13in06.png">
<figcaption>
</figcaption></figure>

<pre data-code-language="p5js" data-type="programlisting">var entrada;
var boton;

function setup() {
  createCanvas(480, 120);
  entrada = createInput();
  entrada.position(20, 30);
  boton = createButton(&quot;submit&quot;);
  boton.position(160, 30);
  boton.mousePressed(dibujarNombre);

  background(100);
  noStroke();
  text(&quot;Ingresa tu nombre.&quot;, 20, 20);
}

function dibujarNombre() {
  background(100);
  textSize(30);
  var nombre = entrada.value();
  for (var i=0; i &lt; 30; i++) {
    fill(random(255));
    text(nombre, random(width), random(height));
  }
}
</pre>

<p>Los objetos entrada y boton son definidos en la parte superior del c&#xF3;digo y creados dentro de <code>setup()</code>. <code>createButton()</code> acepta un argumento, la etiqueta a ser mostrada en el bot&#xF3;n. El m&#xE9;todo <code>mousePressed()</code> es usado para asignar una funci&#xF3;n a ejecutar cuando el bot&#xF3;n es presionado. Dentro de <code>drawName()</code>, &#xA0;los contenidos del recuadro de entrada son le&#xED;dos usando el m&#xE9;todo <code>value()</code> y usados para rellenar el fondo con el <a contenteditable="false" data-primary="input box, creating" data-startref="ibc13" data-type="indexterm"></a><a contenteditable="false" data-primary="p5.dom library" data-secondary="create an input box" data-startref="p5doml13cib" data-type="indexterm"></a><a contenteditable="false" data-primary="libraries" data-startref="lib13" data-type="indexterm"></a><a contenteditable="false" data-primary="p5.dom library" data-startref="p5doml13" data-type="indexterm"></a><a contenteditable="false" data-primary="libraries" data-secondary="p5.dom library" data-startref="l13p5doml" data-type="indexterm"></a>texto.</p>
</section>
</section>
</section>

<section data-type="appendix" id="coding_tips">
<h1 class="chapterhead">Ap&#xE9;ndice A: Consejos de programacion</h1>

<p class="lede">Programar<a contenteditable="false" data-primary="coding tips" data-type="indexterm" id="ctappa">&#xA0;</a>es un tipo de escritura. Como todos los tipos de escritura, programar tiene reglas espec&#xED;ficas. Para comparar, mencionaremos r&#xE1;pidamente algunas de las reglas del espa&#xF1;ol a las que probablemente no les has puesto atenci&#xF3;n porque te son naturales.</p>

<p>Algunas de las reglas m&#xE1;s invisibles son escribir de izquierda a derecha y poner un espacio entre cada palabra. Otras reglas m&#xE1;s evidentes son las convenciones de ortograf&#xED;a, la may&#xFA;scula en los nombres de personas y lugares  y el uso de puntuaci&#xF3;n al final de las frases. Si rompes una o m&#xE1;s de estas reglas al escribir un correo a un amigo, el mensaje igualmente se puede entender. Por ejemplo, &quot;hola ben. como estas oy?&quot; se entiende casi tan bien como &quot;Hola, Ben. &#xBF;C&#xF3;mo est&#xE1;s hoy?&quot; Sin embargo, la flexibilidad de las reglas de escritura no se transfiere a la programaci&#xF3;n. Como est&#xE1;s escribiendo para comunicarte con un computador, en lugar de otra persona, necesitas ser m&#xE1;s preciso y cuidadoso. Un car&#xE1;cter fuera de lugar es a menudo la diferencia entre un programa que funciona y otro que no.</p>

<p>Tu navegador trata de indicarte d&#xF3;nde has cometido errores y de adivinar cu&#xE1;l es el error. Cuando ejecutas tu programa, si hay problemas gramaticales (sintaxis) en tu c&#xF3;digo<a contenteditable="false" data-primary="bugs, minimizing" data-type="indexterm">&#xA0;</a> (los llamamos <em>bugs</em>), la consola muestra un mensaje de error con un n&#xFA;mero de l&#xED;nea que indica d&#xF3;nde puede estar el error. El texto en la consola trata de ser de ayuda y sugiere el problema, pero a veces el mensaje es demasiado dif&#xED;cil de entender. Para un principiante, estos mensajes de error pueden ser frustrantes. Ten en cuenta que tu navegador est&#xE1; tratando de ayudar, pero tiene un conocimiento limitado sobre lo que t&#xFA; est&#xE1;s tratando de lograr.</p>

<p>Adicionalmente, tu navegador solamente puede encontrar un error a la vez. Si tu programa tiene muchos errores, necesitar&#xE1;s continuar ejecutando el programa y arreglando un error a la vez.</p>

<p>Por favor lee y vuelve a leer las siguientes sugerencias detenidamente para ayudarte a escribir c&#xF3;digo limpio. Para un tutorial m&#xE1;s profundo sobre correci&#xF3;n de errores, revisa <em class="hyperlink"><a href="https://p5js.org/es/learn/debugging.html">https://p5js.org/es/learn/debugging.html</a></em>.</p>

<section data-type="sect1" id="functions_and_parameters">
<h1>Funciones y par&#xE1;metros</h1>

<p>Los programas<a contenteditable="false" data-primary="coding tips" data-secondary="functions and parameters" data-type="indexterm" id="ctaafp">&#xA0;</a><a contenteditable="false" data-primary="parameters" data-type="indexterm" id="pappa">&#xA0;</a><a contenteditable="false" data-primary="functions" data-type="indexterm" id="fappa">&#xA0;</a>est&#xE1;n compuestos de muchas partes peque&#xF1;as, las que se agrupan para formar estructuras m&#xE1;s grandes. En espa&#xF1;ol tenemos un sistema similar: las palabras son agrupadas en frases, las que son combinadas para formar oraciones, las que luego son combinadas para crear p&#xE1;rrafos. La misma idea existe en c&#xF3;digo, pero las peque&#xF1;as partes tienen nombres distintos y se comportan de forma diferente. Las <em>funciones</em> y los <em>par&#xE1;metros</em> son dos partes importantes. Las funciones son los bloques b&#xE1;sicos para construir un programa en p5.js. Los par&#xE1;metros son los valores que definen c&#xF3;mo se comporta una funci&#xF3;n.</p>

<p>Considera una funci&#xF3;n <a contenteditable="false" data-primary="background() function" data-type="indexterm">&#xA0;</a>como <code>background()</code>. Como el nombre lo sugiere (&quot;background&quot; significa &quot;fondo&quot;), se usa para definir el color del fondo del lienzo. La funci&#xF3;n tiene tres par&#xE1;metros que definen el color. Estos n&#xFA;meros son los componentes rojo, verde y azul para definir el color. Por ejemplo, el c&#xF3;digo a continuaci&#xF3;n pinta azul el fondo:</p>

<pre data-code-language="p5js" data-type="programlisting">background(51, 102, 153);</pre>

<p>Revisa cuidadosamente esta linea de c&#xF3;digo. Los detalles clave son los par&#xE9;ntesis despues del nombre de la funci&#xF3;n que rodean a los n&#xFA;meros, y las comas entre cada n&#xFA;mero. Todas estas partes necesitan estar presentes para que el c&#xF3;digo se ejecute. Compara la l&#xED;nea de ejemplo anterior a estas dos versiones de la misma l&#xED;nea, pero con errores:</p>

<pre data-type="programlisting">background 51, 102, 153; // &#xA1;Error! Faltan los par&#xE9;ntesis
background(51 102, 153); // &#xA1;Error! Falta una coma</pre>

<p>Tambi&#xE9;n hay un punto y coma al final de cada l&#xED;nea. El punto y coma se usa como un punto. Se&#xF1;ala que se acab&#xF3; una instrucci&#xF3;n, para que el computador pueda buscar el inicio de la siguiente. Si omites el punto y coma, tu navegador lo averiguar&#xE1; de todos modos, pero se recomienda por consistencia que uses punto y coma. Sin embargo, la siguiente l&#xED;nea no tendr&#xED;a problemas:</p>

<pre data-code-language="p5js" data-type="programlisting">background(51, 102, 153) // Falta el punto y coma, no hay problema.</pre>

<p>El computador no perdona ni la menor omisi&#xF3;n o desviaci&#xF3;n de lo esperado. Si recuerdas estos consejos, cometer&#xE1;s menos errores. Pero si te equivocas al escribir, como nos ocurre a todos, no es un problema. Tu navegador te alertar&#xE1; sobre el problema, y cuando est&#xE9; corregido, el programa se ejecutar&#xE1; <a contenteditable="false" data-primary="coding tips" data-secondary="functions and parameters" data-startref="ctaafp" data-type="indexterm"></a><a contenteditable="false" data-primary="parameters" data-startref="pappa" data-type="indexterm"></a><a contenteditable="false" data-primary="functions" data-startref="fappa" data-type="indexterm"></a>correctamente.</p>
</section>

<section data-type="sect1" id="comments-id1">
<h1>Comentarios</h1>

<p>Los comentarios<a contenteditable="false" data-primary="comments" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="coding tips" data-secondary="comments" data-type="indexterm">&#xA0;</a>son notas que te escribes a ti mismo (o a otra gente) dentro del c&#xF3;digo. Debes usarlos para aclarar en palabras simples lo que el c&#xF3;digo est&#xE1; haciendo y para proveer informaci&#xF3;n adicional como el t&#xED;tulo y el autor del programa. Un comentario empieza con dos barras oblicuas (<code>//</code>) y contin&#xFA;a hasta el final de la l&#xED;nea:</p>

<pre data-code-language="p5js" data-type="programlisting">// Este es un comentario de una l&#xED;nea</pre>

<p>Puedes hacer un comentario de varias l&#xED;neas con <code>/*</code> y terminarlo con <code>*/</code>. Por ejemplo:</p>

<pre data-code-language="p5js" data-type="programlisting">/* Este comentario
   abarca m&#xE1;s de
   una l&#xED;nea
*/</pre>

<p>Cuando escribes un comentario de forma correcta, el texto ser&#xE1; de color gris. El &#xE1;rea comentada completa se vuelve gris para que puedas ver claramente d&#xF3;nde empieza y termina.</p>
</section>

<section data-type="sect1" id="uppercase_and_lowercase">
<h1>May&#xFA;sculas y min&#xFA;sculas</h1>

<p>p5.js distingue<a contenteditable="false" data-primary="uppercase/lowercase letters in code" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="lowercase/uppercase letters in code" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="coding tips" data-secondary="upper/lowercase letters" data-type="indexterm">&#xA0;</a>entre letras may&#xFA;sculas y min&#xFA;sculas y por lo tanto lee &quot;Hola&quot; como una palabra distinta de &quot;hola&quot;. Si est&#xE1;s tratando de dibujar un rect&#xE1;ngulo con la funci&#xF3;n <code>rect()</code> y escribes <code>Rect()</code>, el c&#xF3;digo no funcionar&#xE1;.</p>
</section>

<section data-type="sect1" id="style">
<h1>Estilo</h1>

<p>p5.js es flexible<a contenteditable="false" data-primary="coding tips" data-secondary="style and formatting" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="formatting/style of code" data-type="indexterm">&#xA0;</a>en cuanto a la cantidad de espacio usado para darle formato a tu c&#xF3;digo. A p5.js no le importa si escribes:</p>

<pre data-code-language="p5js" data-type="programlisting">rect(50, 20, 30, 40);</pre>

<p>o:</p>

<pre data-code-language="p5js" data-type="programlisting">rect (50,20,30,40);</pre>

<p>o:</p>

<pre data-code-language="p5js" data-type="programlisting">rect     (       50,20,
 30,   40)            ;</pre>

<p>Sin embargo, es conveniente que tu c&#xF3;digo sea de f&#xE1;cil lectura. Esto se hace especialmente importante a medida que tu c&#xF3;digo aumenta en longitud. Un formato limpio hace que la estructura del c&#xF3;digo sea legible de inmediato, y un mal formato a menudo esconde los problemas. Toma el h&#xE1;bito de escribir c&#xF3;digo limpio. Existen muchas formas de formatear bien tu c&#xF3;digo, y la forma en que usas espacios es una preferencia personal.</p>
</section>

<section data-type="sect1" id="console">
<h1>Consola</h1>

<p>La consola<a contenteditable="false" data-primary="console" data-type="indexterm">&#xA0;</a>&#xA0;es un panel en tu navegador que puede ser usado para ayudar a corregir errores en tu programa. Puedes escribir mensajes en la consola con la funci&#xF3;n <code>print()</code>. Por ejemplo, el siguiente c&#xF3;digo imprime un mensaje y a continuaci&#xF3;n imprime la hora actual:</p>

<pre data-code-language="p5js" data-type="programlisting">print(&quot;Hola p5.js.&quot;);
print(&quot;La hora es &quot; + hour() + &quot;:&quot; + minute());</pre>

<p>La consola es esencial para ver lo que est&#xE1; pasando dentro de tus programas mientras se ejecutan. Se usa para imprimir el valor de las variables y as&#xED; comprobarlas, para confirmar si est&#xE1;n ocurriendo eventos, y para determinar si un programa est&#xE1; teniendo un problema.</p>
</section>

<section data-type="sect1" id="one_step_at_a_time">
<h1>Un paso a la vez</h1>

<p>Te recomendamos escribir unas pocas l&#xED;neas de c&#xF3;digo a la vez y ejecutar el c&#xF3;digo frecuentemente para asegurarte que no se acumulen errores sin que te des cuenta. Todo programa ambicioso es escrito l&#xED;nea a l&#xED;nea. Divide tu proyecto en subproyectos m&#xE1;s simples y hazlos uno a la vez para que puedas lograr muchas peque&#xF1;as victorias, en vez de un grupo de errores. Si cometes un error, trata de aislar el &#xE1;rea del c&#xF3;digo donde crees que est&#xE1; el problema. Trata de imaginar que la correcci&#xF3;n de errores es como resolver un misterio o un rompecabezas. Si te quedas atascado o te frustras, toma una pausa para refrescar tu cabeza o p&#xED;dele ayuda a otra persona. A veces, la respuesta est&#xE1; delante tuyo, pero necesitas una segunda opini&#xF3;n para lograr<a contenteditable="false" data-primary="coding tips" data-startref="ctappa" data-type="indexterm">&#xA0;</a>encontrarla.</p>
</section>
</section>

<section data-type="appendix" id="order_of_operations">
<h1 class="chapterhead">Ap&#xE9;ndice B: Orden de operaciones</h1>

<p class="lede">Cuando <a contenteditable="false" data-primary="order of operations" data-type="indexterm">&#xA0;</a>se realizan c&#xE1;lculos matem&#xE1;ticos en un programa, cada operaci&#xF3;n ocurre de acuerdo a un orden predeterminado. Este <em>orden de operaciones</em> asegura que el c&#xF3;digo se comporte de la misma manera cada vez que se ejecute. Esto no es muy distinto que en aritm&#xE9;tica o &#xE1;lgebra, no obstante en la programaci&#xF3;n existen operadores que son menos conocidos.</p>

<p>En la siguiente tabla, los operadores de la secci&#xF3;n superior son ejecutados antes que los de la secci&#xF3;n inferior - por lo tanto, una operaci&#xF3;n dentro de par&#xE9;ntesis ser&#xE1; ejecutada al principio y una asignaci&#xF3;n ser&#xE1; ejecutada al final:</p>

<table>
	<thead>
		<tr>
			<th>Nombre</th>
			<th>S&#xED;mbolo</th>
			<th>Ejemplos</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>
			<p>Par&#xE9;ntesis</p>
			</td>
			<td>
			<p><code>()</code></p>
			</td>
			<td>
			<p><code>a \* (b + c)</code></p>
			</td>
		</tr>
		<tr>
			<td>
			<p>Sufijo, Unario</p>
			</td>
			<td>
			<p><code>++ &#x2212;&#x2212; !</code></p>
			</td>
			<td>
			<p><code>a++ &#x2212;&#x2212;b !c</code></p>
			</td>
		</tr>
		<tr>
			<td>
			<p>Multiplicativo</p>
			</td>
			<td>
			<p><code>* / %</code></p>
			</td>
			<td>
			<p><code>a \* b</code></p>
			</td>
		</tr>
		<tr>
			<td>
			<p>Aditivo</p>
			</td>
			<td>
			<p><code>+ &#x2212;</code></p>
			</td>
			<td>
			<p><code>a + b</code></p>
			</td>
		</tr>
		<tr>
			<td>
			<p>Relacional</p>
			</td>
			<td>
			<p><code>&gt; &lt; &lt;= &gt;=</code></p>
			</td>
			<td>
			<p><code>if (a &gt; b)</code></p>
			</td>
		</tr>
		<tr>
			<td>
			<p>Igualdad</p>
			</td>
			<td>
			<p><code>== !=</code></p>
			</td>
			<td>
			<p><code>if (a == b)</code></p>
			</td>
		</tr>
		<tr class="largerTr">
			<td>
			<p>AND l&#xF3;gico</p>
			</td>
			<td>
			<p><code>&amp;&amp;</code></p>
			</td>
			<td>
			<p><code>if (mouseIsPressed &amp;&amp; (a &gt; b))</code></p>
			</td>
		</tr>
		<tr class="largerTr">
			<td>
			<p>OR l&#xF3;gico</p>
			</td>
			<td>
			<p><code>||</code></p>
			</td>
			<td>
			<p><code>if (mouseIsPressed || (a &gt; b))</code></p>
			</td>
		</tr>
		<tr class="largerTr">
			<td>
			<p>Asignaci&#xF3;n</p>
			</td>
			<td>
			<p><code>= += &#x2212;= *= /= %=</code></p>
			</td>
			<td>
			<p><code>a = 44</code></p>
			</td>
		</tr>
	</tbody>
</table>
</section>

<section data-type="appendix" id="variable_scope">
<h1 class="chapterhead">Ap&#xE9;ndice C: &#xC1;mbito de variable</h1>

<p class="lede">La<a contenteditable="false" data-primary="variable scope rule" data-type="indexterm">&#xA0;</a><a contenteditable="false" data-primary="rule of variable scope" data-type="indexterm">&#xA0;</a>regla del &#xE1;mbito de variable se define simplemente como: una variable creada dentro de un bloque (c&#xF3;digo dentro de llaves: <code>{</code> y <code>}</code>) solamente existe dentro de ese bloque.</p>

<p>Esto significa que una variable creada dentro de <code>setup()</code> solamente puede ser usada dentro del bloque <code>setup()</code>, y de la misma forma, una variable declarada dentro de <code>draw()</code> solamente puede ser usada dentro del bloque <code>draw()</code>. La excepci&#xF3;n a esta regla es una variable declarada fuera de <code>setup()</code> y <code>draw()</code>. Estas variables pueden ser usadas dentro de tanto <code>setup()</code> como <code>draw()</code> (o dentro de cualquier otra funci&#xF3;n que hayas creado). Piensa en el &#xE1;rea fuera de <code>setup()</code> y <code>draw()</code> como un bloque de c&#xF3;digo impl&#xED;cito. Estas variables reciben el nombre de <em>variables globales</em>, porque pueden ser usadas en cualquier parte dentro del programa. A una variable que solamente podemos usar dentro de un &#xFA;nico bloque la llamamos <em>variable local</em>. A continuaci&#xF3;n hay un par de ejemplos de c&#xF3;digo que explican con m&#xE1;s detalles el concepto. Primer ejemplo:</p>

<pre data-code-language="p5js" data-type="programlisting">var i = 12;   // Declara variable global i y asigna el valor 12

function setup() {
  createCanvas(480, 320);
  var i = 24; // Declara variable local i y asigna el valor 24
  print(i); // Imprime 24 en la consola
}

function draw() {
  print(i); // Imprime 12 en la consola
}</pre>

<p>Segundo ejemplo:</p>

<pre data-code-language="p5js" data-type="programlisting">function setup() {
  createCanvas(480, 320);
  var i = 24; // Declara variable local i y asigna el valor 24
}

function draw() {
  print(i); // ERROR! La variable i es local a setup()
}</pre>
</section>

<section data-type="introduction" class="closer notoc" id="9Dl2tgL">
<!--<h1 class="chapterhead">Esto es un encabezado</h1>-->

<figure id="TChoi-End-closethegap"><img class="fse fs image" src="assets/images/gspj_acin01.png">
<figcaption>&#xA0;</figcaption>
</figure>
</section>

<section data-type="index" id="9zxMt2v">
</section>
<section xmlns="http://www.w3.org/1999/xhtml" data-type="colophon" class="abouttheauthor" id="sobre-los-autores-yRL4SQR">
  <h1>Sobre los autores</h1>
  <p><strong>Lauren McCarthy</strong> es una artista y profesora en el Department of Design Media Arts en UCLA. Fue residente en Eyebeam y en el Frank-Ratchye STUDIO for Creative Inquiry de Carnegie Mellon University. Dirige el desarrollo de p5.js.</p>
  <p><strong>Casey Reas</strong> es profesor en el Department of Design Media Arts en UCLA. Sus softwares, impresiones e instalaciones han sido destacados en numerosas exhibiciones individuales y colectivas en museos y galer&#xED;as en Estados Unidos, Europa y Asia. Casey co-fund&#xF3; Processing con Ben Fry en el a&#xF1;o 2001.</p>
  <p><strong>Ben Fry</strong> es director de Fathom, una consultora de dise&#xF1;o y software ubicada en Boston. Recibi&#xF3; su PhD del Aesthetics + Computation Group en el MIT Media Laboratory, donde su investigaci&#xF3;n se enfoc&#xF3; en combinar campos como ciencias de la computaci&#xF3;n, estad&#xED;stica, dise&#xF1;o gr&#xE1;fico, y visualizaci&#xF3;n de datos como medio para el entendimiento de informaci&#xF3;n. Ben co-fund&#xF3; Processing con Casey Reas en el a&#xF1;o 2001.</p>
  <h1>Sobre el ilustrador</h1>
  <p><strong>Taeyoon Choi</strong> es un artista radicado en Nueva York y Se&#xFA;l, que trabaja con dibujos, electr&#xF3;nica, y performance. Taeyoon ha sido residente en Eyebeam, y co-fund&#xF3; la School for Poetic Computation.</p>
</section>

<section data-type="colophon" xmlns="http://www.w3.org/1999/xhtml" id="colofon-bkjPCgW">
<h1>Colof&#xF3;n</h1>

<p>El tipo de letra del cuerpo es TheSerif dise&#xF1;ado por Luc(as) de Groot. El tipo de letra del c&#xF3;digo es TheSansMono por Luc(as) de Groot.</p>
</section>
</body></html><!--<nav data-type="toc"/>-->
  </body>
</html>
